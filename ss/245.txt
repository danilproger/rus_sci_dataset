СИСТЕМА ОПЕРАТИВНОГО МОНИТОРИНГА ТЕМПЕРАТУРЫ И ЭНЕРГОПОТРЕБЛЕНИЯ СУПЕРКОМПЬЮТЕРА «УРАН» 

Рассматривается разработанная система оперативного мониторинга температуры и энергопотребления суперкомпьютера «УРАН», ключевой особенностью которой является компактное представление данных мониторинга, позволяющее администратору быстро оценить работоспособность суперкомпьютера, просмотрев один-два экрана. Система основана на открытом ПО Zabbix..

 Институт математики и механики Уральского отделения РАН располагает суперкомпьютером УРАН 1, который является основным вычислительным ресурсом УрО РАН и одним из четырех ресурсных центров информационно-вычислительной базы Уральского федерального округа. Корректная работа этой сложной и многокомпонентной системы существенно зависит от температурного режима и тесно связана с настройками электропитания, а следовательно, и с энергопотреблением. Поэтому непрерывный мониторинг и хранение данных о температуре и энергопотреблении компонентов СК УРАН являются актуальными задачами. Мониторинг СК осложняется большим количеством входящих в их состав компонентов и параметров, влияющих на работоспособность. Выполнять мониторинг каждого датчика в отдельности неэффективно. Для обеспечения оперативного мониторинга система должна представлять администратору данные о состоянии СК в один-два экрана. Распространенные системы мониторинга такой возможности не имеют. Хранение данных по температуре и энергопотреблению СК позволяет осуществлять их статистическую обработку с последующим прогнозированием возможных сбоев на раннем этапе возникновения, тем самым увеличивая среднее время между отказами СК 2. Статистический анализ данных по энергопотреблению в совокупности с данными запуска задач на СК позволяет выбирать оптимальный режим управления питанием, что благоприятно сказывается на таком важном параметре, как производительность на единицу потребляемой мощности. Целью работы является создание системы мониторинга температуры и энергопотребления СК УРАН для прогнозирования возможных сбоев на раннем этапе и обеспечения бесперебойного функционирования СК. Для достижения данной цели требуется решить следующие задачи круглосуточный мониторинг температуры компонентов СК и мощности потребляемого ими электропитания предупреждение специалистов о нештатных ситуациях с температурой и энергопотреблением СК сбор и хранение статистических данных по температуре и энергопотреблению СК обеспечение представления собранных данных в виде, пригодном для дальнейшего анализа. Источники данных и методы доступа к ним СК УРАН состоит из ВУ на основе блейдсерверов производства компании HP, моделей Proliant BL2x220c G5 и Proliant BL460c G5. Сбор данных производится с датчиков температуры ВУ, установленных в области процессоров, системной платы, памяти и на месте входа воздуха в ВУ, а также с датчика энергопотребления ВУ. Полученные данные необходимо хранить в течение среднего срока эксплуатации вычислительного оборудования . Показания датчиков можно получать как из ОС Linux, которая работает на ВУ, так и через управляющий интерфейс HP iLO, который имеет собственный IP-адрес и выделенный сетевой интерфейс, подключенный к сети управления СК. Взаимодействие с HP iLO ведется по протоколам HTTP, SSH, SNMP и IPMI. Важной особенностью является работоспособность HP iLO при подключении питания к шасси с ВУ, при этом не требуется запуск ОС и питание самого сервера может быть выключено. Существуют следующие методы доступа к данным о температуре и энергопотреблении ВУ. SNMP стандартный протокол сетевого управления и мониторинга, поддерживаемый практически всеми современными аппаратными устройствами и ОС. IPMI интерфейс удаленного управления серверами, разработанный компанией Intel, поддержанный многими производителями в том числе HP и ставший де-факто стандартом удаленного управления серверами. IPMI позволяет через сетевое соединение включать и выключать питание, получать доступ к консоли сервера, собирать данные о состоянии оборудования и показания встроенных в сервер датчиков. Агент системы мониторинга специальная программа, устанавливаемая на сервер, собирающая информацию о его работе и передающая ее системе мониторинга по стандартному или специально разработанному протоколу. SSH-соединение с ОС Linux или адаптером iLO позволяет получать данные о показаниях датчиков с помощью командной строки. Проанализировав методы сбора информации о температуре и энергопотреблении ВУ СК, авторы выбрали получение данных по протоколу IPMI через управляющий интерфейс HP iLO по следующим причинам возможность сбора и передачи данных при неработающей ОС или выключенном питании ВУ отсутствие трудоемких операций по установке и сопровождению агентов системы мониторинга возможность использования выделенной сети управления СК. Кроме того, производительность IPMI выше, чем SSH и агентов систем мониторинга благодаря аппаратной реализации. В.М. Глушкова НАН Украины 5. Институт математики и механики УрО РАН является академической организацией и ориентирован на преимущественное использование открытого ПО. Поэтому был выполнен анализ возможностей популярных бесплатных систем мониторинга СК Ganglia, Nagios, Cacti, Zabbix. Все системы поддерживают большое количество устройств и метрик мониторинга, имеют необходимую производительность, предоставляют web-интерфейс с возможностью просмотра данных мониторинга и построения графиков. Оценить применимость системы для мониторинга СК УРАН авторы предлагают с помощью следующего набора критериев С поддержка интерфейса IPMI, используемого для сбора данных С технология хранения данных, учитывающая тип репозитория, возможный срок хранения и интерфейс доступа к данным С средства консолидированного представления информации, включающие единый отчет о состоянии, групповые функции и графики, настраиваемые карты и экраны С средства предупреждения о проблемах визуальная идентификация, отправка сообщений по e-mail или SMS С поддержка пользовательского интерфейса на русском языке. Качественный анализ открытых систем мониторинга приведен в таблице 1. Результаты экспертной оценки открытых систем мониторинга по предложенным критериям приведены в таблице 2. На основе результатов экспертной оценки можно сделать вывод, что система Zabbix более всего подходит для мониторинга температуры и энергопотребления СК УРАН. Практическая реализация Система мониторинга СК УРАН выполнена на основе Zabbix на платформе Scientific Linux 6. Сбор данных обеспечен через управляющий модуль HP iLO 2 по интерфейсу IPMI. Для хранения данных используется СУБД MySQL, срок хранения три года. Пользовательский интерфейс организован через web. Стандартный web-интерфейс Zabbix был существенно расширен в целях обеспечения оперативности мониторинга за счет предоставления администраторам компактной информации, позволяющей быстро оценить температуру и энергопотребление всех компонентов СК. Возможно построение графика на основе данных за предыдущие периоды средствами web-интерфейса Zabbix, что полезно при расследовании инцидентов с СК. Разработанные средства консолидированного представления данных позволяют найти проблему в работе СК, просмотрев всего несколько экранов системы мониторинга, что существенно сокращает затраты времени на диагностику. В заключение можно отметить следующее. Созданная на базе открытого ПО Zabbix система оперативного мониторинга температуры и энергопотребления СК УРАН обеспечивает современный уровень эксплуатационной поддержки СК за счет быстрого обнаружения проблем и отправки сообщения администраторам для их устранения. Встроенные средства консолидации представления данных мониторинга позволяют оперативно получать информацию о работоспособности СК путем просмотра одного-двух экранов системы. Обеспечено долговременное хранение данных мониторинга в СУБД MySQL, что дает возможность проводить их обработку с помощью статистических методов в целях прогнозирования сбоев в работе СК. Дальнейшая работа направлена на исследование и практическую реализацию таких методов анализа данных мониторинга. 