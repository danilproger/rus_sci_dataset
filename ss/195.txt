ОПТИМИЗАЦИОННАЯ МОДЕЛЬ РЕШЕНИЯ ОБРАТНОЙ ЗАДАЧИ МОДЕЛИРОВАНИЯ ДВИЖЕНИЯ АВАТАРА В ОПЕРАТИВНОМ ПРОСТРАНСТВЕ 

В статье рассмотрены проблемы моделирования действий оператора в современных тренажно-моделирующих комплексах. Предложена методика решения задачи моделирования движения аватара в области оперативного пространства как задачи оптимального перемещения руки аватара в целевую точку воздействия на объект виртуального мира, основанная на допустимых траекториях движения элементов скелета руки аватара..

 Одним из перспективных направлений развития моделирующих комплексов тренажной подготовки персонала является обеспечение возможности проведения комплексных упражнений с участием двух или нескольких обучаемых операторов. Для обеспечения возможности взаимодействия тренирующихся в виртуальном мире операторов необходимо, чтобы каждый оператор, как и моделируемые системы, стал объектом моделирования. Для этого в состав тренажерно-моделирующего комплекса должен быть введен программный модуль, обеспечивающий моделирование человека 1. Движения аватаров в виртуальном пространстве ТМК предлагается разделять на локальные и глобальные. Локальные движения выполняются руками при неподвижном туловище аватара они необходимы для взаимодействия аватара с объектами виртуального мира. Область вблизи аватара, до любой точки которой он может дотянуться рукой без перемещения своего тела, назовем зоной оперативного пространства. Таким образом, локальные движения это движения в области оперативного пространства, а глобальные перемещения аватара в виртуальном мире, совершаемые для попадания целевой точки в зону оперативного пространства. Глобальные движения представляют собой перемещения аватара в виртуальном пространстве ТМК на сравнительно большие расстояния. Данные движения можно представить как типовые, поскольку их набор ограничен и они, как правило, являются периодическими. Движения в области оперативного пространства чрезвычайно разнообразны, их нельзя привести к типовым, так как они в полной мере определяются моделируемой ситуацией. Ввиду широчайшего многообразия движений в области оперативного пространства эти движения названы уникальными. Для моделирования уникальных движений предлагается новый метод решения задачи подведения руки аватара к целевой точке с применением математического аппарата геометрии и линейной алгебры, основанный на допустимых траекториях движения частей тела аватара. В результате требуется определить обобщенные координаты q, q, q звеньев кинематической цепи руки аватара. Задача определения параметров кинематической цепи руки аватара делится на три этапа. 1-й этап. Для этого вычисляется матрица М преобразования из системы координат целевой точки в мировую систему координат 2 l l sin cos, l l cos,. 2-й этап. Определение допустимого множества положений локтевого сустава С и применение критериев оптимизации положения локтевого сустава при действии аватара в оперативном пространстве. Для этого рассмотрим движение плеча независимо от предплечья . Плечевое звено вращается в плечевом суставе, при этом локтевой сустав С описывает в пространстве сферу S с центром в С радиусом l. Аналогично предплечье вращается независимо от плеча в суставе запястья, при этом локтевой сустав С описывает в пространстве сферу S с центром в С радиусом l. Очевидно, что точки пересечения этих двух сфер S и S образуют множество возможных положений локтевого сустава. Таким образом, обратная задача сводится к задаче поиска точек пересечения двух сфер, обозначенных S и S. Для упрощения вычислений введем новую систему координат O x y z с центром в плечевом суставе и ориентированную таким образом, чтобы сустав запястья лежал на оси O x. Окружность лежит в плоскости, перпендикулярной оси O x. Вследствие того, что рука аватара обладает кинематической избыточностью, найденное решение не является единственным и представляет собой множество допустимых положений локтевого сустава, из которых путем решения оптимизационной задачи определения допустимой конфигурации скелета руки аватара выбирается наиболее соответствующее реальному движению человека. 3-й этап. Вычисление обобщенных координат q, q и q, определяющих ориентацию звеньев кинематической цепи руки аватара в конечной конфигурации скелета руки аватара, выполняется следующим образом. По найденным положениям суставов скелета руки аватара определяем направления осей Ox всех элементов скелета руки аватара. Поскольку принято, что ось Ox элемента скелета направлена вдоль элемента скелета, то оси Ox лежат на прямых, соединяющих суставы руки аватара C C O x, C C C C O x C C,. Направления осей Oy и Oz систем координат элементов скелета руки аватара определяем таким образом, чтобы вращение ортов системы координат при движении из начальной конфигурации скелета к конечной было минимальным. По ортам осей систем координат строим матрицы преобразования из одной системы координат в другую для всех элементов скелета руки аватара и кватернионы, являющиеся обобщенными координатами элементов скелета. Для выбора одного из множества найденных допустимых положений локтевого сустава при движении аватара в оперативном пространстве предлагается метод на основе решения задачи оптимизации с ограничивающими условиями, учитывающими допустимые движения элементов скелета в суставах. В качестве целевой функции оптимизации использована комбинация критериев минимизации перемещения локтевого сустава при движении руки аватара к целевой точке и принципа нижайшего локтя. Критерий минимизации перемещения локтевого сустава определяет такое конечное положение локтевого сустава, при котором его движение из начальной конфигурации к конечной будет минимальным. При этом целевая функция имеет следующий вид Критерий оптимизации движения руки аватара на основе принципа нижайшего локтя 3, применяемого в робототехнике, определяет такое конечное положение локтевого сустава, при котором расстояние от локтевого сустава до плоскости пола минимально. Ограничивающие условия делятся на три группы. 1. Для учета биомеханических параметров движения руки человека применены ограничения, учитывающие максимальные углы вращения в суставах плеча, локтя и запястья. При этом необходимо для положения локтевого сустава, вычисленного на текущей итерации, для каждого i-го элемента скелета руки определить обобщенные координаты и преобразовать их в углы Эйлера,. Тогда ограничения будут иметь вид,. Преобразуем их к форме, пригодной для применения в методе штрафных функций g, 0, g, 0, g, 0, g, 0, g, 0, g, 0. 2. Ограничения на допустимые углы подведения кисти к целевой точке и имеют следующий вид g 0, g 0, g 0, g 0. 3. Экспериментальное сравнение модели движения аватара в оперативном пространстве, построенной на кинематике манипуляторов, и вышеописанной модели, основанной на допустимых траекториях движения элементов скелета руки аватара, показало, что наилучшие результаты дает модель на основе допустимых траекторий движения частей тела аватара. На данном графике также представлено сравнение разработанной модели с физическим моделированием движения на основе динамики RagDoll, применяемой в компьютерных играх, которая также проигрывает в скорости работы. 