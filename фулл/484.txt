ПЛАНИРОВАНИЕ ЗАДАНИЙ С СИНХРОННЫМ СТАРТОМ 

Рассматривается формализованная модель исполнения произвольной многозадачной системы реального времени с синхронным стартом. Для таких систем формулируются необходимые и достаточные условия, выполнение которых обеспечивает своевременное исполнение всех задач. Приводится соответствующий алгоритм планирования. 

 В вычислительных системах, функционирующих в реальном масштабе времени, используется, как правило, многозадачный псевдопараллельный режим вычислений. Планирование вычислительного процесса для таких систем должно обеспечивать обязательное своевременное выполнение всех ее задач. Для сравнительной оценки различных алгоритмов планирования строится математическая модель распределения процессорного времени. Приводимый в статье подход может применяться в вычислительных системах, создаваемых на базе разработанной в НИИСИ РАН операционной системы реального времени ос2000 Годунов А.Н. и др.. Модель многозадачной системы В модели аналогом задачи является задание. Прикладная задача в целом рассматривается как последовательность заданий, упорядоченных в хронологическом порядке по мере их возникновения. Приведем соответствующие определения. Задание интерпретируется как исполняемая на ЭВМ задача, возникшая и готовая к исполнению в момент t. Ресурсная длительность задания L это время, необходимое для выполнения задачи в монопольном режиме, то есть когда процессор занят только ее выполнением. При многозадачном режиме выполнение задач прерывается другими задачами, функциями обработки прерываний, ожиданием ресурсов и др. Поэтому, даже если задача фактически стартовала сразу в момент своего возникновения, ее выполнение может завершиться в момент t tL. Максимальная длительность задания T это максимальное время, за которое задача должна быть выполнена. В изучаемой модельной ситуации рассмотрим только одну возможную причину прерывания выполнения задачи выполнение других задач. Формализуем эту ситуацию, введя понятие системы. Другими словами, начала составляющих систему заданий должны образовывать неубывающую последовательность. Число t будем считать началом системы. Полуинтервалом t, t назовем множество чисел t, удовлетворяющих неравенствам t tt. Такой полуинтервал является неограниченным, или бесконечным, числа t и t соответственно левой и правой границами полуинтервала. Два полуинтервала называются смежными, если правая граница одного полуинтервала совпадает с левой границей другого. Очевидно, объединение двух смежных полуинтервалов является полуинтервалом. Пусть дан полуинтервал a, b. Если t момент старта системы, то интервал t, будем называть интервалом определения системы. Интерпретация функции p следующая. Значение p это номер задания, выполняемого в момент t. Нулевое значение p означает, что ни одно из заданий в момент t не выполняется. Определение функции планирования нуждается в формальной проверке корректности свойства 4, поскольку набор несмежных полуинтервалов, существование которых требуется в п. 3, может быть определен неоднозначно, а значит, и сумма их длин может изменяться от одного набора к другому. Заметим, что для каждого i объединение несмежных полуинтервалов, рассматриваемых как множество, определено однозначно. Поэтому для доказательства корректности определения надо установить истинность следующей леммы. Лемма . Пусть дано множество M в виде объединения конечного количества несмежных полуинтервалов. Тогда такое представление единственно. Доказательство леммы опускается. Будем считать, что функция p удовлетворяет свойству перемены значения на заданных смежных полуинтервалах, если значения p на этих полуинтервалах различны. Также положим, что функция p удовлетворяет свойству перемены значения на разбиении полуинтервала, если для любых двух смежных полуинтервалов из разбиения выполняется свойство перемены значения. Полуинтервалы, существование которых утверждается в пункте 3 определения функции планирования, назовем характеристическими полуинтервалами функции планирования, соответствующими значению i. Из леммы о единственности представления следует, что множество характеристических полуинтервалов, соответствующих значению i, определено однозначно. Набор всех характеристических полуинтервалов, соответствующих всем значениям функции планирования, назовем характеристическим разбиением функции планирования, а сами полуинтервалы характеристическими полуинтервалами функции планирования. Заметим, что определение характеристических интервалов корректно и в случае функции, для которой выполнены только первые три свойства из определения функции планирования. Очевидно, разбиение функции планирования содержит не меньше чем N1 полуинтервал, где N количество заданий в системе. Для заданной системы характеристическое разбиение полностью определяется функцией планирования. Поскольку значения функции планирования в пределах одного характеристического полуинтервала не меняются, под значением функции планирования на характеристическом полуинтервале будем понимать значение функции планирования в произвольной точке характеристического полуинтервала. Если I полуинтервал, то это значение будем обозначать через p. Левые границы полуинтервалов, образующих характеристическое разбиение, назовем точками переключения планирования . Количество точек переключения планирования равно количеству характеристических полуинтервалов. Пусть даны система и функция планирования. Для задания с номером i через F обозначим правую границу самого правого характеристического полуинтервала, соответствующего значению i. Число F назовем окончанием задания с номером i. Система S называется разрешимой, если в ней существует разрешающая функция планирования. Теоремы о системах c синхронным стартом Определим критерии разрешимости системы и методы построения функций планирования, разрешающих систему. Рассмотрим только системы с синхронным стартом, или синхронные системы, то есть такие системы, все задания которых имеют общий момент старта. Это необходимый шаг при рассмотрении свойств систем общего вида. Общее начало заданий для синхронных систем обозначим через t. Дадим определение последовательной функции планирования. Для заданной синхронной системы S и функции планирования p сегментом назовем непрерывную последовательность полуинтервалов . Точнее, сегмент это подмножество, состоящее из полуинтервалов характеристического разбиения, объединение которых в теоретико-множественном смысле снова полуинтервал. Количество составляющих сегмент полуинтервалов назовем комбинаторной длиной сегмента. Сегментом разрыва будем называть такой сегмент s,. Функция планирования является последовательной, если у нее отсутствуют сегменты разрыва, то есть образующие систему задачи выполняются последовательно сначала полностью выполняется одно задание, потом другое и т.д. Ясно, что функция планирования последовательная тогда и только тогда, когда принимает отличное от нуля значение ровно на N полуинтервалах характеристического разбиения. То же утверждение можно сформулировать следующим образом функция планирования тогда и только тогда последовательная, когда у нее ровно N1 точка переключения планирования. Теорема 1 . Пусть дана синхронная система. Если эта система разрешима, то существует последовательная функция планирования, разрешающая ее. Доказательство. Допустим, что функция p не является последовательной. Тогда у нее существуют сегменты разрыва. Так как комбинаторная длина сегмента минимальна, значения функции p на всех сегментах u,. Через l,. Очевидно, что Iseg является теоретико-множественным объединением полуинтервалов u,. Через . Очевидно, что полуинтервал w неограниченный. Объединение полуинтервалов v,. Количество точек переключения планирования функции p на Lseg, Iseg и Rseg равно соответственно L, K и R. Построим новую функцию планирования p1 синхронной системы S, количество точек переключения планирования которой будет меньше B. На полуинтервалах Lseg и Rseg положим p1 равной p. Для задания p1 построим разбиение . Легко проверить, что . Поскольку объединение полуинтервалов z,. Можно проверить, что построенная функция p1 является разрешающей функцией планирования системы S, а количество точек переключения этой функции меньше количества точек переключения функции p. Если функция p1 не является последовательной, то повторно применим к ней описанную процедуру и получим функцию планирования, у которой количество точек переключения будет еще на единицу меньше. Так будем поступать до тех пор, пока у полученной функции планирования не станет ровно N1 точка переключения планирования, а значит, функция последовательная. Теорема 1 доказана. В силу ее справедливости теперь при определении критериев разрешимости систем и поиске алгоритмов построения разрешающих функций планирования достаточно рассматривать только последовательные функции планирования. Опишем монотонный алгоритм планирования. Монотонный алгоритм планирования состоит в том, что сначала выполняется задание с наименьшей максимально допустимой длительностью, потом следующее за ним, и так далее, пока не будут выполнены все задания. Сформулируем определение монотонного алгоритма в терминах функции планирования. Отображение называется порядком исполнения заданий. Легко проверить, что отображение определено единственным образом. Обозначим через отображение, обратное . Определим последовательность полуинтервалов u,. Пусть теперь построены u,. Левые границы этих полуинтервалов обозначим через l, а правые через r. Построим полуинтервал u. Определим монотонную функцию планирования p. Пусть t принадлежит Iseg. Тогда t принадлежит в точности одному полуинтервалу u. Обозначим через r правую границу Iseg. Лемма. Построенная функция p является функцией планирования системы S, разбиение . Если синхронная система разрешима, то монотонная функция планирования разрешающая. Доказательство. Опишем конструкцию, приводящую к построению монотонной функции планирования. В силу теоремы 1 для системы S существует последовательная функция планирования p. Пусть . Пару характеристических интервалов из разбиения . Количество неупорядоченных пар характеристических интервалов назовем дефектом функции планирования . Обозначать дефект будем через . Если образующие неупорядоченную пару полуинтервалы смежные, такую неупорядоченную пару назовем смежной. Лемма . Если дефект функции планирования положительный, то существует по крайней мере одна смежная неупорядоченная пара. Рассмотрим смежную неупорядоченную пару характеристических полуинтервалов. То, что смежная пара неупорядоченная, означает следующее Tp Tp. Заменим пару полуинтервалов z, z на пару полуинтервалов y, y. Пусть l левая граница z, r правая граница z. Пусть L обозначает ресурсную длительность задания с номером i. Очевидно, что полуинтервалы y и y смежные, и их объединение совпадает с объединением z и z. Если функция p1 немонотонная, то, снова применив процедуру уменьшения дефекта, получим новую функцию планирования с еще меньшим дефектом. И так далее, до тех пор, пока дефект не станет нулевым, а функция планирования монотонной. Теорема о монотонном планировании доказана. Предположим нумерацию заданий системы такой, что T T. Из теоремы о монотонном планировании следует, что система разрешима тогда и только тогда, когда она монотонно разрешима. Приведенный критерий представляет конструктивный способ проверки разрешимости конкретной системы с синхронным стартом. В статье приведена формализованная модель исполнения произвольной многозадачной системы реального времени с синхронным стартом, предназначенная для анализа разрешимости системы, то есть определения возможности своевременного завершения заданий системы. Показано, что система разрешима в том и только в том случае, когда она разрешима при монотонном планировании. Это приводит к построению алгоритма, определяющего порядок исполнения заданий системы. Дальнейшая работа связана с анализом разрешимости произвольных несинхронных систем. 