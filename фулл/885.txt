ПОСТРОЕНИЕ ДИНАМИЧЕСКИХ ГЕОМЕТРИЧЕСКИХ  МОДЕЛЕЙ ОКРУЖАЮЩЕГО ПРОСТРАНСТВА   ДЛЯ МОБИЛЬНЫХ АВТОНОМНЫХ СИСТЕМ 

Рассматривается метод построения динамических геометрических моделей объектов окружающего пространства, позволяющий решать задачу целенаправленного перемещения мобильных автономных систем.  Предлагаемый подход основан на представлении получаемых образов окружающего пространства в виде упорядоченных структур одномерных симплексов, что дает возможность реализовать быстродействующие алгоритмы картографирования, локализации и идентификации объектов окружающего пространства. Ключевые слова  — техническое зрение, локализация, SLAM, представление окружающего пространства,  построение карты, геометрическая модель объекта. 

В связи с постоянным расширением области применения робототехнических систем предъявляются все более высокие требования к способам получения сенсорной информации об окружающей робота среде, а также к методам обработки и анализа этих данных. Очевидно, что наиболее информативным каналом получения сенсорных данных для мобильного робота, действующего в частично наблюдаемом, динамически изменяющемся, стохастическом окружении, является набор видеокамер, позволяющий обеспечить восприятие визуальной информации по типу бинокулярного зрения. Геометрическое представление окружающего пространства составление карты и одновременная локализация относительно выделенных объектов является одной из важнейших задач, решаемых при разработке мобильных автономных систем. Выделение объектов позволяет решать уже последующие задачи классификации и точной идентификации 1. Обзор окружающего пространства посредством видеокамер либо локационное сканирование в радиочастотном или ультразвуковом диапазонах предоставляет некоторый образ, который подлежит дальнейшей обработке. В случае, когда мобильный робот помещен в нестационарную произвольную среду, его быстродействие должно быть сравнимо со скоростью изменения параметров окружающего пространства. То есть получение данных с сенсоров видеокамер, радиолокаторов, сонаров и т. п. и их обработка по времени должны быть сопоставимы с инерционностью окружающей среды. Иначе говоря, мобильный робот сможет обрабатывать данные и принимать решения в режиме реального времени. Отметим, что изменение параметров окружающего пространства может быть также связано с изменением состояния самого робота например, с его движением. Это приводит к необходимости разработки методов и алгоритмов, которые могли бы быть реализованы на бортовых электронных устройствах мобильного робота, имеющих ограничения по потребляемой мощности и производительности. Такие методы позволят системе принятия решений работать в режиме реального времени с учетом определенных ограничений, например, на возможную скорость перемещения робота. При решении задачи локализации мобильных автономных систем роботов часто решается параллельная задача построения карты, т. е. геометрического представления окружающего пространства. Это связано с тем, что при движении недостаточно знать начальную и конечную точки пути, которые могли бы быть достигнуты с использованием современных систем спутниковой навигации. Во время движения на пути робота могут возникать различные стационарные и движущиеся препятствия естественного и искусственного происхождения, а также неровности поверхности, по которой происходит движение. Решение задачи картографирования локального или, с сохранением данных, глобального окружающего пространства позволит роботу выбирать возможный путь для достижения поставленной цели. В рамках данной работы примем следующие ограничения наблюдаемые объекты являются стационарными главной целью наблюдателя робота при движении является перемещение из начальной точки пространства в некоторую конечную сенсорами системы являются как минимум две цифровые камеры, не изменяющие своего взаимного расположения. Предположим, что с помощью определенного алгоритма на полученном кадре может быть выделен некоторый простейший геометрический объект примитив . С помощью алгоритма могут быть вычислены геометрические параметры расположения данного объекта в пространстве относительно робота. Тогда задача состоит в том, чтобы составить геометрическое описание объекта на базе примитивов типа, которое бы однозначно описывало геометрическое представление заданного физического объекта . Другими словами, нужно определить оператор с базисом типа и преобразованиями, . Известно, что геометрический объект в пространстве может быть описан как полиэдр, основанный на простейших симплексах данного пространства 2, с. 2134. Однако триангуляционную модель сложного объекта практически невозможно наделить свойствами инвариантности ввиду возможных необратимых изменений триангуляционной картины при изменении ракурса или условий наблюдения. Кроме того, реализация данного метода требует существенных вычислительных затрат, увеличения времени обработки, а следовательно, и реакции системы, что недопустимо для автономных мобильных систем в условиях неопределенности. Одним из путей решения проблемы и упрощения вычислительной процедуры является сокращение размерности базисного симплекса. В качестве такой единицы целесообразно выбрать отрезок. Задача выделения отрезков в кадре является более простой, чем получение точек с последующей их триангуляцией. Процедуры получения образа объекта при повороте на заданный угол и идентификации также упрощаются. Дальнейшее уменьшение размерности базисного объекта нецелесообразно, так как точка может быть описана с помощью отрезка нулевой длины. Экспериментальная проверка с использованием библиотеки OpenCV позволила получить исходные данные для построения моделей объектов с различной структурой наблюдаемых поверхностей. В этом случае применяется детектор границ Кенни Canny 3 для получения контуров объекта и преобразование Хафа Hough Transform 4 для выделения аналитически заданных примитивов рис. 1. Эти алгоритмы подробно описаны и широко применяются для решения различных прикладных задач, что обусловило их использование для предварительной оценки скорости работы и особенностей реализации разрабатываемого метода. Проверка производилась на тестовом стенде и выявила, что при обработке данных с двух камер, составляющих стереоскопическую пару, суммарное время обработки в среднем не превышало 4550 мс, а загрузка процессора не превышала 38 . В дальнейшем предполагается, что выделение границ на обрабатываемых изображениях будет производиться на основе более совершенных алгоритмов представления изображений в частотной области 5, а повышение производительности библиотеки OpenCV на базе программно-аппаратного обеспечения Intel IPP и NVIDIA CUDA. Конфигурация тестового стенда CPU Intel Core2Duo 2 ГГц RAM DDR II 2 ГБ стереопара две камеры с разрешением 640 480 24 бит и шиной USB2.0 программное обеспечение OS Debian GNULinux, ker.3.0, KDE4, Qt4, OpenCV2.1. Таким образом, наблюдаемый физический объект может быть представлен в следующем виде 1 где -й отрезок с координатами, заданными в относительной системе координат робота. Дадим точное математическое определение. Рассмотрим множество точек, которые принадлежат поверхности объекта, и глобальное -мерное пространство. Зададим отрезок с началом в точке и концом в точке как множество точек 2 Как ранее было сказано, точка может быть представлена отрезком с совпадающими концами Следовательно, образ физического объекта будет иметь вид 3 Окружающее робота пространство, как правило, включает в себя более одного объекта, поэтому необходимо рассматривать случай суммы объектов . Возможность рассмотрения каждого физического объекта индивидуально позволяет говорить о линейности оператора относительно операции объединения Таким образом, окружающее пространство может быть представлено в виде набора некоторых объединений отрезков. Учитывая относительный характер измерений координат главной системой координат является система координат оси движущегося робота, данный набор можно представить в виде древовидной структуры, где каждому листу дерева соответствует отображение конкретного физического объекта, а корнем дерева является точка, соответствующая началу координат в системе координат робота физическое расположение центра робота. С физической точки зрения объект может быть представлен одной своей точкой, которая, например, лежит на оси вращения или является центром масс объекта. Так или иначе, удобно ввести в рассмотрение точку, которая будет являться началом координат локальной системы координат объекта. Остальные точки и отрезки, описывающие объект, вычисляются уже в локальной системе координат. Получающаяся древовидная структура представлена на рис. 2. Рассмотрим случай наблюдения одного неподвижного физического объекта и построения его геометрической модели. Движение наблюдателя относительно неподвижного объекта может быть представлено двумя взаимно независимыми процессами круговым движением вокруг объекта и изменением расстояния наблюдения. С физической точки зрения движение наблюдателя робота может быть перенесено с помощью принципа относительности на сам объект. Тогда можно говорить о вращении объекта и изменении расстояния между объектом и наблюдателем. Изменение расстояния между объектом характеризует изменение масштаба образа объекта, получаемого при его наблюдении посредством камер. Иными словами, математическое описание движения сводится к условному повороту объекта на угол и масштабированию его образа с коэффициентом . Рассмотрим эти два случая отдельно. . Пусть наблюдатель производит наблюдение объекта из позиции, в результате которого строится геометрическая модель . Данная модель, как было сказано выше, описывает лишь видимую часть физического объекта, полностью базируясь на проекциях объекта на сенсорные элементы наблюдателя. Поэтому она несет лишь частичную информацию о внешней геометрии наблюдаемого объекта где симплексы, соответствующие модели . Зададим вращательное движение действие наблюдателя вокруг объекта как вращение последнего на некоторый угол . При этом наблюдатель переместится из позиции в позицию и будет производить новую процедуру наблюдения, в результате которой получим новую геометрическую модель объекта где симплексы, соответствующие модели . При этом в общем случае, а также расположение и размеры отрезков и различны. На основе набора, синтезируем две новые модели следующим образом. Так как движение задано и известна исходная модель, то при данном действии она перейдет в модель где в общем случае действие на модель сводится к действиям на составляющие ее симплексы Модель характеризует представление в позиции тех частей наблюдаемого объекта, которые были зафиксированы при нахождении наблюдателя в позиции . Так как эти части могут быть не наблюдаемы в позиции, то уточненная модель может быть получена посредством объединения Вторая синтезируемая модель получается с помощью обратного действия Данная модель характеризует представление в позиции тех частей наблюдаемого объекта, которые были зафиксированы при нахождении наблюдателя уже в новой позиции . Уточненная модель в данном случае будет следующей Очевидно, что данные модели должны быть эквивалентны при условии установки соотношения эквивалентности в соответствии с действием . Движение наблюдателя вдоль радиус-вектора на объект приведет к тому, что образ объекта, фиксируемый сенсорными элементами, будет пропорционально изменять свои размеры. Иначе говоря, будет происходить масштабирование образа объекта с коэффициентом . Данное действие может быть задано с помощью линейного оператора в матричной форме как где коэффициент масштабирования единичная матрица размера При действии структура модели наблюдаемого объекта при переходе из точки наблюдения в точку наблюдения не изменяется. Поэтому действия масштабирования в идеальном случае не влияют на уточнение модели объекта. Однако в реальности необходимо говорить о разрешающей способности сенсорных элементов, что приводит к потере данных при достижении определенного граничного случая. Рассмотрим эту ситуацию подробнее. Пусть сенсорные элементы наблюдателя обладают разрешающей способностью, заданной в виде линейного размера фиксирующего элемента . Обозначим в качестве оператор проектирования отрезка на сенсорный элемент. Тогда потеря данных будет происходить в случае значительного уменьшения длины проекции отрезка по отношению к разрешающей способности сенсорного элемента С другой стороны, потеря данных возможна также и при увеличении коэффициента приближение. При достаточно больших может произойти исчезновение отрезка из зоны видимости сенсорного элемента. Как в первом, так и во втором случае все зависит от качества сенсорных элементов наблюдателя. Таким образом, при малых перемещениях объекта движение наблюдателя может быть задано математически через преобразование при вращениях и при масштабировании. Как известно, все преобразования, сохраняют евклидову квадратичную форму и с операцией композиции образуют специальную ортогональную группу вращений . Добавление операции приведет к обобщению и переходу к ортогональной группе . Движение наблюдателя вызывает изменение в текущей модели объекта и требует решения одной из основных задач технического зрения идентификации объекта согласно заданной его проекции. Поставим задачу более строго. Пусть дан один объект наблюдения и наблюдатель находится в заранее не известной случайной точке пространства относительно объекта, при этом имея возможность произвести процедуру наблюдения. Наблюдателем ранее сформирована полная геометрическая модель некоего объекта. По результатам наблюдения необходимо определить, принадлежит ли наблюдаемая часть тому объекту, для которого сформирована модель. Для решения поставленной задачи необходимо найти такие величины, которые однозначно определяют заданный объект и являются инвариантными относительно преобразований вращения и масштабирования . Группа преобразований оставляет неизменной евклидову метрику пространства. Следовательно, при действии будут сохраняться расстояния и углы геометрического объекта. С другой стороны, действия из группы сохраняют в общем случае только углы. При заданном множестве действий будут сохраняться геометрические пропорции. Рассмотрим теперь свойства модели объекта. Модель объекта задается как множество одномерных симплексов отрезков, которые расположены друг относительно друга определенным образом 3. Следовательно, одну модель от другой отличает количество симплексов, их параметры и взаимное расположение, и два объекта можно считать равными, если они описаны моделями, состоящими из равных множеств элементов симплексов. С этой точки зрения можно говорить о структурной топологии объекта как критерии инвариантности. То есть структурная топология данного множества является основным свойством, которое позволяет идентифицировать объект по его модели и отличать от других. Основными рассматриваемыми характеристиками этой модели в данном случае являются размеры симплексов и их взаимное расположение. Преобразование масштабирования сохраняет геометрические пропорции, что приводит к необходимости рассмотрения отношений длин между различными отрезками. Преобразование вращения сохраняет углы, что дает право производить первичную идентификацию объектов именно по этим характеристикам. Согласно определению 2, одномерный симплекс задается посредством двух точек, что позволяет однозначно определить наклон прямой, проведенной через него, относительно заданной оси например, . Рассмотрим пример в двумерном пространстве. Пусть даны два отрезка и, которые заданы точками и соответственно. Тогда наклон прямой к оси будет задан коэффициентами что соответствует углам arctg, arctg . Действие приведет к изменению углов наклона каждого симплекса, но не изменит их разности Таким образом, угол между двумя симплексами инвариантен относительно поворотов и масштабирования и может быть использован для идентификации объекта по сформированной в результате наблюдения модели. При этом удобно использовать не сами углы, а их тангенсы. Тогда получим Найденные величины позволяют предложить следующий метод решения задачи идентификации объекта производится наблюдение объекта и построение проекционной модели для проекционной модели вычисляются ее структурно-топологические характеристики углы между симплексами и отношения сторон производится поиск в дереве объектов того объекта, который имеет такой же набор топологических характеристик, что и проекционная модель при нахождении заданного объекта модель вычисляется действие и действие вычисленные действия и применяются к проекционной модели производится оценка равенства в случае равенства можно утверждать, что наблюдаемый объект ранее описан и имеет геометрическую модель а наблюдатель находится в позиции относительно объекта, соответствующей вычисленным действиям и . Данный подход дает однозначное решение задачи в случае, если модель не имеет двух и более пар симплексов с эквивалентными геометрическими характеристиками углами и отношениями сторон. Множество из двух и более эквивалентных пар приведет к тому, что описанный выше метод даст множество пар действий, . Тогда возникает ситуация, когда метод позволяет подтвердить, что наблюдаемые части имеются в составе модели объекта, однако данных для идентификации наблюдаемой части из множества возможных эквивалентных частей и положения относительно объекта не достаточно. В соответствии с указанным выше алгоритмом рассчитаем необходимый объем вычислительных операций. Пусть проекционная модель содержит симплексов. Для данной модели необходимо произвести следующие вычисления длин симплексов или квадратов длин операций тангенсов углов наклона к осям системы координат в трехмерном пространстве 2 операций тангенсов углов между симплексами 1 операций. Всего получается 2 вычислительных операций. Рассмотрим случай прямого неоптимизированного поиска объекта, описываемого моделью, в дереве. Пусть дерево содержит всего симплексов. Тогда процедура поиска будет состоять из сравнения тангенсов углов между симплексами модели с тангенсами углов между симплексами, находящимися в дереве. Всего получаем операций сравнения Очевидно, что при увеличении время процедуры поиска в дереве будет возрастать квадратично при учете, что среднее количество симплексов, наблюдаемых в проекционной модели, не превышает некоторого . Поэтому целесообразно применить дифференциальный подход, использующий данные о проекционной модели, на предыдущем этапе наблюдения. Данный подход возможен при незначительных изменениях в наблюдаемых проекционных моделях, что достигается за счет повышения частоты процедур наблюдения. Пусть имеем проекционную модель, описывающую предыдущее наблюдение, и проекционную модель, которая описывает обрабатываемое наблюдение. Пусть количество симплексов модели, в модели . Можно предполагать, что сравнимо с, т. е. . Тогда приблизительное число операций сравнения составит Например, при ограничении сверху 500 получаем приблизительно 15,625 10 операций сравнения. Дополнительные симплексы, которые составляют разницу между моделями и, добавляются в итоговое дерево представления объектов. Для уменьшения количества операций сравнения можно воспользоваться свойством малых отклонений модели от модели . Тогда в случае совпадения пар симплексов двух моделей в дальнейшем они не участвуют в процедуре покомпонентного сравнения и, что значительно снижает количество операций сравнения. Так, например, если модель содержит 3 симплекса, а модель 4 симплекса и только первая процедура сравнения дала положительный итог, результирующее количество операций сравнения равно 11 вместо 33 144 14 18. Описанный выше подход носит детерминированный характер. Однако это противоречит реальной ситуации, когда движение наблюдателя и процедура наблюдения являются стохастическими. Случайность приводит к возникновению множества ошибок и потере данных, вследствие чего указанный подход не может быть применим на практике. Для устранения подобных затруднений перейдем к стохастической модели процедуры наблюдения, а также стохастической модели движения наблюдателя. При описании отдельного физического объекта была предложена множественная модель с использованием одномерных симплексов 3. Предположим, что модель является наиболее полной геометрической моделью объекта, т. е. где идеальная модель объекта рассматривается в том же базисе, что и . . Рассмотрим процедуру наблюдения. Данная процедура может быть как единичной дискретной, так и непрерывной. Случай непрерывного наблюдения будет интересовать нас с точки зрения описания динамики моделей в зависимости от динамики физических объектов. Однако изначально необходимо описать случай дискретных наблюдений стационарного объекта. При единичном наблюдении наблюдатель формирует текущую наблюдаемую модель физического объекта . Данная модель даже при идеальной процедуре наблюдения приведет к получению лишь частичной информации об объекте, так как будет являться подмножеством полной идеальной модели где эквивалентность возможна только для самых простых объектов. Тогда последовательность формирования геометрической модели наблюдаемого физического объекта может быть представлена следующим образом Остановимся на исследовании перехода . Для определения процедуры наблюдения выделим оператор, позволяющий получить максимально полную геометрическую модель физического объекта при нахождении в позиции наблюдателя. То есть и наблюдатель имеют различные ортогональные реперы, и физический объект находится на некотором неизвестном расстоянии причем Оператор Pr является идемпотентным, т. е. PrPr Pr, что позволяет говорить о нем, как об операторе проектирования. Теперь рассмотрим оператор наблюдения, позволяющий получить из идеальной модели геометрическую модель наблюдения физического объекта Случай идеального наблюдения приводит к тому, что Однако в реальной ситуации необходимо учесть следующие замечания при наблюдении элементы множества могут не войти в состав множества наблюдение переводит симплекс в другой симплекс Оба замечания обусловлены стохастической природой процедуры наблюдения. Рассмотрим первое замечание. При наблюдении ненулевые элементы из могут стать элементами множества, но могут и не попасть в него. Это обусловлено различными факторами процедуры наблюдения например, частичное размывание образа не позволяет выделить одномерные симплексы. Случай непопадания элемента во множество зададим как преобразование в нулевой элемент вырождение где ker ядро оператора наблюдения 6, c. 51. Ранее были рассмотрены действия над объектом, приводящие к изменениям геометрической модели, а именно повороты и масштабирование. Действие поворота влияет только на оператор проектирования Pr. Действие масштабирования влияет только на оператор наблюдения . Рассматривая реальную ситуацию, необходимо установить зависимость оператора наблюдения от разрешающей способности сенсорных элементов наблюдателя. Указанные зависимости оператора индуцируют такие же зависимости и на ядро ker Случайный характер процедуры наблюдения приводит к тому, что множество, также будет случайным. Пусть задан элемент Определим для него вероятность попадания в ядро оператора Тогда вероятность попадания элемента в Функции и имеют все свойства индикаторных функций функций принадлежности для множеств, и . Совместно с множеством они задают и как нечеткие множества 7. Рассмотрим теперь второе замечание о стохастичности процедуры наблюдения. Помимо того, что элемент из в соответствии с заданной вероятностью может попасть в, при наблюдении он претерпевает стохастические изменения, т. е. что приводит в общем случае к получению стохастической модели наблюдения такой, что Данная ситуация была описана выше для случая, когда наблюдатель, производя наблюдение, каждый раз получает новую геометрическую модель, которая при прямом сравнении стандартные действия над множествами даст отрицательные результаты. Рассмотрим отдельно элементы и Так как это одномерные симплексы, то можно задать симплекс невязки в виде где арифметические операции над точками производятся покоординатно. Симплекс является стохастическим, поэтому его свойства переносятся на симплекс ввиду детерминированности . Форма задания симплексов 1 позволяет говорить о стохастичности невязок Поскольку, то и . Представим отрезок как точку в пространстве . Тогда и симплекс может быть представлен в этом же пространстве случайной точкой. Введем предположение о том, что каждая координата точки, 1, 2, является случайной гауссовой величиной, описываемой плотностью распределения вероятностей где дисперсия случайной величины. Согласно работе 8, c. 380385, симплекс будет случайным вектором с многомерным гауссовым распределением вероятностей, зависящим от 2 переменных 4 где, ..., и матрица ковариаций. Будем предполагать, что 1 все случайные величины, задающие конкретные координаты невязок, являются независимыми 2 все случайные величины имеют одинаковое гауссово распределение вероятностей. Данные предположения, с одной стороны, не являются точными, так как каждая точка симплекса может описываться совершенно различными законами распределения. С другой стороны, существует возможность описания геометрической модели с необходимой точностью за счет снижения порога чувствительности алгоритма сравнения симплексов. Это достигается использованием определенных критериев подбора параметров распределения и способа его модификации. Независимость случайных величин приводит к диагональному виду матрицы ковариаций и невырожденности матрицы . Согласно 4, вероятность попадания симплекса в 2 -мерный шар радиуса Устанавливая вероятность и зная среднее отклонение, можно решать обратную задачу по определению радиуса 2 -мерного шара, в который попадет точка с указанной вероятностью. Это дает основание использовать статистическую процедуру по определению эквивалентности симплексов. Пусть для заданного симплекса определена невязка со средним отклонением . Тогда, задав вероятность, вычислим радиус шара . В случае каждого нового наблюдения симплексы, соответствующие исходному отрезку, будут попадать в этот шар с указанной вероятностью. Следовательно, при проведении следующего наблюдения эквивалентность симплексов может быть определена на основе того, попал ли измеренный симплекс в заданную зону или нет. Меняя вероятность попадания в интервал, а также итерационным способом определяя параметры распределения, можно устанавливать точность статистического описания модели. В работе предложен подход к построению специализированных геометрических моделей физических объектов произвольной формы в условиях отсутствия каких-либо начальных данных. Функциональная особенность предлагаемого метода связана с обработкой вторичных данных в виде наборов координат отрезков, выделяемых из образов окружающего пространства. Это позволяет, вопервых, избирательно подходить к методам определения границ и выделения отрезков и улучшать их например, применяя адаптивные методы для выбора параметров независимо друг от друга и от предлагаемого подхода. Во-вторых, допустимо применение сенсорных систем, основанных на различных физических принципах работы например, получение образа окружающего пространства с использованием радиолокационного или ультразвукового сканирования. Реализация алгоритма последовательного уточнения моделей объектов окружающего мира и адаптивной статистической оценки результатов в системе приводит к возможности выстраивания оперативной локальной и глобальной карт заранее не известного окружающего пространства в режиме реального времени. Дальнейшие исследования связаны с развитием и расширением представленного метода на задачи непрерывного слежения за объектами, сквозного наблюдения множества объектов при движении, снятии ограничения на стационарность объектов, а также выработки критериев для решения задач классификации и идентификации объектов. Особое внимание предполагается уделить разработке и оптимизации методов сравнения геометрических моделей и динамического изменения итоговой древовидной модели окружающего пространства. Рассматриваемый подход является основой для создания аппаратно-программного комплекса автономной мобильной роботизированной системы с использованием в качестве вычислительного устройства системы NI EVS-1464RT с возможностью дополнительного применения встроенной ПЛИС и двумя цифровыми камерами высокого разрешения Basler Scout, имеющими высокоскоростную шину передачи данных стандарта IEEE 1394b 800 Мбитс. 