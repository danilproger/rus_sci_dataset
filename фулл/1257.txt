СОВМЕЩЕНИЕ  РАСТРОВЫХ  ИЗОБРАЖЕНИЙ В  СИСТЕМАХ  ТЕХНИЧЕСКОГО  ЗРЕНИЯ 

Рассмотрены методы совмещения растровых изображений при их одновременном воспроизведении на экране дисплея. Приведены результаты экспериментов, показывающие, что наилучшее визуальное восприятие дает пиксельное совмещение. We discuss some methods of matching raster images while displaying them on the monitor screen. The experiments  results show that the best visual perception is achieved through pixel matching. 

При решении некоторых задач в системах технического зрения, виртуальной реальности и т. п. возникает необходимость совмещения нескольких растровых изображений, полученных различными способами. Например, нейрохирургу совмещение на экране дисплея изображений из атласа головного мозга с томографическими изображениями мозга пациента может помочь при операции. При проведении работ по реконструкции зданий специалистам удобно визуально определять положение скрытых объектов в стенах путем совмещения на экране переносного компьютера или специального шлема реальных изображений, полученных в видимом спектральном диапазоне, с графическими данными чертежи, схемы о расположении электрической проводки, водопроводных труб, телефонных линий или других изображений, дающих аналогичную информацию. Системы, решающие подобные задачи, принято называть системами дополненной или смешанной реальности 1. В некоторых случаях необходимо совмещать реальные изображения одной и той же сцены, получаемые с видеокамер, работающих в разных спектральных диапазонах в видимом спектре и, например, инфракрасном диапазоне. Это может потребоваться для определения положения теплых или нагретых тел, скрытых некоторым препятствием тонкой стенкой, туманом и т. п.. Для совмещения изображений, полученных с источников, расположенных в разных точках пространства, может потребоваться реперная привязка по характерным точкам. В зависимости от выбора вида преобразования совмещаемых изображений аффинное или проективное на каждом изображении необходимо найти соответствие между не менее чем тремя четырьмя реперами рис. 1, по координатам которых и вычисляются параметры преобразования для совмещения путем решения системы уравнений 2. Использование большего числа реперов позволяет компенсировать ошибки при определении их координат путем решения переопределенной системы уравнений методом наименьших квадратов. Обычно в качестве реперов используют либо специально наносимые на изображения, легко выделяемые метки, либо естественные мелкие фрагменты пересечения дорог, характерные детали зданий или инженерных сооружений и т. п.. В некоторых случаях для нахождения соответствия между реперами на разных изображениях используется сканирующая подсветка узким лучом. Из сказанного следует, что задача точного совмещения на экране дисплея изображений, полученных системой от двух источников, требует предварительной настройки системы, а также ее оперативной регулировки при существенном изменении параметров сцены. Если для получения совмещаемых изображений используется общий световой пучок, который после разделения попадает на две видеокамеры, работающие в разных спектральных диапазонах, то определение параметров совмещения изображений не требуется. В динамике совмещение изображений может быть обеспечено с помощью последовательной записи кадров или полукадров в общую память согласно схеме, приведенной на рис. 2. При воспроизведении видеопотока из таких изображений получаем картину, в которой оба изображения появляются с частотой в два раза меньше исходной, т. е. при частоте воспроизведения 24 кадра в секунду каждое изображение появляется с частотой 12 кадров в секунду. Эксперименты показывают, что возникающая при этом на экране дисплея иллюзия мигания создает дискомфорт оператору. Увеличение частоты показа позволяет снизить отрицательное воздействие на оператора до приемлемого уровня, но требует повышения быстродействия системы и увеличения объема хранимой информации. Еще одна проблема, возникающая при реализации совмещения изображений по приведенной на рис. 2 схеме, состоит в том, что при остановке видеопотока на экране дисплея или при необходимости распечатать совмещенное изображение на бумаге будет присутствовать либо первое, либо второе изображение, а совмещения, даже фиктивного, не будет. На наш взгляд, для преодоления этой проблемы можно предложить несколько разных подходов. одного изображения в другое целесообразно применять в том случае, когда на одном из изображений, например на изображении, полученном в инфракрасном диапазоне, находятся небольшие, легко выделяемые фрагменты, а остальная часть изображения обнуляется. Полученное изображение попиксельно складывается с изображением от другого источника. Например, на инфракрасном изображении стены линии скрытой электропроводки легко выделяются пороговой бинаризацией, и полученное изображение можно попиксельно сложить с изображением стены, полученным в видимом спектральном диапазоне. Недостаток такого подхода заключается в том, что на полученном в результате совмещения изображении фрагменты разных изображений частично или полностью замещают друг друга рис. 3, что ухудшает визуальное восприятие видеопотока оператором при значительных размерах фрагментов. В результирующее изображение получается путем попеременной записи строк одного и другого изображения, например записи строк первого изображения в четных строках и второго изображения в нечетных. Аналогично можно использовать последовательную запись столбцов. Основным недостатком данного подхода является известная из физиологии зрения способность человека хорошо выделять вертикальные и горизонтальные линии из повторяющихся наборов пикселей 3. В результате восприятие совмещенного изображения ухудшается, поскольку внимание оператора отвлекается на фиктивные линии. В в каждой строке результирующего изображения последовательно смешиваются пиксели первого и второго изображений в шахматном порядке согласно схеме, показанной на рис. 4. Обозначим через пиксель изображения А, находящийся в строке с номером и столбце с номером соответствующий пиксель изображения В, а пиксель результирующего изображения P. Тогда результирующее изображение P формируется следующим образом В таблице приведена нумерация пикселей для начальной части изображения P. На рис. 5 показаны результаты экспериментов по построчному и пиксельному совмещению изображений, из которых видно, что наилучшее визуальное восприятие дает пиксельное совмещение. Отсутствие вертикальных и горизонтальных линий из повторяющихся наборов пикселей, хорошо выделяемых зрением человека, делает пиксельное совмещение изображений наиболее комфортным при воспроизведении на дисплее и позволяет получать качественную бумажную копию при печати. Кроме того, многочисленные эксперименты показали, что для лучшего выделения изображений при описанном методе совмещения целесообразно принять меры для их дополнительного яркостного или цветового разделения. Например, в случае монохромных изображений сделать первое изображение темно-серым, второе светлосерым. При необходимости совмещения цветных изображений следует смещать палитру для одного изображения в сторону синего, для второго в сторону красного цвета. Это позволит на одном изображении наблюдать более четкие картины, снятые в разных спектральных диапазонах. 