АЛГОРИТМЫ И ПРОГРАММНЫЕ СРЕДСТВА ТЕСТИРОВАНИЯ  БОРТОВЫХ ЦИФРОВЫХ ВЫЧИСЛИТЕЛЬНЫХ СИСТЕМ  ИНТЕГРИРОВАННОЙ МОДУЛЬНОЙ АВИОНИКИ 

Постановка проблемы:  проектирование изделий вычислительной техники в классе структур интегрированной модульной авионики, предназначенных для эксплуатации в авиационной промышленности, сопряжено с необходимостью  разрабатывать специализированные алгоритмы и программные средства контроля технического состояния аппаратуры. Алгоритмы контроля гарантируют заданную полноту и достоверность проверки при проведении этапов тестирования мультипроцессоров и их компонентов на заводе-изготовителе и в эксплуатации. Целью исследования является  разработка алгоритмов и программных средств тестирования бортовых цифровых вычислительных систем интегрированной модульной авионики.  Методы:  контроль состояния аппаратуры осуществляется в составе автоматизированного  рабочего места (на заводе-изготовителе) и автономно (в эксплуатации). Алгоритмы контроля предусматривают проверку физической исправности компонентов авионики и проверку логических связей компонентов (протоколов обмена),  задействованных в вычислительных процессах.  Результаты:  получены алгоритмы тестирования мультивычислителя  и его компонентов, предназначенные для проверки изделий автономно и в составе автоматизированного рабочего  места. Основу алгоритмов образуют процедуры проверки исправности ячеек памяти модулей авионики и целостности  внутриблочных линий передачи информации. Для алгоритмов тестирования, используемых в составе рабочего места, задействована схема петлевого контроля каналов обмена. Отличительная особенность алгоритмов автономного  тестирования мультивычислителя основана на процедуре многократной параллельной проверки модулей авионики,  в которой каждый модуль инициирует проверку и осуществляет контроль всех других модулей изделия с принятием  решения об исправности изделия после получения результатов контроля, выполненных по схеме «точка-точка». Программная реализация алгоритмов тестирования выполнена по модульному принципу с разделением компонентов на  загружаемые в изделие, динамически загружаемые в модули авионики и выполняемые на инструментальной ЭВМ автоматизированного рабочего места.  Практическая значимость:  результаты работы получены при выполнении научноисследовательской и опытно-конструкторской работы по созданию перспективных образцов вычислительной техники  в классе аппаратуры интегрированной модульной авионики. Результаты работы доведены до промышленного образца,  находящегося в настоящее время на этапе испытаний. Ключевые слова  — интегрированная модульная авионика, тестирование. 

Современные подходы к проектированию перспективных бортовых цифровых вычислительных систем БЦВС и их компонентов неразрывно связаны с внедрением и исследованием проектных решений в рамках существующей концепции интегрированной модульной авионики ИМА 17. Одним из этапов проектирования БЦВС является этап разработки средств контроля БЦВС. В настоящее время не существует общепринятой методики построения технических средств контроля БЦВС класса ИМА, отдельными исследователями и разработчиками предлагаются модели для построения математического обеспечения автоматизированных рабочих мест АРМ 819 для отработки многомодульных компонентов авионики, функционирующих в многозадачном режиме. Бортовая цифровая вычислительная система класса ИМА представляет собой интегрированную вычислительную платформу, в состав которой входят рис. 1 2, 4, 15 аппаратные средства быстросменные конструктивно-функциональные модули КФМ модули вычислительные, модули ввода-вывода, модули массовой памяти, модули напряжений, модули графические, устанавливаемые в типовую несущую конструкцию крейт программные средства функциональное программное обеспечение ФПО, операционная система, поддерживающие программные средства, управляющие ресурсами БЦВС в целях создания реконфигурируемой вычислительной среды. В состав средств контроля БЦВС и ее компонентов входят инструментальная ЭВМ персональный или промышленный компьютер специализированное программное обеспечение программные модули проверки ОЗУ, ПЗУ, проверки каналов ввода-вывода, проверки центрального процессора CPU Central Processor Unit, программные модули поддержки бортовых интерфейсов ARINC-429, ARINC-818, MIL-1553, SpaceWire специализированное аппаратное обеспечение интерфейсные платы сопряжения инструментальной ЭВМ через порты PCIUSB и изделия через интерфейсы ARINC-429, ARINC-818, MIL-1553, SpaceWire, а также соединительные кабели связи и источники питания. В совокупности они представляют собой АРМ по проверке БЦВС. АРМ разрабатывается на основании технического задания в рамках действующей нормативно-технической документации и также включает специальное измерительное и испытательное оборудование, методики испытаний БЦВС и ее компонентов модулей. Для проверки КФМ, входящих в состав БЦВС, разрабатываются самостоятельные АРМ 913. Для проверки функционирования БЦВС проводится тестовый контроль аппаратуры. При эксплуатации контроль осуществляется средствами встроенного контроля. Каждый модуль БЦВС имеет встроенные средства контроля. Встроенный контроль входит в состав базового программного обеспечения ПО каждого модуля. Для полной диагностики БЦВС используется специализированное ПО, которое обрабатывает сигналы состояния исправности отдельных модулей и формирует интегральный сигнал исправности БЦВС. Определение технического состояния БЦВС при эксплуатации осуществляется средствами встроенного контроля аппаратными и программно-логическими. Программно-логическими средствами контроля проводятся тесты начального включения каждого входящего в БЦВС модуля фонового контроля модуля во время загрузки ПО встроенного контроля каждого входящего в БЦВС модуля. Проверка БЦВС при эксплуатации осуществляется по алгоритму рис. 2, с последующей интеграцией информации об исправности всех модулей и исправности межмодульных связей в каждом узле для формирования интегральной исправности БЦВС в целом. Тестирование БЦВС при изготовлении производится по алгоритму рис. 2, . Узел формирования интегральной исправности расположен в модуле массовой памяти 15. Тест начального включения каждого модуля производит проверку исправности цифровой части модуля, а именно ОЗУ, ПЗУ, процессорного элемента, ОЗУ устройств ввода-вывода для модулей ввода-вывода и внутримодульных каналов SpaceWire связи для вычислительных модулей. Используется однозадачный режим для выполнения программы тестирования. Тест фонового контроля модуля во время загрузки ПО производит проверку исправности доступных для контроля ячеек ОЗУ, ПЗУ процессорного элемента ОЗУ устройств ввода-вывода для модулей ввода-вывода контрольных каналов устройств ввода-вывода для модулей вводавывода и внутримодульных каналов SpaceWire связи для вычислительных модулей. В данном режиме выполняется тестовая программа на фоне выполнения программы загрузки в многозадачном режиме функционирования БЦВС. Тест встроенного контроля модуля производит проверку исправности доступных для контроля ячеек памяти ОЗУ, процессорного элемента, доступных для проверки ячеек ОЗУ устройств ввода-вывода для интерфейсных модулей. Результат исправности передается по внутримодульным каналам SpaceWire для вычислительных модулей. В данном режиме выполняется тестовая программа на фоне выполнения функциональной программы под управлением операционной системы в режиме разделения времени. Программное обеспечение проводит контроль межмодульных связей БЦВС и формирует интегральный сигнал исправности изделия на основе сигналов исправности всех модулей, полученных в результате выполнения тестов встроенного контроля модулей. Программа проверки БЦВС выполняется на фоне выполнения функциональной программы под управлением операционной системы в режиме разделения времени. Для наглядности рассматривается упрощенное схемотехническое решение по организации внутренней структуры БЦВС, подробно описанное в работах 3, 4, 12. Структура БЦВС основана на комбинационной схеме сетевых топологий полносвязная сеть и двойная звезда 8, 16, 17 БЦВС разделена на две идентичные подсистемы, каждая из которых состоит из и четырех функциональных модулей рис. 3, . В качестве любого ФМ могут выступать МВ, МВВ, МГ. Внешний вид БЦВС класса ИМА показан на рис. 3, . Каждый КФМ имеет коммутацию с остальными модулями БЦВС по отдельной внутренней линии связи SpaceWire, что позволяет отказаться от проведения внутреннего контроля каждого модуля и организовать инициирование внешнего функционального контроля. Внешний функциональный контроль повышает уровень полноты контроля за счет использования различных участков памяти, каналов ввода-вывода, внутрисистемного сетевого интерфейса. При этом для организации внешнего контроля схема проверки, состоящая из одного модуля, тестирующего соседний модуль, оказывается недостаточной 17. Необходимо, чтобы каждый ФМ проходил три фазы проверки от разных модулей одной подсистемы БЦВС. Затем результат тестирования определяется по схеме мажорирования результатов тестирования КФМ во всех трех фазах проверки. Таким образом, каждый КФМ инициирует тестирование по определенному параметру для трех других модулей одной подсистемы БЦВС. Причем все три фазы тестирования основаны на выполнении функциональной задачи, исполняемой в полете этим КФМ. Три ФМ передают проверяемому КФМ разные данные. Модуль эти данные обрабатывает, получает результат для каждого из предъявленных контрольных тестов и передает результат обратно тому модулю, который инициировал тест. Алгоритм прохождения контроля одним ФМ представляет собой реализацию следующих процедур 14. 1. Первый сторонний ФМ например, ФМ инициирует функциональный тест для проверяемого модуля ФМ . ФМ выполняет данный тест, формирует результат тестирования и передает его ФМ . 2. ФМ инициирует функциональный тест для ФМ . ФМ выполняет тест и передает результат тестирования в ФМ . ФМ сравнивает полученный ФМ результат с эталонным результатом, содержащимся в памяти ФМ . Затем ФМ передает модулю-арбитру ММП результат прохождения ФМ тестового контроля если эталонный результат совпадает с результатом, полученным от ФМ, значит ФМ исправен и может продолжать выполнять бортовую задачу, если не совпадает ФМ неисправен. 3. Следующий сторонний ФМ например, ФМ инициирует функциональный тест для ФМ . ФМ выполняет тест, формирует результат проверки и передает его ФМ . 4. ФМ инициирует функциональный тест для ФМ, получает от него результат проверки, сравнивает его с эталонным значением и передает модулю-арбитру результат прохождения теста для ФМ исправен или неисправен ФМ . 5. Следующий сторонний ФМ в данном случае ФМ инициирует функциональный тест для ФМ . ФМ выполняет данный тест, формирует результат и передает его ФМ . 6. ФМ инициирует функциональный тест для ФМ, получает от него результат проверки, сравнивает его с эталонным значением и передает модулю-арбитру ММП результат прохождения ФМ теста исправен или неисправен ФМ . Параллельно с этим при получении сторонними модулями, которые инициировали тест для ФМ, т. е. ФМ, ФМ и ФМ, результатов от ФМ эти модули сравнивают полученный результат с эталонным, который находится в их ячейках памяти, и направляют результат исправен или неисправен ФМ модулю-арбитру ММП. Все модули проходят тестирование аналогичным образом, в том числе и модуль-арбитр ММП. Роль арбитра при тестировании ММП может выполнять любой ФМ. Таким образом, все ФМ в одной подсистеме БЦВС проходят по три фазы тестирования, инициированные разными сторонними модулями одной подсистемы, и сами инициируют тестирование трех других ФМ. После того как модуль-арбитр ММП получает все результаты прохождения всеми ФМ тестов, ММП анализирует эти результаты и либо формирует интегральный сигнал исправности БЦВС, либо при обнаружении неисправного модуля запускает процедуру реконфигурации всей вычислительной системы с исключением из обмена данными неисправного модуля в коммутируемой внутрисистемной сети SpaceWire. Алгоритм анализа модулем-арбитром результатов выполнения тестов для одного ФМ представлен на рис. 4. Арбитр анализирует данные тестов от трех модулей, инициирующих тест для одного ФМ, и если от двух из них была получена информация о несовпадении контрольных значений выполнения тестов, модуль считается неисправным. Результаты тестирования для остальных функциональных модулей анализируются по аналогичной схеме. Структура программной реализации средств контроля исправности БЦВС класса ИМА показана на рис. 5, и . В состав ПО средств контроля исправности БЦВС класса ИМА входят следующие программные компоненты ПК и ПМ. 1. Программный компонент управления режимами обеспечивает первичную инициализацию установку регистров микропроцессора и управляющих регистров программируемых логических схем КФМ проверку работоспособности КФМ по начальному включению после первичной подачи питания, после рестарта БЦВС из-за кратковременного перерыва питания на объекте или из-за возникшей в процессе работы ошибки анализ режима работы БЦВС в составе объекта, при проверке на заводе-изготовителе в составе рабочего места анализ режима работы тестового ПО тест наземного контроля ТНК, тест встроенного контроля ТВК, тест фонового контроля. 2. Программный компонент сервисного обслуживания обеспечивает обмен данными по технологическим интерфейсам БЦВС с внешними устройствами инструментальной ЭВМ, платами-имитаторами управляющих сигналов и т. д. в режиме Монитор, доступ к внутренним вычислительным ресурсам КФМ, загрузку и отладку тестового и функционального ПО. 3. Программный компонент автономного контроля обеспечивает процесс автоматизированного автономного контроля КФМ при наличии управляющего сигнала извне на внешнем соединителе. Контроль исправности КФМ осуществляется без участия операционной системы и ФПО. В случае положительного результата проверки в фиксированных ячейках ОЗУ формируется информация, подтверждающая исправность КФМ, в случае отрицательного результата информация об обнаруженных неисправностях. Компонент ПК-АК может выполняться из системного ПЗУ КФМ или может быть загружаемым извне и выполняться из ОЗУ КФМ. 4. Программный компонент исправности обеспечивает анализ состояния работоспособности КФМ, входящих в БЦВС, путем их опроса по межмодульному внутреннему интерфейсу SpaceWire и формирование интегральной исправности БЦВС в режиме автономного контроля. 5. Библиотека программных компонентов штатного контроля обеспечивает проверку работоспособности КФМ в штатном режиме работы БЦВС. Каждый программный компонент в составе БПК-ШК представляет собой законченную программно реализуемую процедуру проверки, обеспечивающую контроль исправности функционального узла КФМ и работающую под управлением операционной системы или ФПО. Формирование интегральной исправности БЦВС осуществляется отдельной программной процедурой, также входящей в состав БПК-ШК. 6. Программный компонент тестов наземного контроля обеспечивает проверку БЦВС на заводе-изготовителе. Компонент входит в состав ПО АРМ инструментальной ЭВМ по проверке и настройке БЦВС и загружается в ОЗУ КФМ на время проверки в составе АРМ. 7. Программный компонент обслуживания запроса обеспечивает обслуживание запроса о состоянии исправности КФМ по межмодульному внутрисистемному интерфейсу SpaceWire. 8. Программный компонент загрузки обеспечивает загрузку ФПО из МПП в оперативную память всех КФМ и его идентификацию по контрольным признакам контрольные суммы данных и программ, принадлежность ПК и ПМ к конкретному виду КФМ и др.. При изготовлении БЦВС на заводе-изготовителе необходимо проверить состояние аппаратуры вычислительной системы на функционирование. Для этого используется ПО АРМ по проверке БЦВС. Техническое состояние БЦВС на АРМ проверки определяется средствами встроенного контроля аппаратными, тестовыми и средствами наземного контроля тестовыми. Структура тестового контроля БЦВС на АРМ проверки БЦВС представлена на рис. 2, и состоит из теста начального включения каждого входящего в БЦВС модуля теста фонового контроля каждого модуля во время загрузки ПО теста наземного контроля каждого входящего в БЦВС модуля программы контроля БЦВС, работающей на инструментальной ЭВМ. Процедуры выполнения тестов начального включения модуля и фонового контроля модуля при проверке БЦВС в составе АРМ те же, что и при проверке БЦВС в режиме автономного тестирования. Тест наземного контроля каждого модуля производит проверку исправности ячеек памяти ОЗУ, ПЗУ, процессорного элемента, ячеек памяти ОЗУ устройств ввода-вывода для модулей вводавывода, каналов обмена устройств ввода-вывода. Результаты исправности передаются по внутримодульным каналам обмена SpaceWire. В данном режиме формируется сигнал исправности каждого модуля и таблица исправности каналов связи для последующей передачи результата проверки в основную программу контроля БЦВС. Программа контроля БЦВС заносит тесты наземного контроля БЦВС в модули, проводит контроль внутрисистемных связей БЦВС и контроль внешних каналов обмена SpaceWire. Программа контроля БЦВС обрабатывает сигналы исправности модулей и формирует интегральную исправность БЦВС в целом. Функциональная схема АРМ по проверке БЦВС представлена на рис. 6, . АРМ обеспечивает 18, 19 имитацию процессов ввода-вывода информации по каналам информационного обмена SpaceWire, по последовательным каналам вывода и последовательным каналам приема ARINC-429, по каналам дискретного вывода и дискретного приема, по мультиплексным каналам информационного обмена по MIL1553 контроль и изменения выдаваемой информации загрузку ПО, тестирование и документирование результатов. Общий вид АРМ проверки БЦВС и сама проверяемая БЦВС показаны на рис. 6, . В состав АРМ проверки БЦВС входят 18, 19 рабочее место проверки с возможностью имитации информационного обмена по каналу SpaceWire комплект соединительных жгутов в том числе перемычки заземления комплект источников питания комплект эксплуатационной документации и методики проверки. Рабочее место проверки имеет следующий состав персональный компьютер инструментальная ЭВМ на базе архитектуры х86, возможности которого обеспечивают установку инструментальных средств проверки, со свободным слотом шины PCI технологический модуль интерфейсный интерфейсный модуль поддержки каналов обмена SpaceWire, используется для сопряжения персонального компьютера и БЦВС класса ИМА принтер для печати документации и документирования результатов тестирования БЦВС тестовое ПО в составе лицензионной версии операционной системы Windows, под которой возможно выполнение специализированных программ проверки, и инструментальная программа загрузки и проверки БЦВС. Инструментальная программа проверки БЦВС обеспечивает занесение в БЦВС тестового ПО по технологическому каналу SpaceWire и обмен информацией по рабочим каналам SpaceWire с модулями БЦВС в режиме проверки. Инструментальная программа проверки имеет опции Загрузка и поллинг и Таблица конфигурации и представляет собой САПР, предназначенную для контроля БЦВС. В рабочем окне программы проверки в опции Таблица конфигурации исследователь задает набор модулей, входящих в тестируемую БЦВС, с указанием их названия и порядка расположения в БЦВС. Заданная пользователем таблица конфигурации сохраняется в конфигурационном загрузочном текстовом файле, по которому на этапе занесения тестового ПО формируется набор тестов для каждого выбранного модуля. Набор тестов включает следующие программные модули см. рис. 1 ПМ Тест ОЗУ, ПМ Тест ПЗУ, ПМ Тест каналов обмена, ПМ Тест CPU. Опция Загрузка и поллинг обеспечивает занесение файлов теста наземного контроля для модулей БЦВС, указанных в файле конфигурации, по технологическому интерфейсу SpaceWire и запускает их на выполнение. Программа проверки начинает проведение процедуры циклического тестирования всех КФМ, запрашивая при этом статус исправности модулей в составе БЦВС и информацию о результатах прохождения теста каждого программного модуля. Взаимодействие БЦВС и программы контроля БЦВС, работающей на инструментальной ЭВМ, осуществляется через коммутаторы вычислительных модулей по сетевому интерфейсу SpaceWire с использованием системы логической адресации КФМ. Информация о результатах выполнения всех этапов проверки загрузки и тестирования отображается на экране инструментальной ЭВМ и в файлах отчета для каждого КФМ. Внешний вид рабочих окон программы САПР по проверке БЦВС представлен на рис. 7, . Изменения в принципах аппаратной и программной реализации изделий авионики, введенные в стандартах группы ARINC 651ARINC 655, в значительной мере повлияли на принципы построения АРМ по проверке аппаратуры и на организацию процессов тестирования бортовых систем в целом. Специфическими требованиями, присущими рабочим местам по проверке интегрированной авионики, являются повышенный уровень контроля аппаратурной составляющей изделий возможность имитации состояния отказа отдельных компонентов авионики для проверки режима реконфигурирования вычислительной системы модульное построение ПО с разделением тестов проверки на компоненты, исполняемые на уровне каждого КФМ и вычислителя в целом в однозадачном и многозадачном режимах открытость архитектуры рабочего места, обеспечивающая возможность изменения уровня сложности контроля изделия и контроль изделий одного класса сложности внутрипроектная унификация как аппаратных средств, так и ПО АРМ проверки. 