ПРОГРАММНАЯ ПАРАМЕТРИЧЕСКАЯ МОДЕЛЬ  БЕЗРЕЗЬБОВЫХ ОТВЕРСТИЙ 

Проводится анализ процесса формирования отверстий на чертежах в соответствии со стандартами. Выделяются типы и виды их представления. Рассматривается программная параметрическая модель формирования  изображений безрезьбовых отверстий на чертеже в соответствии с предложенным алгоритмом ее работы. Реализация модели выполнена на языке AutoLisp и подключается к системе AutoCAD. Ключевые слова  — параметрическая модель, отверстия, стандарты изображения, типы и виды отверстий,  резьба, алгоритм. 

Вопросам создания параметрических моделей графических объектов при проектировании САПР всегда уделялось достаточно большое внимание. Это обусловлено тем, что их применение позволяет существенно сократить время выполнения конструкторских документов за счет высокой автоматизации формирования элементов создаваемых конструкций. Интерес к подобным моделям особенно возрос в связи с появлением интерактивных САПР. При этом создание параметрических моделей графических изображений шло по двум основным направлениям интерактивном и программном. В случае использования интерактивного подхода параметрическая модель создается специализированными средствами автоматизированной системы непосредственно в процессе формирования конструктором изображения параллельная параметризация. Обычно такие средства предусматриваются в системах трехмерного проектирования и служат для построения моделей тел произвольной конфигурации трехмерных или двухмерных. Второй подход, программный, является развитием библиотек графических образов часто используемых стандартных конструкторских и схемотехнических элементов. Программная параметрическая модель представляет собой программу, написанную на языке высокого уровня. С ее помощью на основе минимального количества независимых параметров, задаваемых пользователем, и постоянных коэффициентов, определяемых государственными стандартами, может быть сформировано достаточно сложное графическое изображение. Параметры всех графических примитивов, составляющих формируемое изображение, функционально зависят от ограниченного числа задаваемых параметров и коэффициентов и определяются программой программной параметрической моделью. При этом построенное 2D-изображение само по себе не является параметрической моделью, а представляет результат работы программной параметрической модели. Это изображение в файле описания чертежа записывается, как правило, в виде графического макроса, который при необходимости может быть удален из описания чертежа и создан заново путем повторного вызова конструктором программной модели и задания для нее нового набора параметров. Подобный подход применяется для формирования программных параметрических моделей таких деталей, как болты, гайки, шайбы, прокладки, пружины и т. п., используемых в сборочных конструкциях. Кроме того, программные параметрические модели разрабатываются для создания элементов оформления чертежей деталей различных размерных и технологических обозначений, а также условных графических образов, являющихся основой построения схем всевозможного типа электронных, электрических, гидравлических, печатных плат и др.. Создание программных параметрических моделей относительно не очень сложный процесс с точки зрения написания соответствующего программного продукта, но требует тщательной и глубокой алгоритмической подготовки и обоснования всех постоянных коэффициентов, вводимых программистом. Это обусловлено тем, что модель должна учитывать все требования существующих стандартов и все возможные особенности и варианты формируемых с ее помощью графических элементов конструкций или схем. К сожалению, несмотря на то, что программный подход к созданию параметрических моделей известен уже свыше 20 лет, в реальных системах конструкторского и схемотехнического проектирования он до сих пор не реализован на должном уровне автоматизации. Даже в самых применяемых конструкторских системах Компас, AutoCAD, ProEngineer, Unigraphics, Solid Works относительно полно реализовано только формирование наиболее широко используемых размерных обозначений и средств, обеспечивающих штриховку областей. Хуже обстоит дело с формированием допусков формы и расположением поверхности. Для них реализованы модели отдельных составляющих этих обозначений рамок, стрелок и баз, с помощью которых можно последовательно сформировать полное обозначение. В современных САПР отсутствуют параметрические модели автоматического формирования отверстий различного типа и вида, обозначений швов сварных соединений, типов резьбы, неразъемных соединений, шероховатости поверхности, видов обработки деталей и т. д. Естественно, что системы предоставляют возможность сформировать все эти обозначения средствами графического редактора на основе использования отдельных графических примитивов. Однако в этом случае время, затрачиваемое на формирование каждого обозначения, возрастает в десятки раз, увеличивая трудовые и финансовые затраты на подготовку комплектов конструкторской документации и процесс проектирования в целом. Один из самых распространенных элементов различных чертежей отверстие. Каждое отверстие может быть изображено как в единственном, так и в нескольких вариантах. В существующих САПР, используемых для конструирования, для того чтобы сформировать изображения всех отверстий базовыми средствами, необходимо затратить много времени. Это рутинная и трудоемкая работа, которая требует от конструктора значительных усилий. В соответствии с действующими стандартами отверстия могут быть представлены в полном 1 или упрощенном 2 виде. Упрощенное нанесение отверстий и их размерных обозначений на чертежах всех отраслей промышленности и строительства допускается в случаях, когда диаметр отверстия с учетом масштаба чертежа составляет 2 мм и менее отсутствует изображение отверстия в разрезе сечении вдоль оси нанесение размеров отверстий по общим правилам усложняет чтение чертежа. Анализ различных типов отверстий позволил разделить их на две группы без резьбы и с резьбой на всю длину отверстия или только на часть ее. При этом в каждую группу входит несколько типов отверстий сквозные и глухие, которые подразделяются на простые, с зенковкой и ступенчатые. Типы и виды всевозможных отверстий без резьбы показаны в таблице. В свою очередь, на чертеже каждый тип отверстия может быть представлен в разных видах сверху, снизу в плане и сбоку. При этом каждый вид может быть изображен в полном или упрощенном варианте см. таблицу. При прорисовке полного вида необходимо на изображении отверстия проставить все размерные обозначения, определяющие его параметры. При формировании отверстия в упрощенном виде от его центра или осевой линии должна быть проведена выноска, на полке которой указывается обобщенное размерное обозначение, соответствующее типу данного отверстия. При создании параметрических моделей все отверстия без резьбы были разделены на две группы сквозные и глухие. Для каждой из этих групп сформирована отдельная параметрическая модель. Программная параметрическая модель сквозных отверстий обеспечивает их интерактивное формирование конструктором в соответствии с алгоритмом, представленным на рис. 1. На первом этапе работы модели осуществляется вывод графического меню выбора отверстий соответствующего типа рис. 2. Выбор требуемого типа отверстия с помощью мыши приводит к выводу следующего второго графического меню, позволяющего пользователю определиться с одним из возможных пяти видов изображения в соответствии со столбцами таблицы выбранного типа отверстия. В результате этих действий на экране дисплея появляется меню задания параметров отверстия рис. 3. В зависимости от выбранного типа отверстия в этой панели будут доступны только те поля, размерные значения которых соответствуют выбранному типу отверстия. При этом для удобства пользователя недоступные поля выводятся в окне задания с пониженной яркостью. После задания всех параметров, определяющих выбранный тип отверстия, осуществляется переход в режим чертежа. При этом в зависимости от того, какой из видов отверстия предполагается выводить на чертеже сбоку или сверху, на следующем этапе программная параметрическая модель запрашивает координаты точек привязки отверстия на чертеже и направление его прорисовки или только одну точку, отвечающую положению центра отверстия на плоскости. Эти точки в соответствии с возможностью системы AutoCAD могут быть введены конструктором либо в командной строке с помощью клавиатуры, либо путем фиксации положения курсора мыши. Далее, в соответствии с введенными пользователем параметрами и выбранным видом отверстия полного или упрощенного, программная модель обеспечивает автоматическую прорисовку соответствующего представления. То есть автоматически рисуется либо отверстие в плане с вырывом и всеми размерными обозначениями в местах, определяемых константами, которые задаются в программе по умолчанию, либо формируется полочка и на ней выводится обобщенное размерное обозначение с прорисовкой упрощенного вида отверстия. В последнем случае вначале запрашиваются параметры полочки координаты точки начала и направление полочки влево или вправо от точки начала, а затем автоматически формируется упрощенное изображение. При необходимости начертить не одно, а несколько одинаковых отверстий, после создания первого из них у конструктора в цикле запрашивается место положения очередного отверстия, и на чертеж выводится его упрощенное представление без обобщенного размерного обозначения. Если конструктору необходимо прорисовать на чертеже отверстие другого типа или с другими параметрами, программная модель обеспечивает переход по алгоритму на его начало см. рис. 1. Иначе осуществляется выход из программы. Параметрическая модель для формирования глухих отверстий аналогична модели для сквозных отверстий за исключением того, что в меню параметров введен дополнительный параметр глубины. Принципиально эти две модели могут быть объединены в одну, но чтобы не перегружать графическое меню типов отверстий, это не сделано. Особенностью предлагаемой модели является также возможность более оперативно редактировать созданные изображения отверстий. Для этого не требуется предварительно удалять макрос. При его выборе с помощью курсора мыши программная параметрическая модель автоматически определяет его параметры и выводит окно, подобное окну, представленному на рис. 3. В случае изменения конструктором каких-либо значений в этом окне старое изображение отверстия старый макрос удаляется автоматически, а на его месте формируется модифицированное изображение, соответствующее новым введенным параметрам новый макрос. Программные параметрические модели написаны на языке AutoLisp 3 и встроены в систему AutoCAD путем подключения к ней пользовательской панели меню, в которой можно выбрать формирование либо сквозных, либо глухих отверстий. Их использование существенно облегчает работу конструкторов и позволяет ускорить создание изображений отверстий на чертежах в несколько раз по сравнению с ручной прорисовкой. Выигрыш во времени особенно сказывается при создании полных изображений отверстий, так как этот процесс максимально автоматизирован. Так, область зоны вырыва для показа отверстия в плане определяется и штрихуется автоматически на основе учета его параметров диаметра и глубины и особенностей детали в указанном месте. 