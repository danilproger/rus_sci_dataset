МОДЕЛЬ БАЛАНСИРОВКИ НАГРУЗКИ  В ВЫЧИСЛИТЕЛЬНОМ КЛАСТЕРЕ   ЦЕНТРА ОБРАБОТКИ ДАННЫХ 

Предлагается модель сервиса балансировки нагрузки, который реализуется на центральном узле вычислительного кластера центра обработки данных. Сервис позволяет регулировать поступающую нагрузку таким образом, чтобы в кластере не возникал дисбаланс в загруженности узлов кластера и таким образом не сказывалось влияние на характеристики производительности центра обработки данных. Ключевые слова  — вычислительный кластер, центр обработки данных, запрос пользователя, регулятор нагрузки, модель балансировки нагрузки в кластере, общий информационный ресурс. 

Современной тенденцией развития телекоммуникаций помимо концепции сетей следующего поколения и мультисервисных сетей связи является отделение услуг от сетевого оборудования. Типичным примером является сеть Интернет, где пользователей интересует не услуга связи как таковая, а доступ к информации или определенному сервису 1. Одним из растущих сегментов рынка телекоммуникаций становится предоставление услуг хостинга. Под хостингом понимается размещение интернет-приложений на серверах в центрах обработки данных ЦОД. Поставщиков таких услуг называют сервис-провайдерами. Для построения и эксплуатации ЦОД требуются значительные вложения и квалифицированный персонал, решение вопросов, связанных с эффективностью функционирования и безопасностью системы. Благодаря наличию доступных глобальных коммуникаций эту услугу можно приобрести без затрат на разработку собственной информационной инфраструктуры. Поэтому большинство компаний делают выбор в пользу ИТ-аутсорсинга, т. е. передают интернет-приложения в поддержку сервис-провайдерам или берут их в аренду. Такой вид аутсорсинга означает, что центр обработки данных располагается у поставщика услуги, а потребитель приобретает в единоличное пользование информационное пространство, к которому получает полностью прозрачный доступ 2. Вычислительные мощности ЦОД реализуются в виде кластеров с балансировкой нагрузки. Сервис балансировки нагрузки предназначен для последовательного выполнения следующих задач приема запросов от клиентов выбора сервера в кластере, который будет обрабатывать запрос клиента перенаправления запроса на выбранный сервер приема ответа от сервера на клиентский запрос перенаправления ответа сервера на запрос клиенту. просы ведут себя статистически одинаково, причем каждый из них требует некоторого числа операций от ресурса, кластер серверов и систем хранения данных, обслуживающих пользователей. Представим модель кластера ЦОД как систему массового обслуживания СМО. Исследуем данную систему с точки зрения пользователя рис. 2. Пусть имеется замкнутая сеть с общим числом пользователей, каждый из которых генерирует исходящий от него запрос с интенсивностью требований в секунду всякий раз, когда требование находится у пользователя, т. е. все требования характеризуются средним временем размышления 1 секунд, которое получается из произвольного закона распределения. Каждое, таким образом, генерируемое требование поступает в ЦОД и перемещается от ресурса к ресурсу в соответствии с переходными вероятностями и возвращается на терминал пользователя. В этот момент рассматриваемый пользователь переходит к генерированию нового требования. Обозначим через среднее время прохождения через кластер ЦОД и через 1 среднее время пребывания у пользователя. Таким образом, среднее время цикла равно 1, а средняя пропускная способность системы составляет 1 требований в секунду. Аналогично пусть среднее число требований в кластере ЦОД и среднее число требований в терминальном узле. На основании формулы Литтла имеем Учитывая, что, получаем Обычный способ предоставления сервиса клиенту это обслуживание его запросов. Обслужить запрос это значит получить запрос и выслать ответ на него запрашивающей стороне 3. Запросы пользователей поступают на сервис балансировки распределитель нагрузки, который направляет их на обработку в соответствующий кластер, где запросы распределяются между серверами в соответствии со своим алгоритмом. Согласно принципам работы сети Интернет, запрос, отправляемый на определенный адрес, может получить только один компьютер в сети. Таким образом, для того чтобы запросы, направляемые на адрес сервера, могли обрабатываться кластером, должен быть запущен сервис балансировки нагрузки 4. Типичная структура ЦОД показана на рис. 1. Предположим, что имеется поток запросов к некоторому информационному ресурсу, все заКроме того, если применить формулу Литтла к терминальному узлу, имеем 1, и, таким образом Рассмотрим насыщенный узел, или узкое место в ЦОД, который на рис. 2 заштрихован Пусть относительное число посещений -го узла кластера при циркуляции требований в сети, где производительность -го узла кластера. Тогда насыщенным будет узел, в котором отношение принимает наибольшее значение из всех в кластере. Для рассматриваемого случая среднее число посещений узкого места на каждое поступление требований в кластер. Чтобы найти, необходимо решить систему уравнений Чтобы найти число насыщающих требований, предположим, что должно быть равно максимальному числу идеально спланированных заданий, не дающих никаких взаимных помех. Для каждого из обслуживающих приборов в насыщенном узле можно спланировать максимальное число заданий, равное необходимому времени обслуживания задания в одном цикле, деленному на время обслуживания задания в насыщенном узле за цикл. Общее время обслуживания за цикл равно т. е. сумме по всем узлам произведений числа посещений узла на цикл на среднее время обслуживания на посещение. Время пребывания в насыщенном узле равно 1 . Так как имеется таких обслуживающих приборов, отношение общего времени обслуживания за цикл ко времени пребывания в насыщенном узле за цикл может быть умножено на, что в итоге дает Исходя из приведенного анализа, рассмотрим задачу балансировки нагрузки в кластере. Цель выяснить, как улучшается характеристика кластера ЦОД в целом, если устранить в нем узкое место путем увеличения интенсивности обслуживания в насыщенном узле. Легко предположить, что в результате этого какой-нибудь другой узел, например, станет узким местом кластера. Данная характеристика имеет существенное значение для определения эффективности функционирования ЦОД, так как позволяет оценить выигрыш в улучшении характеристик ЦОД при использовании более мощных аппаратных средств и или совершенных методов управления потоками информации 5. Формально постановку задачи балансировки нагрузки проведем с использованием модели замкнутой СМО с центральным обслуживающим прибором рис. 3. Она позволяет отразить архитектуру кластера, представленного на рис. 2. Данная модель позволяет описать работу мультипрограммной вычислительной системы с фиксированным числом узлов, в которую допускается точно заданий. Эти задания циркулируют в системе бесконечно долго, коллективно используя ресурсов. Центральный обслуживающий прибор представляет собой корневой узел кластера, предоставляющий сервис балансировки нагрузки, а остальные 1 узлов периферийные узлы, собственно выполняющие обработку клиентских запросов. В такой системе запросы циркулируют между узлами кластера, требуя обращения сначала к корневому узлу, а затем к некоторому периферийному узлу кластера, после этого опять требуя обслуживания в центральном узле, а затем вновь обращения к какому-нибудь периферийному узлу кластера и т. д. Следовательно, все время задания возвращаются в корневой узел кластера. Переходные вероятности задаются матрицей где В реальной мультипрограммной ситуации задания, в конце концов, покидают систему, и в моменты их ухода в систему по одному поступают новые задания. Это обстоятельство учтено в модели возможностью прямого возвращения задания с вероятностью в корневой узел, что означает уход старого задания и поступление вместо него нового задания. Таким образом, число заданий в системе остается постоянным и равным . В модели с центральным обслуживающим прибором в каждом узле находится один обслуживающий прибор 1, а время обслуживания в м узле распределено по показательному закону с параметром . Пусть матрица является матрицей переходных вероятностей между узлами сети. Тогда случай с центральным обслуживающим прибором можно описать следующей простой матрицей Задача сводится к решению уравнения . Для рассматриваемой матрицы решение имеет вид Общее решение для любой замкнутой марковской СМО с однолинейными СМО в узлах дается равенством включающим . В частном случае рассматриваемой модели с центральным обслуживающим прибором получаем где Следовательно, имеем явное решение, выражаемое через параметры системы и . Пусть теперь стационарная вероятность того, что -й узел не пуст. Можно показать, что 1 Из 1 получаем 2, т. е. интенсивность, с которой задания поступают в -й узел, равна интенсивности, с которой они покидают этот узел. Тогда для сбалансированной системы 2 Следовательно, сбалансированная система система без узких мест это такая система, для которой выполняется равенство 2. Определим, как влияет отсутствие сервиса балансировки нагрузки в кластере на производительность центра обработки данных. Пусть вычислительный кластер состоит из пяти узлов и узкое место в нем 2-й узел. Результаты моделирования при разном коэффициенте загрузки приведены в табл. 1. Увеличение вычислительной мощности насыщенного узла кластера позволяет сохранить выполнение равенства 2. В табл. 2 приведены результаты, показывающие, во сколько раз необходимо увеличить производительность насыщенного узла кластера при сохранении поступающей на вход нагрузки, если отсутствует сервис балансировки нагрузки. Необходимым условием сбалансированной работы вычислительного кластера ЦОД является равенство 2. Это равенство показывает, что мера, определяющая, насколько узкое место создается в -м узле, пропорциональна скорости изменения производительности в зависимости от роста интенсивности обслуживания в этом узле. При этом производительность определяется как среднее число заданий, обслуживаемых за единицу времени, и равна . Для устранения возможности появления узкого места необходим сервис балансировки нагрузки с ростом нагрузки наличие узкого места не позволяет кластеру в целом справиться с поступающими запросами пользователя, в то время как кластер с сервисом балансировки нагрузки продолжает функционировать см. табл. 1 устранение узкого места возможно, если использовать более мощные аппаратные средства см. табл. 2. 