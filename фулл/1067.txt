ЭКСПЕРИМЕНТАЛЬНОЕ ИССЛЕДОВАНИЕ  СИСТЕМЫ ПЕРЕДАЧИ ДАННЫХ ПО КОММУТИРУЕМОМУ  МНОГОКАНАЛЬНОМУ ОПТОВОЛОКОННОМУ СОЕДИНЕНИЮ 

Постановка проблемы:  рассматривается система передачи данных по коммутируемому многоканальному оптоволоконному соединению. Целью работы является программно-аппаратная реализация рассматриваемой системы  в виде экспериментальной установки и ее исследование.  Методы:  сопоставлены результаты, полученные на экспериментальной установке, с результатами вычислительного эксперимента на динамической модели той же геометрической  конфигурации. Исследовалось поведение системы в режиме передачи данных без перекоммутации, а также функции  коммутации каналов и самовосстановления соединения.  Результаты:  подтверждена работоспособность системы передачи данных, построенной на основе коммутируемого многоканального оптоволоконного соединения (в частности, была подтверждена работоспособность функций коммутации каналов, передачи данных и самовосстановления соединения), а также подтверждена адекватность построенной динамической модели.  Практическая значимость:  результаты,  полученные в ходе вычислительного эксперимента на динамической модели, позволили оптимизировать геометрическую конфигурацию экспериментальной установки. Ключевые слова  — системы повышенной надежности, многоканальные оптоволоконные соединения, самоорганизующиеся системы, протоколы передачи данных. 

В последние годы все большее внимание при проектировании высокопроизводительных вычислительных систем сложных микросхем, многопроцессорных суперкомпьютерных систем уделяется проблеме организации межсоединений 13. Межсоединения определяют организацию обмена информацией между узлами сети и могут быть описаны такими характеристиками, как физическая среда, топология сети, используемые протоколы передачи данных. Если говорить о физической среде, то одним из перспективных направлений развития межсоединений являются многоканальные оптоволоконные соединения. Основная причина, по которой соединения такого типа до сих пор не получили массового распространения, это сложность монтажа. Важно, чтобы при монтаже была выполнена строгая юстировка компонентов оптоволоконного соединения источника и приемника сигнала, а также оптического канала друг относительно друга. Процедура юстировки и монтажа требует высокоточного, дорогостоящего оборудования. Кроме того, оптоволоконное соединение не обладает достаточной устойчивостью к внешним воздействиям смещение компонентов друг относительно друга, а также чрезмерный излом оптоволокна могут привести к трудновосстановимому нарушению связи. Если говорить о многоканальных оптоволоконных соединениях, то увеличение количества каналов ведет не только к росту производительности соединения, но и к усложнению его монтажа. Наиболее распространенные сегодня многоканальные оптоволоконные соединения это активные оптические кабели и высокоплотные параллельные оптоволоконные соединения. Разработчики таких соединений решают в основном технологические проблемы высокоточного монтажа, стремясь разместить как можно больше каналов в корпусах небольших размеров. Возможным альтернативным решением проблемы построения многоканальных оптоволоконных соединений является технология передачи данных по коммутируемому многоканальному оптоволоконному соединению 4. В данной статье приводятся результаты исследования системы передачи данных, построенной на основе предложенной технологии. Общая схема системы передачи данных показана на рис. 1. На входы лазерной матрицы подаются электрические импульсы от управляющей микросхемы источника, которые модулируют излучение некоторого множества лазеров источников сигналов. Это излучение сигналы и по оптошине каналу передачи данных поступает к матрице фотодиодов и активирует некоторое множество фотодиодов и приемников сигналов. Активированные фотодиоды генерируют поток электрических импульсов к управляющей микросхеме приемника. При соединении оптошину подключают к матрицам передатчика и приемника достаточно произвольно, совмещая лишь оптические области матриц и оптошины путем установки концов оптошины в оптические разъемы микросхем приемника и передатчика. Поэтому, зная только множество активированных фотодиодов матрицы-приемника, невозможно определить, каким из лазеров был испущен активировавший эти фотодиоды сигнал. Один из основных принципов рассматриваемой системы заключается в том, чтобы до начала передачи данных выполнить коммутацию логических каналов установить соответствие между каждым лазером и активируемыми этим лазером фотодиодами, а также задействованными для передачи сигналов каналами. Процедура коммутации логических каналов производится однократно до начала передачи данных и никак не влияет на скорость передачи в дальнейшем. При обнаружении нарушения связи, например, вследствие частичного повреждения оптошины или ее смещения относительно матриц приемника и передатчика, процедура коммутации каналов может быть выполнена повторно без вмешательства оператора. Теоретические исследования системы передачи данных по коммутируемому многоканальному оптоволоконному соединению выполнены в работах 5, 6. В настоящей работе приводится экспериментальное исследование системы передачи данных. При этом результаты, полученные на экспериментальной установке ЭУ, сопоставляются с результатами вычислительного эксперимента, выполненного на динамической модели, построенной с использованием аппарата раскрашенных сетей Петри РСП, 7. Для проведения экспериментальных исследований системы передачи данных была спроектирована и разработана ЭУ 8. Серым цветом на рис. 2 условно выделено устройство так называемый смартлинк, реализующее коммутируемое многоканальное оптоволоконное соединение. Детально оно показано на рис. 3. Устройство содержит передающий и принимающий модули, соединенные с платой, на которой размещена программируемая логическая интегральная схема 6 605, подключенная к шине 1. На внешней поверхности передающего и принимающего модуля размещен оптический разъем, внутри которого в основании находится интегральный массив с соответственно восемью -лазерами и восемью фотодиодами. Передающий и принимающий модули соединены оптошиной наконечники оконечные втулки которой вставлены в оптические разъемы указанных модулей. Битрейт в 1 равен 2,5 Гбитс, и с учетом избыточности кодирования 8 бит10 бит теоретическая пропускная способность шины 1 может быть рассчитана как 2,5 810 2 Гбитс. Передача полезных данных в 1 составляет приблизительно 50 от общего объема передаваемых данных. Таким образом, полезная пропускная способность 1 приблизительно равна 1 Гбитс. Это же подтверждается и анализом разверток осциллографа. На осциллограмме рис. 4 визуально видно, что в одной клетке 50 нс помещается 8 информационных бит. Следовательно, длительность одного информационного бита 508 6,25 нс. Тогда скорость передачи данных по одному каналу кабеля 1 16,25 160 Мбитс. Полагая эту скорость передачи одинаковой для всех каналов, получаем суммарную физическую скорость передачиприема данных по восьми активным каналам кабеля 160 8 1280 Мбитс. С учетом избыточности кодирования значащие полезные биты передаются с меньшей скоростью 1280 0,8 1024 Мбитс. Конфигурация матрицы источников сигналов, используемой в ЭУ, представлена на рис. 5. Оптоволоконная шина имеет круглую форму сечения входного торца, что дает возможность обеспечить соответствие сечения жгута форме источника излучения. Диаметр оптоволоконной шины по наружной оболочке составляет 3 мм. Оптические волокна собраны в пучок с гексагональной вертикальной раскладкой. Оптоволоконная шина изготовлена с использованием многомодовых оптических волокон из специального стекла с диаметром светопроводящего ядра сердцевины 0,03 мм. Диаметр внешнего радиуса оптического волокна составляет 0,04 мм. Принимая коэффициент упаковки каналов в оптошину равным 0,8, количество каналов в оптошине можно рассчитать следующим образом Конфигурация оптических каналов определяется по разметке рис. 6. Длина оптошины составляет 817,3 мм. Конфигурация матрицы источников сигналов, используемой в ЭУ, представлена на рис. 7. Следует отметить, что светочувствительной является только периферийная область окружности приемника, а центральная область нет. Диаметр внешнего радиуса приемника составляет 0,2 мм, диаметр внутреннего радиуса 0,13 мм. Оптошина жестко фиксируется в разъемах приемника и передатчика в плоскости 0, но при этом допускается ее свободное позиционирование при юстировке по оси как вдоль оси, так и вокруг оси. При вращении одной из матриц вокруг оси происходит уменьшение количества каналов, участвующих в засветке приемников, что приводит к снижению интенсивности засветки этих приемников. При этом, очевидно, существует семь положений, в которых интенсивность засветки каждого приемника близка к максимальной. При переходе из одного такого положения в другое должна выполняться перекоммутация каналов. Программное обеспечение ЭУ включает в себя комплекс программных компонент, реализующих протоколы низкоуровневого и высокоуровневого обмена данными между узлами соединения, драйверы устройств, а также приложения для исследования работы системы передачи данных приложение верхнего уровня, разработанное для исследования и тестирования установки, обеспечивающее прием и передачу данных, а также сбор необходимой статистической информации драйвер устройства, реализующий протокол управления логическим уровнем соединения драйвер устройства, реализующий протокол управления канальным уровнем соединения драйвер шины прошитое в ПЛИС приложение, реализующее протокол управления физическим уровнем соединения драйверы матрицы лазеров и матрицы фотодиодов. Схема программной реализации системы передачи данных рис. 8 является общей для приемника и передатчика. Для реализации приложений верхнего уровня используется стандартная библиотека функций . В качества драйвера шины используется стандартный драйвер шины для и более поздних версий, поэтому его специальная реализация не требуется. Для реализации драйвера устройства применен механизм -передачи. передача возможна, поскольку используемое устройство является устройством-мастером шины . Устройство-мастер шины содержит все необходимые электронные компоненты и логику, чтобы взять управление шиной, к которой оно подключено, и выполнять обмен данными между своим буфером и системной памятью ПК без участия центрального процессора ПК. драйвер устройства представляет собой событийно-ориентированную программу набор обработчиков событий -запросов. Основные -запросы, обрабатываемые драйвером чтение данных из буфера ПК в устройство запись данных из устройства в буфер ПК. Алгоритм обработки запроса включает в себя 3 шага. 1. Сброс устройства. 2. Инициализация -передачи данных. Устанавливаются значения следующих регистров устройства начальный адрес буфера памяти на ПК, данные из которого должны быть записаны в устройство размер -пакета в байтах количество пакетов. Размер одной -передачи определяется как произведение значений регистров и не может превышать 32 КБ. В случае успешного выполнения функция инициализации -передачи должна возвращать статус . 3. Старт -передачи, означающий начало копирования данных из буфера памяти на ПК в устройство. При этом буфер памяти на ПК организован как, обеспечивающий максимальный быстрый доступ к данным без участия центрального процессора. При завершении передачи данных генерируется прерывание. Аналогичную структуру имеет и алгоритм обработки запроса . Одна -передача размером 32 КБ соответствует одному пакету данных для протокола управления логическим каналом, который реализуется в драйвере устройства. Основные соглашения протокола целостная единица данных это сообщение например, файл одновременно передатчик может передавать, а приемник может принимать несколько сообщений, каждое из которых имеет уникальный идентификатор каждое сообщение на стороне передатчика разбивается на пронумерованные пакеты размером 32 КБ, включающие в себя заголовок и основной блок выделяется три основных типа пакетов информационные пакеты, содержащие передаваемые данные служебные пакеты для передачи управляющих сигналов протокола логического канала служебные пакеты для взаимодействия с ПЛИС пакеты могут поступать в приемник в порядке, отличном от того, в котором они были отправлены передатчиком, и собираться в сообщение в соответствии с их порядковыми номерами в том случае, если не все пакеты были приняты, приемник требует от передатчика повторной передачи недостающих пакетов до тех пор, пока сообщение не будет полностью собрано. В ходе исследований сопоставлялись результаты, полученные на ЭУ, с результатами вычислительного эксперимента на динамической РСПмодели той же геометрической конфигурации 7. Исследовалось поведение системы в режиме передачи данных без перекоммутации, а также функции коммутации каналов и самовосстановления соединения. Для каждого режима определен набор показателей для сопоставления. В режиме передачи данных без перекоммутации сравнивались входная и выходная последовательности данных, в режиме коммутации сопоставлялись сформированные множества логических каналов, в режиме самовосстановления исследовалась реакция системы на взаимное смещение источников и приемников перемещение вдоль и поворот вокруг оси . На графике рис. 9, полученном в ходе вычислительного эксперимента на динамической РСПмодели, приведена зависимость интенсивности засветки приемников от угла поворота одной из матриц для каналов, и . Для каналов 3, 4, 5, 6 и 7 зависимости имеют характер, аналогичный характеру для каналов и . Интенсивность засветки приемника, достаточная для его активации, зависит от типа приемника, и была определена экспериментально. Устойчивая активация приемников наблюдается при интенсивности засветки не ниже 65 от максимальной. При этих условиях сохраняется возможность самовосстановления соединения. На графике, полученном в ходе вычислительного эксперимента на динамической РСПмодели рис. 10, видно, что для достижения допустимой засветки приемника канала угол поворота матрицы источников сигналов или матрицы приемников сигналов не должен превышать 12,3. Поскольку характер соответствующих графиков для каналов 2, 3, 4, 5, 6 и 7 аналогичен характеру графика для канала, то максимально допустимый угол поворота матрицы источников сигналов или матрицы приемников сигналов для этих каналов также не должен превышать значения, приблизительно равного 12,3 14,3 . Полученные результаты подтвердились в ходе проведения исследований на ЭУ, здесь максимальный угол составил приблизительно 13,5 . Очевидно, в случае использования матрицы приемников сигналов, равномерно и плотно покрытой фотодиодами, в любом положении матрицы при ее вращении вокруг оси интенсивность засветки будет близка к максимальной. Увеличение расстояния по оси между матрицей источников сигналов и оптошиной приводит, с одной стороны, к снижению интенсивности сигналов, попадающих в каналы, а с другой стороны к рассеиванию сигналов и увеличению количества задействованных каналов. В ходе проведения вычислительного эксперимента на динамической РСП-модели была исследована зависимость интенсивности засветки приемников от расстояния по оси между матрицей источников сигналов и оптошиной рис. 11. График показывает, что максимальная интенсивность засветки приемников достигается при расстоянии между матрицей источников сигналов и оптошиной 0,3 мм. Для получения минимально допустимой засветки на уровне 65 расстояние не должно превышать 0,51 мм. Полученные результаты подтвердились в ходе проведения исследований на ЭУ, здесь максимально допустимое расстояние между матрицей источников сигналов и оптошиной приблизительно равно 0,55 мм. Таким образом, результаты исследований на ЭУ и на модели показали, что самовосстановление соединения возможно при повороте матрицы источников или приемников сигналов вокруг оси на угол, не превышающий 1314, и при смещении оптошины относительно матрицы источников сигналов вдоль оси на расстояние, не превышающее 0,50,6 мм. Увеличение расстояния по оси между матрицей приемников сигналов и оптошиной приводит к снижению интенсивности сигналов, попадающих в каналы возникающее при этом рассеивание сигналов не приводит к изменению количества задействованных приемников. Поэтому для получения максимальной интенсивности засветки приемников матрицу приемников сигналов необходимо размещать максимально близко к оптошине. При моделировании и в ходе проведения исследований на ЭУ было скоммутировано 8 логических каналов. При передаче данных в нормальном режиме без необходимости повторной коммутации каналов в ЭУ и на модели отмечено отсутствие потерь при передаче данных, т. е. полное совпадение принятой и отправленной последовательностей. При этом скорость передачи данных на установке 0,80,9 Гбитс. В динамической модели скоростные характеристики передачи данных не определялись. В режиме коммутации каналов было отмечено полное совпадение скоммутированных множеств источников и приемников при расхождении в задействованных физических каналах на 515 . Расхождение связано с неточностью моделирования физических факторов, влияющих на прохождение сигналов в оптическом канале, а также на входе и на выходе из него. При этом среднее время коммутации в ЭУ составило 0,34 мс. В динамической модели временные характеристики передачи данных не определялись. В режиме самовосстановления моделировалось восстановление соединения при выходе из строя источников и приемников, а также при повороте вокруг и смещении вдоль оси . Отключение источников и приемников в ЭУ инициирует выполнение функции перекоммутации, что в свою очередь приводит к формированию нового множества логических каналов. В ходе исследования было установлено, что полученные таким образом на ЭУ множества логических каналов совпали с соответствующими множествами каналов, скоммутированными на динамической модели. Выход из строя физических каналов моделировался только в вычислительном эксперименте. Разработка динамической модели и создание экспериментального стенда позволили провести исследования, по которым сделаны следующие выводы подтверждена работоспособность системы передачи данных, построенной на основе коммутируемого многоканального оптоволоконного соединения, в режимах коммутации каналов, передачи данных и самовосстановления соединения в целом подтверждена адекватность построенной динамической модели передачи данных по сопоставимым параметрам результаты, полученные в ходе вычислительного эксперимента на динамической модели, позволили оптимизировать геометрическую конфигурацию ЭУ. 