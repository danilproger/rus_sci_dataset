ГИБРИДНЫЙ МЕТОД ВЫДЕЛЕНИЯ ГРАНИЦ  ЗАКРЫТОГО ПОМЕЩЕНИЯ  ПО ДАННЫМ НИЗКОТОЧНЫХ СКАНИРУЮЩИХ СИСТЕМ 

Рассмотрена проблема определения границ закрытого помещения по неточным, зашумленным данным.  Синтезирован гибридный метод определения границ на основе алгоритмов работы с сеточными функциями,  параллельными отрезками и математической эрозией. Проведено моделирование в среде WeBots, показавшее  высокую эффективность предложенного решения. Ключевые слова  — неточные данные, математическая эрозия, сеточная функция, WeBots, выделение границ, сканирующая система. 

Определение границ закрытого помещения одна из основных задач систем картирования местности 1, 2. Выявление границ позволяет получить информацию о планировке здания, наличии и расположении проходов, потенциальных путей эвакуации. Актуальная информация о планировке представляет высокую ценность при проведении специальных операций в условиях города, когда существующие планы зданий не всегда возможно получить оперативно. В настоящее время отсутствует единая база данных, содержащая информацию о планировке зданий в пределах некоторой улицы, района, города. Данные разрознены, их релевантность обратно пропорциональна времени, прошедшему со дня принятия здания в эксплуатацию. Применение роботизированных систем для составления карты-плана закрытого помещения в реальном масштабе времени позволяет решить проблемы получения информации о планировке, а также максимально точно описывать внутренние параметры помещения в текущий момент времени. Точность определения границ помещения существенно зависит от выбранных алгоритмов обработки данных сенсорного комплекса сканирующей платформы роботизированной системы и особенностей работы аппаратной части сенсорного комплекса, основу которой составляют дальномеры различного типа ультразвуковые, оптические, лазерные. Наилучший результат может быть получен при использовании сканирующих лазерных дальномеров 3, однако при этом приходится применять ресурсоемкие алгоритмы обработки сенсорных данных 4, 5. Кроме того, использование данного типа дальномеров в составе сенсорного комплекса не всегда возможно ввиду ограничений на массогабаритные параметры, энергопотребление и стоимость. Указанные проблемы можно решить, применив менее точные, недорогие аппаратные средства с меньшими геометрическими размерами для построения сенсорного комплекса в сочетании с адаптивными методами обработки сенсорных данных. Разработанный ранее сенсорный комплекс, описанный в работах 6, 7, обладал рядом недостатков низкой разрешающей способностью, большой склонностью к получению недостоверных, аномальных данных по причине многочисленного переотражения и интерференции ультразвуковых дальномерных сигналов. С целью преодолеть выявленные недостатки при использовании низкоточных оптических и ультразвуковых дальномеров в настоящей работе на основе известных решений создан эвристический подход гибридный метод обработки данных сканирования, эффективность которого была апробирована на компьютерной модели сканирующей платформы в среде WeBots 8. Подходы к решению задач выделения границ и картирования опираются на базовые алгоритмы машинной графики. Наибольшее распространение получили методы, отличающиеся простотой реализации и доступностью в виде готовых библиотек. Рассмотрим некоторые из них. Метод наименьших квадратов один из базовых методов регрессионного анализа для оценки неизвестных параметров регрессионных моделей по выборочным данным 9. Метод основан на минимизации суммы квадратов остатков регрессии и применяется для аппроксимации заданной функции более простыми функциями, при нахождении совокупности величин, удовлетворяющих уравнениям или ограничениям, количество которых превышает количество самих величин. Недостатком метода является сглаживание углов при обработке данных сканирования закрытого помещения. Преобразование к срединным осям основано на уточнении параметров объекта до тех пор, пока не будет получена цепочка элементов с минимальной связностью остова 10. Недостаток подхода состоит в недетерминированном характере алгоритма расчета остова форма получающейся в результате фигуры обычно существенно зависит от способа уточнения. В случае обработки объекта со сложной формой границы остов также будет сложным для многих объектов стирание или сглаживание частей остова приводит к получению приблизительной границы, существенно отличающейся от истинной. Методы, основанные на преобразовании Хафа 11, являются источником для многих алгоритмов распознавания объектов на растровом изображении. Главные преимущества подобных подходов простота и наглядность здесь распознавание сложных геометрических объектов сводится к поиску максимума многомерной функции, заданной таблично 1214. К недостаткам метода следует отнести существенное влияние на результат фонового шума, что требует значительного числа попаданий в соответствующий элемент пространства Хафа. Общая эффективность алгоритма в большей степени обусловлена качеством входных данных границы должны быть четко определены. Методы, основанные на разбиении сеткой 15, 16, отличаются от описанных выше отсутствием попиксельного анализа растра. Изображение разбивается при помощи квадратной сетки с последующим поиском характерных распределений пикселей на границах клеток сетки. Для работы таких алгоритмов необходим словарь, при помощи которого можно сопоставлять клеткам некоторые заранее заготовленные шаблоны. К недостаткам следует отнести анализ только тех точек, которые находятся на границе области, что приводит к объединению разрывов в линиях. Данные методы плохо обрабатывают дуги, что служит причиной искажения границ помещения и обработанных данных сканирования. Ввиду ограничений традиционных методов, в рамках настоящей работы синтезирован новый подход, основанный на применении аппарата сеточных функций, параллельных отрезков и математической эрозии для редуцирования и шумоподавления сенсорных данных, а также оригинального метода выявления границ для последующего определения границ закрытого помещения. В основе метода лежит выявление точек множества сканирования, принадлежащих множеству окружностей радиуса, центры которых находятся в точках пересечения и, представляющих множества вертикальных и горизонтальных отрезков, составляющих сетку. Шаг сеточной функции определялся аналитически он зависит от дистанции до препятствия, ширины расхождения сканирующего луча и угла поворота сенсорного комплекса. Сетка является регулярной. Результирующее множество точек рис. 1 включает точки множества сканирования, принадлежащие границе сканируемого помещения 1 где множество узлов сетки множество точек сканирования. Точками желтого и черного цветов на рисунке обозначены элементы множества сканирования, желтые точки элементы множества, удовлетворяющие условию 1 начало системы координат сенсорного комплекса курс шаг сеточной функции пунктирная кривая реальная граница исследуемого помещения. Множество формируется объединением всех подмножеств представляющих точки из внутренней области окружностей радиуса, построенных в центре узловых элементов сеточной функции 2 где количество узлов сеточной функции. Формально алгоритм построения сеточной функции реализуется следующей последовательностью шагов. 1. Вычисление угла поворота сенсорного комплекса рис. 2 в соответствии с выражениями 3 где минимальный угол поворота сенсорного комплекса функция определения углового расхождения сканирующего луча сенсорного комплекса функция определения ширины сканирующего луча текущее расстояние до препятствия. 2. Вычисление шага сеточной функции 4 где функция определения шага сетки максимальная дистанция обнаружения препятствия на текущем этапе сканирования. 3. Построение сетки объединение горизонтальных и вертикальных отрезков, ограниченных в размерах возможностями сенсорного комплекса. Построение отрезков сетки осуществляется от крайнего левого положения, обозначенного точкой на рис. 1, с шагом на расстояние 5 где целая часть. Новое построение сетки проводится на каждом этапе сканирования окружающего пространства. Процедура пересчета сетки активируется при ненулевом значении пороговой функции вида 6 где пороговая функция функция определения пороговой величины изменения показаний -го сенсора текущее значение расстояния до препятствия, полученное -м сенсором сенсорного комплекса. Функция определяет изменение расстояния от сенсора сенсорного комплекса до объекта сканирования на фиксированную величину 7 где значение расстояния до препятствия, полученное от -го сенсора на предыдущем этапе пересчета сеточной функции экспериментально устанавливаемое пороговое изменение показаний сенсорного комплекса. Пересчет сеточной функции выполняется в статическом положении. Элементы множества всегда сонаправлены с курсом движения робота до момента остановки для перерасчета. Построение сетки выполняется согласно условию 8 где элемент множества вектор ориентации сеточной функции точка, принадлежащая области сканирования вектор направления движения сканирующей платформы до момента остановки и выполнения нового этапа сканирования окружающего пространства. 4. Поиск элементов множества, находящихся в узлах сетки, добавление их в результирующее множество . Очевидным ограничением метода сеточных функций является группировка элементов множества при большом значении шага, что может привести к неоднозначному определению границ сканирования. Это обусловило необходимость разработки нового метода для выявления границ области сканирования. В методе параллельных отрезков выполняется построение множества эквидистанционных отрезков, ортогональных предыдущему направлению движения сканирующей платформы. Расстояние между отрезками определяется аналитически в соответствии с 4. Результирующее множество формируется из точек области сканирования, удаленных от одного из отрезков множества на расстояние не более Формально алгоритм метода параллельных отрезков реализуется следующей последовательностью шагов. 1. Определение расстояния между отрезками множества в соответствии с 4. 2. Определение числа элементов множества 9 где мощность множества . 3. Определение длины отрезков множества в соответствии с 5. 4. Построение эквидистанционных отрезков, начиная с крайнего левого положения точки рис. 3. 5. Добавление в элементов, удовлетворяющих условию вида 10 где точка, принадлежащая отрезку абсцисса точки функция определения евклидова расстояния от оси абсцисс до отрезка целочисленный номер отрезка. 6. Добавление в целевое множество таких элементов множества, что расстояние между ними и некоторым отрезком из удовлетворяет условию 11 где вектор, направленный из точки сканирования в некоторую точку, принадлежащую одному из отрезков множества отрезков см. рис. 3 минимальная длина вектора, определяемая евклидовой мерой расстояния. К недостаткам описанных выше подходов следует отнести ожидаемую высокую чувствительность к шумам и выбросам в данных сенсорного комплекса. Для преодоления этого ограничения разработан метод на основе модифицированного алгоритма математической эрозии, примененного для анализа неполных данных в работах 17, 18. В качестве структурного элемента здесь использовано объединение квадратных блоков рис. 4, длина стороны которых определяется в соответствии с 4. Число блоков в объединении нечетно и зависит от текущего расстояния до препятствия. Все объединения расположены вдоль сканирующего луча . Результат работы метода множество точек, находящееся во внутренней области центрального блока объединения при условии, что в остальных блоках объединения будет не менее одной точки, принадлежащей множеству 12 где множество точек блока, входящего в состав объединения общее число блоков в объединении номер центрального блока объединения. Порядковый номер центрального блока в объединении определяется как 13 Формально алгоритм математической эрозии реализуется следующей последовательностью шагов. 1. Определение числа блоков в объединении при заданном угле поворота сканирующего луча сенсорного комплекса 14 где погрешность определения расстояния . 2. Вычисление четырех координат вершин блока в соответствии с выражением 15 где одна из вершин блока номер вершины текущее расстояние до препятствия угол поворота сканирующего луча сенсорного комплекса на данном этапе сканирования 3. Построение объединения блоков, вершины которых рассчитаны в соответствии с выражением 15. 4. Поиск элементов множества, удовлетворяющих условию 12. Описанные ранее методы позволяют редуцировать исходное множество, но не определяют связи между элементами. Для их поиска используется оригинальный метод выявления границ, реализующий второй этап гибридного метода обработки данных сканирования. Настоящий подход осуществляет сегментацию результирующего множества на подмножества рис. 5, в состав которых входят элементы, удовлетворяющие условию вида 16 где -е подмножества множества целочисленный индекс фиксированное целочисленное значение предельно допустимого угла между отрезками, соединяющими элементы . В случае невыполнения требований 16 добавление элементов в текущий сегмент прекращается и начинается формирование нового подмножества. После формирования всех подмножеств происходит объединение граничных элементов. Элемент считается граничным в том случае, если он был добавлен первым или последним при выполнении операции сегментирования согласно 16. Граница исследуемого помещения незамкнутая ломаная, вершинами которой являются граничные элементы сегментов. Операция объединения граничных элементов выполняется в соответствии со следующим условием 17 где множество граничных точек 1 1-й элемент сегмента с индексом целочисленный индекс последнего элемента сегмента номер последнего найденного сегмента абсцисса граничной точки -го сегмента ордината граничной точки -го сегмента. На рисунке тонкая ломаная отрезки, соединяющие элементы множества пунктирная ломаная отрезки, соединяющие элементы сегментированных подмножеств жирная ломаная выявленная граница области сканирования, полученная последовательным соединением элементов множества . Формально метод выявления границ реализуется следующей последовательностью шагов. 1. Формирование множества любым из описанных выше методов. 2. Разбиение множества на подмножества в соответствии с 16. 3. Формирование множества граничных точек в соответствии с 17. 4. Построение границы области сканирования последовательным соединением элементов множества отрезками. Эффективность работы предлагаемых методов изучалась путем моделирования закрытого помещения и сенсорного комплекса в среде WeBots рис. 6. Моделирование работы выполнялось на основе экспериментальных измерений, полученных с применением дальномеров Sharp GP2Y0A02. В качестве опорных параметров для построения модели датчика использовались предельные дистанции обнаружения препятствия и зависимость ошибки измерения от расстояния. Сканирование проводилось в стационарном положении сканирующей платформы. В начальный этап времени сенсорный комплекс был повернут на 90 в левую сторону относительно направления вектора . После получения данных о расстоянии до препятствия сенсорный комплекс поворачивался вправо с шагом 1 . Расстояние до препятствия на каждом этапе сканирования измерялось 10 раз. Исходное множество было сформировано из полного набора данных, полученных в рамках всех проведенных этапов сканирования. Для этого набора поочередно применялись методы первого этапа обработки данных сеточных функций, параллельных отрезков, математической эрозии с последующим определением границ области сканирования методом выявления границ. В качестве сравнительного метода был применен алгоритм преобразования к срединным осям, реализованный средствами Matlab Image Processing Toolbox 19. На рис. 7, точками зеленого цвета обозначены элементы редуцированного множества красного узловые элементы, полученные посредством метода выявления границ красная ломаная линия соответствует найденной границе области сканирования черная ломаная эталонная граница области сканирования. Анализ результатов работы гибридного метода обработки данных сканирования, представленных графиками на рис. 7 и в сводной таблице, свидетельствует, что метод математической эрозии позволяет наиболее эффективно бороться не только с выбросами, полученными на этапе измерения расстояния, но и с аномальными данными, отмеченными на рис. 7, . В частности, при 0,5 и 1 наблюдается существенный рост отношения величины найденного периметра к эталонному периметру, а также числа узловых элементов выявленной границы, что обусловливается меньшим размером квадратного блока, входящего в состав объединения. Дальнейшее уменьшение размера блоков приводит к снижению площади взаимопересечения их объединений, в результате чего уменьшается число элементов области сканирования, находящихся во внутренней области квадратных блоков, удовлетворяющих условию 12. Выявленная закономерность позволяет прийти к заключению, что разработанный метод будет наиболее эффективно обрабатывать данные оптических дальномеров, обладающих малыми значениями расхождения сканирующего луча. Применение метода математической эрозии для обработки данных ультразвуковых сенсоров будет нецелесообразно ввиду неизбежного уменьшения размера квадратного блока. Метод параллельных отрезков позволяет эффективно редуцировать исходное множество данных только при малых значениях шага Для снижения величины шага необходимо увеличивать значения и с сопутствующей наиболее явно наблюдаемой при 2 группировкой элементов редуцированного множества вдоль эквидистационных отрезков см. рис. 7, приводящей к возникновению эффекта пилы при последующем выделении границ см. рис. 7, . Заметим, что эффектом группировки обусловливается низкая эффективность метода при обработке данных сканирования помещения, стены которого расположены под прямым углом. При увеличении значения параметров и не прослеживается общая тенденция в изменении отношения найденного и эталонного периметров, равно как и в количестве точек найденной границы области сканирования. Эта особенность также объясняется эффектом группировки, приводящим к возникновению большого числа связей малой длины между элементами группы и самими группами редуцированного множества. Метод сеточных функций показал результаты, близкие к методу математической эрозии см. рис. 7, уступив последнему в эффективности обработки как аномальных данных, так и редуцированного множества, содержащего большее число выбросов. Сеточная функция обладает наименьшей чувствительностью к изменению ширины сканирующего луча, что позволит применять метод сеточной функции для обработки данных ультразвуковых дальномеров. Отметим, во-первых, что периметр выявленной границы области сканирования при последующем применении метода выявления границ не превышает значения периметра эталонной границы для всех значений параметров и во-вторых, применение метода сеточных функций позволило получить минимальную среди всех рассмотренных методов мощность редуцированного множества данных сенсорного комплекса. Несмотря на указанные достоинства, применение на практике будет сопряжено с некоторыми трудностями подбора шага и радиуса узловых элементов. В частности, при некоторых и возможны проявления ограничений, аналогичных найденным для метода параллельных отрезков при малом значении мощность редуцированного множества будет мала настолько, что дальнейшее применение метода выявления границ будет нецелесообразно ввиду недостаточного количества входных данных при увеличении значения эффективность метода также будет снижаться ввиду незначительного изменения мощности множества данных. Из экспериментальных результатов следует, что применение метода преобразования к срединным осям привело к удовлетворительному количественному показателю отношения найденного периметра к эталонному, составившему 117,91 . Вместе с тем полученная граница состояла из 1041 точки, что в 35 раз превышает показатели наиболее ресурсоемкого из синтезированных подходов. Качественно найденная граница точно отображает эталонные контуры области сканирования только на участках вдоль одной и той же стены, в то время как граничные области стыка стен оказываются сглаженными. Таким образом, метод не позволяет эффективно обработать аномальные данные. Анализируя результаты моделирования, можно сделать вывод, что гибридный метод обработки данных сканирования достигает наибольшей эффективности при последовательном применении методов математической эрозии и выявления границ с параметрами 0,2 0,5 и 1. В этом случае погрешность определения границы закрытого помещения почти вдвое меньше по сравнению с методом параллельных отрезков и до 20 меньше по сравнению с методом сеточных функций. Кроме того, применение метода математической эрозии позволяет наиболее точно определить границы области сканирования при большем числе различных значений угла поворота сенсорного комплекса и ширины расхождения сканирующего луча. В настоящей работе описан новый метод определения границ закрытого помещения на основе данных низкоточных сканирующих систем. Проведенные исследования показали, что наиболее корректное определение границ может быть получено путем последовательного применения двух групп алгоритмов редуцирующих методов и методов, устанавливающих связи между элементами редуцированных множеств, описывающих области сканирования сенсорного комплекса Одним из главных достоинств разработанных подходов является эффективное подавление шумов и обработка аномальных данных. К слабым практическим сторонам следует отнести невозможность детектирования проходов между помещениями при закрытых дверях. Выводы на основе экспериментальных данных могут потребовать уточнений, поскольку они были получены при изучении единственного помещения. Отметим, что синтезированный метод обладает эвристическим характером, так как рассматриваемая проблема не имеет строгого обоснования ввиду бесконечно большого числа реальных помещений с произвольной, не типизированной формой датчики в составе сенсорного комплекса обладают различными характеристиками, обусловленными физическими принципами функционирования, технологией производства, параметрами установки на сканирующей платформе, устойчивостью к внешнему и внутреннему помеховому воздействию и т. д. Дальнейшее совершенствование разработанных методов будет направлено на эффективное сведение результатов отдельных этапов сканирования в единую карту-план при работе сканирующих платформ в глобальной и в собственной, локальной, системах координат верификацию результатов работы синтезированного метода на основе более широкой выборки данных современных сенсорных комплексов. 