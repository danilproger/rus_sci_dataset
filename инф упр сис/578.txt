КМОП-РЕАЛИЗАЦИЯ ОБУЧАЕМОГО ПОРОГОВОГО  ЛОГИЧЕСКОГО ЭЛЕМЕНТА ЧАСТЬ 2: РЕЗУЛЬТАТЫ МОДЕЛИРОВАНИЯ И РЕАЛИЗУЕМОСТЬ  

показать возможность реализации в КМОП-технологии, использующей современные проектные нормы, аналого-цифрового порогового логического элемента, обучаемого сложным пороговым логическим функциям, и определить границы реализуемости. Методы: SPICE-моделирование процессов обучения порогового элемента сложным пороговым функциям и процессов поддержания его элементов аналоговой памяти в обученном состоянии. Результаты: показано, что для экспериментов по обучению порогового элемента в наибольшей степени подходят пороговые функции, представимые в виде схемы Горнера, так как они при высокой сложности обладают наиболее короткими проверочными последовательностями. Пороговый элемент, изготовленный в КМОП-технологии 0,18 мкм, в пределе может быть обучен любой пороговой функции с порогом, не превышающим 144. К таким функциям относятся все пороговые функции 11 переменных и множество функций большего числа переменных. Практическая значимость: существенно расширены функциональные возможности обучаемого порогового элемента, который может быть использован в системах логического распознавания образов, а также при создании нового поколения нейрочипов.

В первой части статьи 1 приведен проект аналого-цифрового обучаемого логического порогового элемента TTE для исполнения в КМОПтехнологии 0,18 мкм. Элемент TTE может быть обучен реализации сложных пороговых функций большого числа переменных. Он содержит множество синапсов с элементами аналоговой памяти в виде конденсаторов, на которых накапливаются веса двоичных входных переменных высокочувствительный -компаратор, сравнивающий проводимости двух своих частей из и -канальных транзисторов три выходных усилителя c разными порогами срабатывания, два из которых с выходами и используются в процессе обучения, а с выхода третьего усилителя снимается значение реализуемой функции. Обучение такого TTE осуществляется путем накопления напряжений на конденсаторах синапсов, соответствующих весам входных двоичных переменных обучающей пороговой функции. Предложена 1 также структурная схема обучения TTE и поддержания его аналоговых элементов памяти в обученном состоянии обновление требуемых значений напряжений на конденсаторах синапсов. Она содержит, кроме самого ТТE, генератор последовательностей наборов значений переменных обучающей функции и последовательности значений самой функции, соответствующих этим наборам компаратор, сравнивающий значения и со значениями функции при обучении или со значениями при обновлении и вырабатывающий сигналы инкремент или декремент переключатель режима обучения на режим обновления. В экспериментах с обучением TTE существует актуальная проблема, связанная с выбором функций для обучения, так как от этого выбора в немалой степени зависит время моделирования. Длительность экспериментов очень важна, поскольку часто может измеряться часами и даже днями. К функциям, выбранным для обучения, естественно предъявить следующие требования они должны иметь короткую последовательность наборов значений переменных, проверяющих все возможные переключения значений функции они должны обладать широким диапазоном весов переменных иметь по возможности большое значение суммы весов переменных функции заданного числа переменных должны иметь высокое значение порога. Проблема выбора функций для экспериментов была рассмотрена в работе 2. Было показано, что пороговые функции, которые могут быть представлены в виде схемы Горнера, удовлетворяют этим требованиям. Для таких функций последовательность целочисленных значений весов переменных и порога, обладающая минимальным значением их суммы, образует последовательность чисел Фибоначчи, а длина проверяющей последовательности функции, зависящей от переменных, равна 1. Существует два вида пороговых функций, представимых в виде схемы Горнера Назовем их функциями Горнера первого и второго вида соответственно. Заметим, что если в функции второго вида инвертировать все переменные, то, используя правила де Моргана, нетрудно показать, что эта функция будет являться инверсией функции Горнера первого вида. Ниже представлены результаты по обучению ТТЕ пороговой функции, зависящей от 10 переменных и представимой в виде схемы Горнера. Минимальные дизъюнктивные нормальные формы этой функции и ее инверсии имеют следующий вид В работе 2 показано, что функция, представленная в форме МакКаллока Питтса см. 1 в работе 1, имеет вид 2 в котором веса переменных и порог являются последовательностью чисел Фибоначчи. Таким образом, порог представляется одиннадцатым числом Фибоначчи. Именно по этой причине выбрано значение порога, равное 89 см. рис. 8 в работе 1. Проверочная последовательность для этой функции должна содержать не меньше 11 наборов значений переменных, которые определяются термами минимальной дизъюнктивной нормальной формы функций и в 1. В проверочной последовательности значений функции различные значения чередуются. Для того чтобы сделать эту последовательность повторяемой, необходимо иметь в ней четное число значений, т. е. проверочная последовательность должна содержать четное число наборов значений переменных. С этой целью можно добавить любой набор, на котором функция принимает значение лог.1. Известно, что любая пороговая функция является звездой. Вершина звезды является наиболее удобным кандидатом для ее включения в проверочную последовательность, поскольку ее добавление должно ускорить время обучения. Таким образом, проверочная последовательность для функции 1 имеет вид 0 1 1 1 1 1 1 1 1 1 0 1 1 0 0 0 0 0 0 0 0 1 1 0 0 1 1 1 1 1 1 1 0 1 0 1 1 0 0 0 0 0 0 1 1 0 1 0 0 1 1 1 1 1 0 1 0 1 0 1 1 0 0 0 0 1 1 0 1 0 1 0 0 1 1 1 0 1 0 1 0 1 0 1 1 0 0 1 1 0 1 0 1 0 1 0 0 1 0 1 0 1 0 1 0 1 0 1 1 1 1 0 1 0 1 0 1 0 1 0 0 1 1 1 1 1 1 1 1 1 1 1 В соответствии с ней генератор входных сигналов вырабатывает обучающую последовательность наборов значений сигналов, которая представляет собой периодически повторяемую проверочную последовательность рис. 1. Последний график этого рисунка представляет стробирующий сигнал, который участвует в формировании сигналов и . Каждый набор значений входных сигналов и фиксируется в течение 200 нс. После установки набора через 100 нс вырабатывается стробирующий сигнал, длительность которого тоже равна 100 нс. Выбор такого большого интервала времени до появления сигнала стробирования объясняется тем, что перед стробированием должны завершиться все переходные процессы, вызванные установкой входного набора, и в районе рабочей точки эти процессы могут протекать очень медленно. 1 Большая длительность сигнала стробирования дает возможность при приближении к рабочей точке автоматически изменять в широких пределах величину шага обучения вплоть до долей милливольта. Перед обучением TTE функции необходимо установить пороги срабатываний выходных усилителей. Вернемся к рис. 8 1. При 89 минимальных токах синапсов максимальный скачок напряжения min 428 мВ, и середина этого скачка находится на уровне 1,75 В. Именно на этот порог и должен быть настроен усилитель с выходом . Очевидно, что разность порогов срабатываний двух других усилителей не должна превышать 428 мВ, так как эта величина определяется параметрами -канальной части -компаратора и минимальным значением порога логической функции maxmin, где ток -компаратора в пороговой зоне, а максимальный ток синапса с наименьшим весом. Выберем эти пороги равными 1,95 и 1,55 В. Порог срабатывания усилителя устанавливается подбором ширины -канального транзистора его первого каскада. Статические характеристики усилителей приведены на рис. 2. При приближении слева выходного напряжения -компаратора к рабочей области для обучения TTE используется выходной сигнал усилителя с высоким порогом срабатывания, а при приближении справа выходной сигнал усилителя с низким порогом срабатывания указано стрелками на рис. 2. Это ведет к растягиванию минимального скачка min выходного напряжения -компаратора и автоматическому позиционированию порога срабатывания усилителя с выходом в середину этого скачка. Процесс формирования напряжений на конденсаторах синапсов при обучении TTE функции показан на рис. 3, а на рис. 4 представлены сигналы и, вырабатываемые при формировании этих напряжений и поддержании сформированных значений. На этих рисунках хорошо видна динамика обучения. До тех пор, пока -компаратор TTE находится вне рабочей области приблизительно до 35 мкс, сигналы не вырабатываются и конденсаторы синапсов заряжаются сигналами . Несмотря на то, что их заряд осуществляется с разной скоростью, шаг изменения напряжения на конденсаторах один и тот же и равен максимальному шагу обучения 20 мВ при длительности сигнала, равной 100 нс. Затем появляются сигналы, растягивающие в рабочей области минимальный скачок напряжения на выходе -компаратора, при этом шаг обучения уменьшается за счет сокращения длительности сигналов и . После достижения требуемой величины минимального скачка напряжения maxmin, определяемой разностью порогов срабатывания усилителей и, исчезают сигналы и приблизительно через 175 мкс после начала обучения, что является признаком окончания процесса обучения TTE заданной пороговой функции. Заметим, что при этом порог срабатывания усилителя с выходом оказывается в центре этого скачка. При 200 мкс осуществляется переключение режима обучения TTE на режим обновления, или поддержания, сформированных значений напряжения на конденсаторах синапсов. Коррекция этих напряжений осуществляется достаточно редкими сигналами и . Несмотря на то, что на рис. 4 сигналы отсутствуют до конца эксперимента, они могут появиться при его продолжении. Использование обученного TTE для решения задач, для которых он обучался, допускается только путем временного прерывания режима обновления. Если этот режим не будет вовремя возобновлен, возможна потеря обученного состояния из-за утечек зарядов конденсаторов синапсов, что приведет к необходимости повторного обучения. Для определения функциональных возможностей TTE было проведено множество экспериментов с использованием SPIC-моделирования по обучению TTE пороговым функциям Горнера, зависящим от 7 до 11 переменных. В отличие от технологии 0,8 мкм, в которой возможно построение TTE, реализующей функции 12 переменных, в технологии 0,18 мкм удалось построить ТТЕ, который может быть обучен функции Горнера 11 переменных. При этом пришлось уменьшить амплитуду тока сигналов и до 0,06 мкА, что привело к резкому увеличению времени обучения до 810 мкс. При обучении TTE функциям меньшего числа переменных амплитуда тока этих сигналов была равна 0,2 мкА. Минимальное значение порога для функции Горнера 11 переменных равно 144 двенадцатое число Фибоначчи. Это означает, что -компаратор TTE должен чувствовать изменение его тока в рабочей области на 1144. Обучить TTE функции Горнера 12 переменных не удалось. Использование в синапсах TTE конденсаторов в качестве элементов аналоговой памяти имеет как положительные, так и отрицательные стороны. К положительным может быть отнесена простота реализации, а к отрицательным неспособность конденсаторов длительное время сохранять заряд из-за утечек через паразитные сопротивления. По этой причине приходится организовывать процесс обновления состояний конденсаторов, который по своей сути аналогичен процессу обучения, за исключением того, что его можно кратковременно прерывать. Если процесс обучения делает TTE нечувствительным к разбросу технологических параметров, то процесс обновления может отслеживать во времени медленные изменения эксплуатационных параметров например, питающего напряжения или температуры. Возникает вопрос, можно ли обойтись без процесса обновления аналоговой памяти Ответ на этот вопрос неоднозначен. По-видимому, можно, но для этого нужно использовать элементы долговременной аналоговой памяти, например память на подзатворных емкостях EEPROM, однако при этом возникает множество других проблем, требующих своего решения. Тем не менее интересен вопрос об устойчивости обученного состояния TTE к достаточно быстрым изменениям питающего напряжения, когда процесс обновления не может их отслеживать или когда он не нужен в случае использования элементов аналоговой памяти без утечек. Для ответа на этот вопрос была проведена следующая серия экспериментов. TTE обучался функциям Горнера 7, 8, 9, 10 и 11 переменных и определялись напряжения на конденсаторах синапсов в обученном состоянии. Этим функциям соответствуют минимальные пороги, равные 21, 34, 55, 89 и 144. Перед обучением с помощью SPICE-моделирования определялась для каждой из функций величина минимального скачка напряжения min на выходе -компаратора типа рис. 8 1 и устанавливались соответствующие ей пороги срабатывания усилителей. После обучения конденсаторы заменялись источниками напряжения, на которых устанавливались с точностью до милливольта напряжения, снятые с конденсаторов. Затем в режиме обновления на входы TTE подавалась обучающая последовательность наборов значений входных сигналов и определялась область допустимого изменения питающего напряжения, в которой на выходе генерировались правильные значения реализуемой функции. Результаты экспериментов приведены в таблице. Во втором столбце указаны значения минимальных порогов соответствующих функций Горнера, в четвертом допустимые изменения напряжения источника питания для случая, когда управляющие напряжения синапсов являются стабильными, т. е. в предположении, что напряжения на конденсаторах не изменяются. Из таблицы видно, что реализуемость TTE определяется величиной скачка min . Чем больше скачок, тем меньшие требования предъявляются к источнику питания. Согласно этой таблице, TTE, обучаемый функциям, зависящим от 11 переменных, находится около границы реализуемости из-за относительно малой величины min, принимая во внимание, что обучить TTE функции Горнера 12 переменных не удалось. В действительности напряжения на конденсаторах изменяются из-за паразитных токов утечки. Поэтому необходим режим обновления управляющих напряжений синапсов. Фактически в этом режиме продолжается процесс обучения, который в значительной степени парирует нестабильность эксплуатационных параметров, в том числе изменения напряжения источника питания. Так, эксперимент показывает, что при обучении TTE функции Горнера 10 переменных и обновлении обученного состояния допустимо синусоидальное изменение напряжения источника питания на 1,33 с частотой 1кГц. На основании проведенных экспериментов можно сделать вывод, что предложенный TTE вполне работоспособен при обучении пороговым функциям с порогом около 100. При этом, конечно, предъявляются достаточно жесткие, но абсолютно реальные требования к стабильности напряжения источника питания. Впрочем, любая аналого-цифровая схема, например АЦП и ЦАП, предъявляют к источнику питания аналогичные требования. Очевидно, что TTE может быть обучен реализации только пороговых логических функций. Согласно теории переключательных функций все пороговые функции являются монотонными. Минимальное представление монотонных функций совпадает с их сокращенной формой. Если сокращенная форма пороговой функции содержит только переменные без инверсий, она называется изотонной функцией подкласс монотонных функций. TTE с простейшими синапсами, каждый из которых содержит только один конденсатор в качестве элемента памяти, может быть обучен только изотонными пороговыми функциями. С другой стороны, все представители NPNклассов всех пороговых функций некоторого числа переменных могут быть выбраны среди изотонных пороговых функций. Напомним, что NPN-класс включает в себя все функции, полученные одна из другой путем инвертирования переменных, их перестановок и инвертирования функций. Отсюда следует, что с помощью только инвертирования переменных для любой пороговой функции можно найти ее изотонного представителя. Действительно, пусть некоторая изотонная пороговая функция переменных. Инвертируем некоторые из этих переменных, а другие переменные, оставим без изменения. Тогда где . Из этого выражения видно, что использование отрицательных весов в представлениях пороговых функций в виде 1 и 2 из работы 1 сводится к инвертированию переменных и наоборот. При этом веса переменных в -формуле должны быть дополнительно нормализованы на величину Отсюда следует, что для обучения TTE произвольной логической функции достаточно инвертировать на входе те переменные, которые имеют отрицательные веса, и обучение вести с помощью проверочной последовательности изотонного представителя этой функции. При использовании более сложных цепей синапса, например, с двумя элементами памяти для сохранения положительных и отрицательных весов, можно построить TTE, обучаемый произвольным пороговым функциям заданного числа переменных 2, однако возникают сомнения в целесообразности проектирования таких TTE из-за очень высокой сложности схемы синапса и увеличения в значительной степени времени обучения. Рассмотренный в статье TTE имеет много привлекательных свойств. Его схема очень проста и может быть реализована в КМОП-технологии 0,18 мкм. По-видимому, далее уменьшать длину канала транзисторов нецелесообразно, поскольку это связано с уменьшением напряжения питания, ухудшением характеристик транзисторов и увеличением паразитных токов утечек, что приводит к значительному ухудшению характеристики -компаратора TTE и его способности к обучению. Реализуемость TTE определяется только величиной минимального порога обучающей функции и не зависит от суммы весов входов ее переменных и их числа. Как было показано, ТТЕ может быть обучен сложным пороговым функциям любой пороговой функции до 11 переменных. В действительности он может быть обучен функциям с гораздо большим числом переменных, чем 11, т. е. всем функциям, порог которых не превосходит некоторой величины, на которую рассчитан его компаратор. Например, если максимальный порог равен 100, то ТТE с таким порогом может быть обучен функциям И на 100 входов, при этом гарантированно он может реализовать любую пороговую функцию 10 переменных. Важным фактором реализуемости TTE является то, что процесс обучения компенсирует разбросы всех технологических параметров элементов, из которых он построен, а процесс обновления зарядов конденсаторов синапсов в значительной степени компенсирует разбросы эксплуатационных параметров питающего напряжения и температуры. К недостаткам TTE данного типа можно отнести жесткие требования к стабильности напряжения источника питания, а также необходимость обновления зарядов конденсаторов синапсов в обученном состоянии. Тем не менее хочется верить, что рассмотренный TTE и процедура его обучения могут оказаться полезными во многих применениях, в том числе в области аппаратной реализации искусственных нейронов и нейронных сетей. На основе TTE может быть построен искусственный нейрон, например, заменой бинарных входов аналоговыми переменными. Однако такой подход ведет к слишком сильным искажениям входных переменных из-за пороговых напряжений на затворах транзисторов и нелинейностей их характеристик. Другим подходом к построению искусственного нейрона может быть использование АЦП для преобразования непрерывных входных сигналов в двоичные наборы, которые в свою очередь подаются на входы TTE, причем наборы, соответствующие тормозящим входам, подаются на входы TTE через инверторы. Допустимость такого подхода не вызывает сомнений, например, если АЦП преобразует аналоговый сигнал в 8-разрядный двоичный код, то 3 или 4 аналоговых входа потребуют 24 или 32 двоичных входа TTE, что вполне возможно, так как вряд ли потребуется реализация сложных логических функций. Однако при таком подходе возникают проблемы, связанные с обучением нейрона. Абсолютно не понятно, как строить обучающие последовательности, так как покоординатное обучение в этом случае неприемлемо и есть опасность, что TTE обучаться не будет. Вопрос же о реализации нейронных сетей вообще пока что не стоит. 