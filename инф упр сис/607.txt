МЕХАНИЗМЫ И ПОГРЕШНОСТИ  ВОСПРИЯТИЯ 3D-ПРОСТРАНСТВА ЗРИТЕЛЬНОЙ СИСТЕМОЙ 

отсутствие четких представлений о том, как формируется ощущение глубины пространства в зрительной системе человека, принуждает каждый раз опытным путем определять, возможно ли получить желаемый стереоскопический эффект при съемке данной сцены, и если да, то при каких параметрах. Цель статьи состоит в выявлении существенных для решения данной проблемы особенностей зрительного восприятия глубины 3D-пространства. Результаты: теоретические и экспериментальные исследования показали, что при небольших расстояниях наблюдения механизм зрения, основанный на стереоскопическом эффекте, позволяет оценивать расстояния до объектов с меньшей погрешностью, чем механизм зрения, основанный на перспективных преобразованиях. При больших расстояниях имеет место обратная ситуация. Предложена и экспериментально подтверждена гипотеза, которая объясняет возникновение ощущения глубины пространства при наблюдении реальных сцен и стереоскопических изображений «конвергенционно-дивергенционными» движениями глаз, что позволило разработать методику определения оптимальных условий стереоскопической съемки для достижения максимального стереоэффекта, а также методику выбора оптимальных параметров конвертации изображений и видео из 2D-формата в 3D-формат. Показано, что карта глубины стереоскопического изображения допускает весьма большие погрешности, не приводящие к заметным искажениям результирующего изображения. Практическая значимость: полученный результат делает возможным выполнение коррекции имеющихся стереоскопических изображений и фильмов. Знание факта, что карта глубины стереоскопического изображения допускает весьма большие погрешности, не приводящие к заметным искажениям результирующего изображения, позволяет существенно упростить процедуру конвертации 2D-изображения в 3D-изображение.

С середины первого десятилетия 21 века начинают интенсивно развиваться и внедряться в быт и промышленность 3D-технологии, в том числе технологии получения и демонстрации стереоскопических статичных изображений и видео. Сюда, в частности, относится открытие 3D-кинотеатров, появление в продаже доступных по цене 3D-телевизоров, 3D-фотокамер, приборов и приложений для конвертации 2D-изображений и видео в 3D-формат, услуг по изготовлению в 3D-формате растровых фотографий, а также продажа расходных материалов и оборудования для их изготовления. Отметим, что, строго говоря, во всех перечисленных случаях речь идет о стереоскопических изображениях, а термин 3D используется, скорее, в рекламных целях. Одновременно в Интернете появилось множество публикаций на эту тему, в том числе и на профессиональном уровне. В этих публикациях рассматриваются технологические особенности получения стереоскопических фотографий, а также съемки и технологии монтажа 3D-фильмов. Особенное место занимают публикации, касающиеся конвертации фотографий и фильмов в 3D-формат 13, а также многочисленные сайты, предлагающие скачать приложения для конвертации. В большинстве публикаций обычно приводятся лишь самые общие сведения об используемых методах 4, 5, что же касается предлагаемых приложений, то результаты их работы оставляют желать лучшего, в чем нетрудно убедиться путем их применения. Касаясь ситуации в России в этой области, отметим, что, по оценке журнала Деньги, в России рынок профессиональной 3D-визуализации по состоянию на 2010 г. отставал от мирового лет на 510, более поздних оценок найти не удалось 6. В частности, в журнале говорится, что развитие 3D-технологий в России тормозит проблема дефицита на рынке 3D-специалистов и отсутствие узкоспециализированного образования в этой отрасли. Характеризуя ситуацию, сложившуюся в этой области, следует отметить, что одной из причин, тормозящих развитие 3D-кинотеатров и 3D-телевидения, является недостаточное количество 3D-контента, которое, в свою очередь, обусловлено трудностями стереоскопической съемки. Отсутствие четких представлений о том, как формируется ощущение глубины пространства в зрительной системе человека, принуждает каждый раз опытным путем определять, возможно ли получить желаемый стереоскопический эффект при съемке данной сцены, а если да, то при каких параметрах. Эти же трудности возникают при конвертации 2D-фильмов в 3D-формат с той разницей, что переснять плохо конвертирующиеся сцены уже невозможно. Сказанное полностью относится и к получению 3D стерео фотографий. В случае наблюдения 3D-изображений, в отличие от наблюдения 2D-изображений, у зрителя в дополнение к оценке расстояния до каждого из изображенных объектов возникает еще ощущение глубины пространства благодаря бинокулярному зрению. Для прояснения ситуации рассмотрим проблему подробнее. Вначале рассмотрим работу механизмов, посредством которых в зрительной системе осуществляется оценка расстояния до каждого из объектов при наблюдении 3D-сцены, а затем механизм, создающий ощущение глубины пространства. Известно, что расстояние до наблюдаемого объекта зрительной системой человека оценивается рядом механизмов, погрешности которых сильно различаются между собой. Перечисляя кратко, отметим механизмы, основанные на определении размера проекций наблюдаемого объекта на сетчатки глаз при условии, что истинный размер объекта априори известен явлении стереоскопического эффекта, который обусловлен тем, что глаза зрителя разнесены по горизонтали на величину базы использовании явления аккомодации глаз использовании воздушной перспективы. Для того чтобы судить о роли этих механизмов при оценке расстояния до наблюдаемого объекта зрителем, найдем погрешность определения расстояния каждым из этих механизмов. При определении расстояния до объекта первым из перечисленных выше механизмов оценка погрешности обусловлена двумя статистически независимыми источниками. Во-первых, зритель не способен хранить в зрительной памяти абсолютно точные размеры объекта, например его высоту, а запоминает их с некоторой погрешностью . Это приводит к погрешности оценки расстояния до объекта Во-вторых, вследствие дискретного строения сетчатки, которое ограничивает остроту зрения углом, зрительная система не может абсолютно точно оценить размеры проекции объекта на сетчатку, а выполняет это с некоторой погрешностью . Поскольку оба источника погрешности статистически независимы, результирующая погрешность находится путем суммирования их дисперсий с последующим извлечением квадратного корня Переходя к выводу формул для расчета компонента погрешности, представим оптическую часть глаза зрителя в виде модели камеры с передней плоскостью изображения рис. 1. На этом рисунке жирными линиями показан объект вертикальная линия, координаты верхней точки которого, и его проекция, координаты верхней точки которой, . Кроме того, через обозначено фокусное расстояние зрачка глаза. Введем еще ряд дополнительных обозначений высота объекта высота проекции объекта расстояние от объекта до объектива камеры . Найдем вначале выражение для составляющей погрешности, для чего составим очевидную пропорцию решая которую относительно получим 2 Перейдем теперь к выводу формулы для расчета второго компонента погрешности оценки расстояния до наблюдаемого объекта рассматриваемым механизмом зрительной системы. Из подобия треугольников, и, следует, что Учитывая, что расстояние от объекта до зрачка, как было отмечено, запишем 3 Поскольку причиной погрешности оценки расстояния до объекта в рассматриваемом случае является погрешность определения размера его проекции на сетчатки глаз, обусловленная их дискретной структурой, то, как нетрудно видеть, ошибочное определение величины проекции дает значение расстояния 4 Решая это уравнение относительно, находим что с учетом формулы 3 после несложных преобразований дает Разделим числитель и знаменатель этой формулы на Поскольку, что следует из подобия треугольников, то, заменяя в формуле на, будем иметь Величина имеет смысл углового размера между двумя колбочками, спроецированными на плоскость, перпендикулярную оси наблюдения и совмещенную с объектом, т. е. угла, определяющего остроту зрения, который равен приблизительно одной минуте. С учетом этого запишем 5 Результирующая погрешность оценки расстояния до наблюдаемого объекта рассматриваемым механизмом зрительной системы, вычисляется по формуле 1. Перейдем теперь к выводу формулы для оценки погрешности расстояния до наблюдаемого объекта посредством механизма бинокулярного зрения. В качестве наблюдаемого объекта возьмем точку рис. 2, удаленную от линии, соединяющей зрачки левого и правого глаз наблюдателя, на расстояние . Вследствие того, что зрачки глаз смещены по горизонтали друг относительно друга на величину базиса, равного примерно 65 мм, их проекции на сетчатках глаз и также оказываются смещенными. В рассматриваемом примере на сетчатке левого глаза проекция точки смещена влево от центра сетчатки на величину, а на сетчатке правого глаза смещена вправо на величину . Сумма этих смещений называется линейным параллаксом 6 Из подобия треугольников и ЗЛ ЗП следует, что, следовательно Принимая во внимание равенство 6, получим окончательно 7 Обратим внимание на то, что формулы 3 и 7 имеют идентичную структуру. Следствием этого является то, что и формула для оценки погрешности измерения расстояния до наблюдаемого объекта на основе механизма бинокулярного зрения будет иметь структуру, идентичную структуре формулы 5, в чем нетрудно убедиться 8 В обоих случаях формулы для определения погрешностей различаются первыми слагаемыми знаменателей в одной, в другой . График зависимости величин погрешностей от расстояния наблюдения для двух сравниваемых механизмов зрения приведен на рис. 3. Расчет произведен по формулам 1, 2, 5 и 8. При расчетах приняты следующие исходные данные 0,00029, 0,065 м, 0,05. Кривые, построены для 1 0,5 и 0,2 м соответственно. Из графика следует, что при расстояниях наблюдения примерно до 11 м механизм зрения, основанный на стереоскопическом эффекте, позволяет оценивать расстояния до объектов с меньшей погрешностью, чем механизм зрения, основанный на перспективных преобразованиях, в то время как при больших расстояниях имеет место обратная картина. Практика полностью это подтверждает. Что касается оценки расстояния, обеспечиваемой другими перечисленными механизмами зрения, то погрешности, с которыми они это делают, несопоставимо больше погрешностей рассмотренных механизмов зрения, и поэтому рассматривать их в данном контексте не имеет смысла. Из физиологии зрения известно, что при наблюдении сцены или изображения оптические оси глаз совершают содружественные саккадические движения с интервалом около 5060 мс 7. Эксперименты Ярбуса показали, что при этом оси зрения фиксируются на световых границах объектов наблюдаемой сцены. Изображения, приведенные на рис. 4, иллюстрируют это. Для объяснения механизма возникновения у зрителя ощущения глубины пространства при наблюдении 3D-сцен и стереоскопических изображений нами была выдвинута следующая гипотеза. При рассматривании стереоскопического изображения оптические оси левого и правого глаз зрителя постоянно и синхронно сканируют это изображение, оставаясь в плоскости, параллельной линии надбровья. В момент пересечения вертикальных, или содержащих вертикальную составляющую, световых границ, образуемых изображенными объектами, они одновременно фиксируются на них в одних и тех же точках. При фиксации в зрительную систему посылается сигнал об угле между оптическими осями глаз, получив который, зрительная система вычисляет дистанцию от зрителя до точки фиксации на изображенном объекте. Благодаря тому, что при наблюдении стереоскопического изображения глаза зрителя в процессе сканирования постоянно совершают конвергенционно-дивергенционные движения, а зрительная система постоянно вычисляет дистанции от зрителя до точек фиксации на изображенных объектах, создается ощущение глубины пространства. При рассматривании плоской картины такого ощущения не возникает вследствие отсутствия конвергенционно-дивергенционных движений глаз при ее сканировании, хотя определение расстояния до изображенных объектов у зрителя затруднения не вызывает. Эти же процессы протекают в зрительной системе и при наблюдении 3D-сцен. Выдвинутая гипотеза подтверждается экспериментально. Знание этого механизма позволяет избегать неудачных композиций кадров при стереоскопической съемке фотографий и видео. Проиллюстрируем сказанное примерами. 1. Для возникновения у зрителя ощущения глубины пространства необходимо, чтобы в его поле зрения присутствовали резкие вертикальные световые границы рассматриваемых объектов или, по крайней мере, границы, включающие в себя вертикальную составляющую, например, достаточно крутые наклонные границы. Пример 2D-изображения такой сцены показан на рис. 5 9, а ее 2D цветное и стереоскопическое изображения в анаглифном формате приведены на рис. П1 и П2 приложения, размещенного на сайте 8. Отметим, что размытие границ, например вследствие плохой фокусировки, сильно снижает стереоэффект. 2. Если в фотографируемой сцене отсутствуют объекты с вертикальными или содержащими вертикальную составляющую границами, то при стереоскопической съемке такой сцены левое и правое изображения стереопары не будут между собой различаться. Поэтому изображение, получившееся в результате фотографирования, не будет вызывать ощущение глубины пространства рис. 6 10. 3. Рассмотрим теперь с позиций выдвинутой гипотезы так называемый эффект отжатия рамкой, хорошо известный кинематографистам, снимающим стереофильмы. Этот эффект заключается в том, что если снимаемый объект выходит за вертикальные границы кадра, ощущение глубины пространства ослабляется, при этом ослабление тем сильнее, чем большая часть объекта оказывается за пределами кадра. На рис. П3а и П3б сайта 8 приведены два стереоскопических изображения в анаглифном представлении, демонстрирующие это явление. Для объяснения причины возникновения данного эффекта обратимся к рис. 7, где показаны наложенные друг на друга контуры, соответствующие световым границам левого и правого компонентов стереопары стереоскопического изображения см. рис. П3а 8. Согласно предложенной нами гипотезе, при зрительном сканировании стереоскопического изображения оптические оси левого и правого глаз фиксируются на световых границах проекций объектов на сетчатки глаз, оставаясь в плоскости, параллельной линии надбровья. В данном примере это будет линия, параллельная горизонтальной границе изображения, показанного на рис. П3а 8. При рассматривании верхней части рисунка зритель увидит изображенную на нем часть объекта на расстоянии, соответствующем параллаксу расхождению контуров. При рассматривании же нижней части зритель увидит ее на том же расстоянии, что и рамка рисунка, потому что контуры, соответствующие световым границам изображенного объекта, сливаются с вертикальной границей изображения. Таким образом, при ограничении изображенного на рисунке объекта по бокам рамкой глубина рассматриваемой части объекта совпадает с глубиной рамки, отсюда и эффект отжатия рамкой. Понимание механизма эффекта отжатия рамкой позволило нам предложить способ, как его избежать. Но это будет тема другой статьи. Как было показано, бинокулярное зрение при оценке расстояний до наблюдаемых объектов координат глубины обеспечивает сравнительно небольшую погрешность только на небольших расстояниях наблюдения, и, по-видимому, его основная роль заключается в создании ощущения глубины пространства благодаря конвергенционно-дивергенционным движениям глаз при наблюдении сцены. В связи с этим возникает вопрос, насколько точно необходимо представлять карту глубины, например, при конвертации 2D-изображений в 3D-изображения или при представлении данных о стереоскопическом изображении в формате 2D Z, для того, чтобы зрителю при воспроизведении изображений погрешности представления глубины оставались бы незаметными. Для ответа на этот вопрос нами был поставлен следующий эксперимент. Посредством программы 3Ds Max в 3D-среде было размещено 3D-изображение головы человека виртуальный объект. Затем с помощью двух виртуальных камер, помещенных в эту среду, были получены два изображения, которые составили стереопару. Далее, по измеренным величинам параллаксов для каждого соответствующего пикселя этих изображений рассчитывалась карта глубины для 3D-изображения головы человека представляемой стереопары. На рис. П4а 8 приведено изображение головы человека виртуального объекта, полученное путем фотографирования 3D-изображения спереди на рис. П4б показано стереоскопическое изображение в анаглифном представлении, полученное путем фотографирования 3D-изображения двумя виртуальными камерами, а на рис. П4в показана карта глубины, рассчитанная указанным способом. Затем было сформировано анаглифное стереоскопическое изображение, при изготовлении которого была использована сильно упрощенная примитивная карта глубины рис. П5а 8 анаглифное стереоскопическое изображение, соответствующее этой карте глубины, приведено на рис. П5б 8. Несмотря на то, что карты глубин, показанные на рис. П4в и П5а 8, даже не сопоставимы по своему виду, столь сильно они разнятся между собой, изображение на рис. П5б смотрится так же хорошо, как и изображение на рис. П4б. На рис. П5в 8 приведено анаглифное изображение, при изготовлении которого была использована упрощенная карта глубины в виде криволинейной поверхности. И в этом случае на изображении нет заметных зрителю искажений. Для сравнения на рис. П6 8 показано так называемое псевдостереоскопическое изображение в анаглифном формате, которое отличается от стереоскопического тем, что для всех пикселей левого и правого изображений стереопары параллакс сделан одинаковым. В этом случае, как нетрудно видеть, возникает эффект плоского изображения, смещенного по глубине относительно плоскости стереоскопического окна на некоторую постоянную величину, определяемую величиной параллакса. Таким образом, эксперименты показали, что стереоскопическое изображение допускает большие искажения параллакса, следовательно, допустимы большие погрешности карты глубины без возникновения заметных зрителю искажений на стереоскопическом изображении. Эта особенность зрительной системы позволяет упростить процесс конвертации 2D-изображений в 3D-изображения. В заключение отметим, что принципиальной особенностью наблюдения 3D-сцен и изображений, которая отличает их от наблюдения 2D-изображений, является возникновение ощущения глубины за счет бинокулярного зрения. При этом важно четко представлять как роль отдельных зрительных механизмов в оценке расстояний до наблюдаемых объектов, так и механизм, посредством которого формируется ощущение глубины пространства. Отсутствие количественной теории, описывающей работу этих механизмов, приводило к необходимости опытным путем определять как условия съемки стереоскопических фотографий и видео 3D-видео, так и алгоритмы конвертации изображений и видео из 2D-формата в 3D-формат. В результате проведенных исследований нами была выдвинута и экспериментально подтверждена гипотеза конвергенционно-дивергенционных движений глаз. Эта гипотеза не только объясняет, каким образом формируется ощущение глубины пространства, но и указывает, как правильно построить кадр для того, чтобы максимально обеспечить стереоэффект, объясняет роль вертикальных и горизонтальных границ, роль фокусировки, что и почему приводит к возникновению эффекта отжатия рамкой и т. д. Кроме того, в результате исследований было показано, что карта глубины стереоскопического изображения допускает весьма большие погрешности в процессе ее формирования, не приводящие к заметным искажениям результирующего изображения. 