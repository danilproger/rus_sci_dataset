АЛГОРИТМ ИЗМЕРЕНИЯ УГЛОВЫХ КООРДИНАТ  ЛИНИИ ВИЗИРОВАНИЯ ОПЕРАТОРА 

Рассматривается один из возможных вариантов построения нашлемной системы обзора и целеуказания, а также приводится алгоритм вычисления угловых координат оптической оси нашлемного видеодатчика, принимаемой в качестве линии визирования оператора.

Неотъемлемой частью современных видеокомпьютерных бортовых систем самолетов, вертолетов и т. п. является нашлемная система позиционирования НСП, предназначенная для повышения точности решения задач обзора оператором внешней обстановки, целеуказания и автоматического сопровождения объектов 13. Принцип работы НСП в составе бортовой оптико-механической системы состоит в том, что оператор, экипированный шлемом с закрепленными на нем специальными очками со встроенным микродисплеем, поворотом головы меняет в пространстве направление своей линии визирования, отслеживаемой видеодатчиком ВД оптико-механической системы с помощью НСП, при этом изображение с ВД передается на микродисплей шлема 4. Направление визирной линии оператора зависит не только от поворота его головы, но и от положения зрачков его глаз. Поэтому в определенной мере целесообразна замена истинной визирной линии оператора искусственной, например, оптической осью ВД, закрепленного на шлеме оператора, изображение с которого также можно подавать на микродисплей очков рис. 1. Направление оптической оси ВД, отмечаемое перекрестием на его изображении, не обязательно в точности должно соответствовать естественной визирной линии оператора, который при целеуказании движением головы шлема оператора должен оптическую ось в дальнейшем будем называть ее визирной линией оператора направить строго на объект совместить на изображении объект с перекрестием. Использовать такой ВД с изменяемым полем зрения есть смысл в режиме целеуказания при нахождении объекта интереса непосредственно в поле зрения оператора. В данной работе для измерения угловых координат направления оптической оси нашлемного ВД иначе угловых координат положения шлема оператора используется оптический способ. Для этого на шлеме закрепляют светодиоды, играющие роль реперных точек для видеокамеры измерительной системы НСП. Количество и размещение светодиодов определяется алгоритмом измерения угловых координат линии визирования и необходимой точностью измерения. В разрабатываемой системе предлагается использовать четыре светодиода, три из которых образуют основной реперный треугольник, а четвертый, размещенный сбоку, образует с двумя ближайшими к нему реперами дополнительный реперный треугольник. На рис. 1 показаны основной затенен и дополнительный реперные треугольники. По умолчанию подразумевается, что речь будет вестись об основном реперном треугольнике. Ориентация треугольника описывается системой координат, привязанной к треугольнику так, что точка совпадает с одним из реперов, ось проходит через два репера, плоскость является плоскостью треугольника, а ось перпендикулярна плоскости треугольника и образует правую систему координат рис. 2. Будем считать, что на этапе производства оборудования НСП измерена ориентация и положение реперного треугольника относительно системы координат, связанной со шлемом оператора. Система координат шлема ориентирована так, что одна из осей совпадает с оптической осью ВД ось, рис. 2, закрепленного на шлеме. Таким образом, определив расположение в пространстве системы координат, привязанной к реперному треугольнику, можно вычислить ориентацию шлема и направление оптической оси оператора. Вычислять положение и ориентацию реперного треугольника предлагается с помощью измерительной системы НСП, которая реализуется с использованием одной видеокамеры рис. 3. В задачу измерительной системы входит определение пространственных координат реперных точек в ее системе координат и пересчет измеренных координат в систему координат строительных осей летательного аппарата носителя с переводом их в угловые координаты визирной линии оператора в этой системе. Конструктивное размещение светодиодов должно быть таким, чтобы они всегда находились в поле зрения видеокамеры измерительной системы. Для выполнения указанного условия может потребоваться большее количество светодиодов, позволяющих определить направление визирной линии оператора в широких диапазонах изменения положения и ориентации шлема оператора. Модель изображения, формируемая ВД измерительной системы НСП, может быть представлена следующим образом. На изображении, формируемом ВД, светодиоды центры изображения светодиодов представлены точками, и рис. 4. Координаты центров изображений светодиодов, в плоскости изображения каждого кадра измерительная система координат определяются в блоке определения координат оптико-механической системы 5. Оптической оси ВД соответствует точка на изображении. Считается известным угловое поле зрения ВД, которому соответствует прямоугольное изображение, формируемое ВД, размером 2 2 . По измеренным значениям, и известным расстояниям между светодиодами замеряются на этапе производства шлема на момент получения видеокадра вычисляются пространственные координаты реперов в измерительной системе координат, по которым определяются угловые координаты линии визирования оператора. Примем в качестве модели изображения, формируемого ВД с полем зрения 2 2, изображение размером 2 2, получающееся на чувствительной прямоугольной пластине, перпендикулярной к оптической оси ВД и расположенной на расстоянии от точки центра оптической системы ВД. Построение модели изображения осуществляется при условии, что любая произвольная точка пластины воспринимает только световой поток луча, проходящего через данную точку и центр ВД рис. 5, точка на рисунке не показана для упрощения иллюстрации. Указанная модель изображения в некотором масштабе, зависящем от величины и фокусного расстояния линзы, будет повторять изображение, формируемое ВД. В дальнейшем под создаваемым ВД изображением будем понимать изображение на плоском прямоугольнике, размеры которого определяются величинами, . Для вычисления угловых координат оптической оси нашлемного видеодатчика рассмотрим векторы пространственно ориентированные на реперные светодиоды, . Проекции векторов на оси системы координат с учетом параллельности плоскостей и равны, . Таким образом, координаты векторов в системе координат равны 1 Изменение модуля вектора не меняет его направления, поэтому можно перейти к рассмотрению векторов с координатами 2 где, представление соответствующих величин в пикселях реально обрабатываемого изображения. Рассматривая треугольники, с использованием теоремы косинусов можно записать следующие выражения 3 Угол между векторами и равен углу между векторами и поэтому его можно вычислить по выражению 4 Углы, вычисляются аналогично. В НСП расстояния между светодиодами, являются известными величинами измерены. Поэтому выражения 3 можно рассматривать как систему трех уравнений с тремя неизвестными, расстояния от оптического центра ВД до центров светодиодов. Уравнения в 3 относительно каждой переменной имеют второй порядок. Поэтому решить систему представляется возможным, например, следующим способом. Решим в символьном виде первое уравнение относительно неизвестной, являющееся квадратным уравнением. Получившиеся два корня поочередно подставим во второе уравнение. Аналогично поступим с третьим уравнением, решим его символьно относительно неизвестной и подставим корни во второе уравнение. В результате из второго уравнения системы 3 получим нелинейное уравнение четвертого порядка, решение которого можно найти аналитически или численными методами в диапазоне допустимых расстояний от ВД до светодиодов. В результате решения системы уравнений 3 получим шестнадцать возможных решений. Решения, содержащие отрицательные значения или не укладывающиеся в диапазон допустимых значений, можно сразу отбросить, так как расстояния от ВД до светодиодов неотрицательные величины и имеют диапазон значений, ограниченный физическими возможностями оператора по перемещению в кабине носителя головы шлема и расположением оператора относительно ВД системы позиционирования. Для общности будем учитывать все шестнадцать решений. По значениям расстояний от центра ВД до светодиодов, и координатам векторов указывающих направление на светодиоды, можно вычислить координаты светодиодов в системе координат ВД . Получив шестнадцать наборов возможных координат вершин реперного треугольника, перейдем к процедуре поиска единственного истинного решения. По вычисленным координатам точек, и измеренному, например на этапе производства, взаимному расположению всех светодиодов легко найти в системе координат координаты точки, . В результате в общем случае получим шестнадцать наборов координат точек, и для каждого решения системы 3. Для выбора истинного решения необходимо сравнить направление вектора вектор направлен из начала координат точки в вычисленную точку с направлением вектора Только для одного истинного решения направления векторов и совпадут. Если решение системы уравнений 3 было получено с использованием численных методов, то выбирать решение, описывающее положение реперного треугольника в пространстве, следует такое, чтобы абсолютное значение угла между вектором соответствующего решению системы 3, и вектором было как можно меньше. По координатам вершин реперного треугольника легко определить ориентацию реперного треугольника в пространстве в текущий момент времени. Для этого следует вычислить направляющие косинусы базиса системы координат в системе координат ВД . Таким образом, можно найти углы Эйлера, показывающие поворот системы координат реперного треугольника относительно системы координат ВД НСП. Будем считать, что измерены углы поворота системы координат реперного треугольника относительно системы координат ВД НСП в момент юстировки. Тогда легко вычислить текущие угловые координаты линии визирования оператора как разность текущих углов поворота и углов поворота в момент юстировки системы координат реперного треугольника относительно измерительной системы НСП. Таким образом, решена задача вычисления угловых координат линии визирования оператора. Использование НСП в комплексе бортового оптикоэлектронного оборудования позволяет расширить возможности последнего, повысить точность решения задачи автоматического сопровождения объектов, уменьшить нагрузку на оператора. Исследования выполнены при поддержке государственного контракта П1002 от 27 мая 2010 г., заключенного с Министерством образования и науки. 