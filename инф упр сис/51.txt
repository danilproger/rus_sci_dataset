РАСЧЕТ  СИСТЕМ  СО  СЛУЧАЙНЫМ  ВЫБОРОМ НА  ОБСЛУЖИВАНИЕ 

Проверка на имитационной модели известных частных методов расчета систем с очередями при случайном выборе на обслуживание выявила заметные ошибки в высших моментах распределения времени ожидания. Предлагается решать задачу построением вложенной цепи Маркова, описывающей изменение числа заявок в очереди на моменты перед завершением обслуживания в многоканальной системе — до выбора меченой заявки. Конечный результат получен в виде преобразования Лапласа распределения времени ее ожидания. Алгоритм тестирован на модели с простейшим входящим потоком и обобщен на рекуррентный поток. The verification of known special approaches to queuing systems with random choice by imitation has detected noticeable errors in the high order moments of waiting time distribution. It is proposed to construct embedded Markov chain which describe the changing of queue length in multi-channel system before service completing – until the marked demand is selected. The final result is the Laplace transform of waiting time distribution. An algorithm is tested for Poissonian input flow and generalized for recurrent flow.

Подавляющее большинство работ по теории очередей посвящено системам с выборкой из очереди по принципу FCFS первый пришел первый обслужен. Однако значительный интерес вызывает и другой принцип случайный выбор из очереди RANDOM. Он особенно типичен для связных приложений и ситуаций с разъездными бригадами обслуживания ремонтными, аварийными, скорой помощи, групп быстрого реагирования и т.п., где очередность обработки заявок не определяется моментами их поступления. Различные подходы к этой задаче предлагаются или воспроизводятся в работах 17. В работах 2, 3, 6 обсуждаются чисто марковские системы В частности, в них выводятся формулы для коэффициентов увеличения высших моментов времени ожидания в сравнении с дисциплиной FCFS В статье Кингмана 5 выполнен анализ системы 1, к сожалению, не доведенный до расчетных зависимостей. Дисперсия времени ожидания для этой же системы приводится в справочнике Дж. Мартина 1. В работе Розенлунда 7 для модели получены преобразования ЛапласаСтилтьеса ПЛС распределения времени ожидания и рекуррентный алгоритм вычисления моментов. Фрагмент его итоговой таблицы приведен в табл. 1. Наконец, в статье Картера и Купера 4 рассматриваются системы и Здесь подтверждены известные результаты для систем и 1, рассчитана система 1. Все перечисленные результаты выводятся весьма громоздкими методами, к тому же различными для разных классов моделей, с трудно прослеживаемой аргументацией и с привлечением эвристических приемов. Это делает весьма желательной их проверку на простой и надежной имитационной модели. В табл. 2 приведены результаты имитационного моделирования системы 3 c дисциплинами FCFS и RANDOM при 500 тыс. испытаний. Средний интервал между заявками предполагался единичным, интенсивность обслуживания выбиралась через заданный коэффициент загрузки . Аналитические результаты хорошо согласуются с имитационной моделью FCFS c учетом общеизвестного нарастания погрешностей при увеличении порядка моментов и коэффициента загрузки системы. Переделка модели под выбор из очереди затронула лишь четыре оператора программы, и в ней было невозможно ошибиться. Правильность RANDOM-модели подтверждается и практическим совпадением средних времен ожидания. Однако отношения высших моментов заметно отличаются от приведенных в табл. 1, что вынуждает поставить вопрос о новых методах расчета систем обслуживания с RANDOM-дисциплиной. Рассмотрим режим полной занятости системы и обозначим максимальную длину очереди распределение интервалов между последовательными завершениями обслуживания распределение интервала от прибытия меченой заявки до ближайшего завершения обслуживания интенсивность входящего потока. Вычислим вероятности прибытия ровно заявок за время до ближайшего обслуживания и с заменой на аналогичный набор вероятностей прибытия ровно заявок за время между смежными обслуживаниями. Введем также вектор стационарного распределения вероятностей длины очереди в момент прибытия меченой заявки. Построим вложенную цепь Маркова изменения числа заявок в очереди непосредственно перед очередным выбором на обслуживание. Элементы матрицы переходов за время ожидания первого обслуживания должны вычисляться согласно было заявок, пришли меченая и еще 1 0. Дробный множитель учитывает вероятность невыбора меченой и, следовательно, продолжения процесса. Процесс завершается выбором меченой заявки с вероятностью 1 . Вектор-столбец определяет вероятности перехода в состояние. Его компоненты процесса переходы на интервалах между смежными обслуживаниями возможно при начальных состояниях Соответственно переход получается после прибытия 1 заявок одна заявка уходит сразу после начала отсчета интервала. Итак, элементы новой матрицы а элементы нового вектора вероятностей поглощения Введем ПЛС временных распределений от прибытия меченой заявки до ближайшего обслуживания между смежными завершениями обслуживания ожидания меченой заявки, завершаемого через шагов марковской цепи, 1, 2, Нетрудно видеть, что Суммируя эти выражения по всем, находим Искомые распределения могут быть получены численным дифференцированием точнее, построенного в окрестности 0 интерполяционного многочлена с последующей сменой знака у нечетных производных. Описанную расчетную схему целесообразно тестировать применительно к простейшей ситуации с показательными распределениями. При этом нет проблем с потоком заявок все остаточные распределения остаются показательными с исходным параметром, а связанные с процессом обслуживания распределения суть и соответственно При 1, коэффициенте загрузки 0,7 и шаге 10 для построения таблицы при интерполировании по Стирлингу были получены значения моментов времени ожидания 1,1479, 7,3481, 91,338. Соотнесенные с аналогичными результатами при дисциплине FCFS, они дают коэффициенты роста 1,0000, 1,3706, 2,4339. Хорошее их согласие с полученными на имитационной модели позволяет считать основной алгоритм правильным и применить его к более сложным случаям с немарковским распределением обслуживания и произвольным рекуррентным потоком заявок. В данном случае получение распределения интервалов до очередного обслуживания становится самостоятельной проблемой. Дополнительная функция распределения ДФР интервала от прибытия меченой заявки до ближайшего завершения обслуживания может быть подсчитана согласно 1 Для работы с этой формулой вычислим моменты через моменты, аппроксимируя ДФР последнего распределением Вейбулла 2 с моментами Подставляя 2 в формулу 1, убеждаемся, что интересующее нас распределение вновь описывается формулой 2 с заменой на . Соответственно вычисляются и его моменты. Вторым удобным вариантом аппроксимации ДФР является гиперэкспоненциальная . В этом случае параметры ДФР определяются по трем моментам исходного распределения, а остаточного по трем модифицированным Соответственно Моменты этого распределения Для основного режима марковской цепи приходится строить распределение интервалов между смежными завершениями обслуживания в -канальной системе. Здесь см. 3 В данной ситуации аппроксимация распределениями Вейбулла не имеет смысла, а гиперэкспоненциальная аппроксимация приводит к Ее моменты можно считать по формулам Далее по найденным моментам подбирается аппроксимация, обеспечивающая удобное вычисление . В частности, для гамма-плотности параметры выражаются через среднее и дисперсию согласно Теперь Применение гамма-плотности с поправочным многочленом, который строится на основе теории обобщенных многочленов Лагерра, позволяет выравнивать число моментов. При этом сохраняется возможность рекуррентного вычисления, но по более сложному алгоритму. При рекуррентном входящем потоке общего вида приходится учитывать следующие дополнительные обстоятельства. 1. Для начального шага марковской цепи коэффициенты считаются как вероятности прибытия ровно заявок рекуррентного потока за интервал между смежными обслуживаниями отсчет времени начинается с прибытием меченой заявки. 2. На последующих шагах расчет начинается с завершения очередного обслуживания, которое приходится на случайную точку интервала между смежными заявками. Соответственно, поток заявок представляется как рекуррентный, а интервалы между обслуживаниями не модифицируются. Рассмотрим способ расчета распределения числа событий рекуррентного потока на фиксированном интервале времени. Пусть есть функция распределения суммы независимых случайных величин, подчиняющихся распределению Очевидно, вероятность неприбытия заявок а вероятность появления ровно 1 требований потока Обозначим через ПЛС от плотности распределения Тогда производящая функция ПЛС интересующих нас вероятностей Здесь есть средний интервал между смежными заявками, а дробь перед суммой ПЛС от распределения интервалов между ними. Таким образом, для рекуррентного потока через обозначен оператор обратного ПЛС. Контрольное суммирование ПЛС дает 1, откуда следует равенство суммы единице. Произведение сверток в последней формуле имеет прозрачную вероятностную интерпретацию чтобы за время пришло ровно заявок, в него должны уложиться полных интервалов между заявками и один остаточный последний. Напомним, что отсчет времени здесь начинается сразу после прибытия очередной заявки. В случае рекуррентного потока интервал времени до прибытия первой заявки является случайной модификацией типового. Это позволяет по аналогии с предыдущим вариантом сразу записать итоговые формулы в виде Условие нормировки здесь проверяется и выполняется аналогично. Эти выражения должны интегрироваться с учетом вышеуказанных распределений длительности шагов марковской цепи. Результаты статьи позволяют с единых позиций подойти к расчету ПЛС распределения времени ожидания для многоканальных систем со случайным выбором заявок из очереди и произвольными распределениями длительности обслуживания и интервалов между заявками. 