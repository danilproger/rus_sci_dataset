КМОП-РЕАЛИЗАЦИЯ ОБУЧАЕМОГО ПОРОГОВОГО  ЛОГИЧЕСКОГО ЭЛЕМЕНТА ЧАСТЬ 1: ПРОЕКТИРОВАНИЕ И СХЕМА ОБУЧЕНИЯ 

показать возможность реализации в КМОП-технологии, использующей современные проектные нормы, аналого-цифрового искусственного нейрона на примере построения логического порогового элемента, обучаемого сложным пороговым логическим функциям. Методы: представление нейрона МакКаллока — Питтса в виде отношения суммы взвешенных входов к порогу и разработка методики построения обучаемого порогового элемента, состоящего из синапсов, проводимость которых определяется входными переменными и их приведенными к порогу функции весами, накапливаемыми в процессе обучения на элементах аналоговой памяти; высокочувствительного компаратора, сравнивающего суммарную проводимость синапсов с проводимостью p-канальной части компаратора, представляющей наибольшее возможное значение порога; трех выходных усилителей с разными значениями порогов срабатывания. Результаты: показано, что реализуемость такого обучаемого порогового элемента зависит только от величины порога и не зависит от суммы весов входов и их числа. Элемент может быть обучен реализации произвольных пороговых логических функций, порог которых не превосходит некоторой заданной величины. Рассматриваемая в статье схема элемента ориентирована на максимальное значение порога, равное 89, и может реализовать любую пороговую функцию 10 переменных. Предложена схема обучения порогового элемента, которая осуществляет параллельное формирование весов активных входов и автоматический выбор величины шага обучения. Все практические результаты в работе получены с использованием SPICE-моделирования схем, построенных в КМОП-технологии 0,18 мкм. Практическая значимость: существенно расширены функциональные возможности обучаемого порогового элемента, который может быть использован в системах логического распознавания образов, а также при создании нового поколения нейрочипов.

Аппаратная реализация искусственного нейрона имеет ряд известных преимуществ по сравнению с программной реализацией 15. По этой причине еще 25 лет назад промышленность начала выпускать нейрочипы, ориентированные на решение определенного круга задач. В этих нейрочипах нейроны реализованы в виде программируемых контроллеров. Однако можно себе представить и другой тип аппаратной реализации нейрона в виде аналоговой или цифроаналоговой схемы устройства. Каждый тип реализаций имеет свои преимущества, недостатки и области применения. Аналоговые и цифро-аналоговые реализации имеют преимущество очень высокой производительности, однако их аналоговая часть накладывает жесткие ограничения на класс реализуемых пороговых функций в силу аналоговой природы. Этот недостаток значительно уменьшает функциональные возможности нейронных сетей, которые имеют фиксированное количество нейронов. Функциональная мощность нейрочипа в равной степени зависит как от числа нейронов, которые могут быть размещены на одной СБИС, так и от функциональных возможностей одного нейрона. К сожалению, влияние этих параметров на функциональную мощность нейрочипа еще не изучено. Очевидно, что при разработке новых нейрочипов следует уменьшать площадь, занимаемую как самим нейроном, так и его синапсами, число которых может быть достаточно большим, а также расширять функциональные возможности нейрона. В этой связи имеет смысл рассмотреть вариант использования цифро-аналоговых нейронов, требующих несравнимо меньшего числа транзисторов, чем программируемые контроллеры. Известны попытки построения искусственного нейрона как импульсного, так и потенциального типов в виде аналоговой схемы из операционных суммирующих усилителей или схемы суммирования токов на токовых ключах. Типичные исследования этого вопроса описаны в работах 68. Рассматриваемые в них модели нейронов предназначены для решения достаточно простых частных задач и имеют малое число входов с фиксированными весами. Существуют работы, например 9, в которых предложены варианты сети из искусственных нейронов аналогового типа, допускающих формирование весов входов в процессе обучения. Более интересными являются цифро-аналоговые реализации искусственного нейрона на основе МОП-технологии. К таким реализациям относятся так называемые neuron-MOSFET схемы 35, 10, 11, построенные из транзисторов с плавающими затворами, соединенными через конденсаторы с входами. Веса входов представлены напряжениями на конденсаторах. В этих работах рассматривается возможность реализации простейших пороговых булевых функций и возможность обучения путем изменения напряжений на конденсаторах. Далее будем рассматривать только простейший вариант нейрона обучаемый логический пороговый элемент, который может быть реализован в КПОМ-технологии. На входы такого нейрона подаются не аналоговые, а двоичные переменные. Профессором В. И. Варшавским был предложен 12 новый тип порогового элемента -DTE -driven threshold element -управляемый пороговый элемент, которому необходим один транзистор на логический вход. Этот элемент использует специальное представление пороговой функции в форме отношения, которое может быть реализовано путем сравнения проводимостей и -канальной подсхем элемента. Отношение проводимостей этих частей зависит от отношений крутизны характеристик и -транзисторов, которая обычно обозначается как . По этой причине элемент и назван -управляемым. Такой пороговый элемент может очень экономично реализовать любые пороговые функции, но не более чем трех от силы четырех переменных из-за возможного разброса технологических параметров транзисторов. Принимая во внимание, что разброс технологических параметров транзисторов может быть компенсирован только в процессе обучения, В. И. Варшавский с целью увеличить логические возможности порогового элемента предложил 13, 14 схему искусственного нейрона, построенную на основе -DTE, которая обучается пороговым логическим функциям. Эта схема состоит из синапсов, -компаратора и выходного усилителя. Обучаемый синапс содержит пять транзисторов и один конденсатор. Такой нейрон обладает одним замечательным свойством его реализуемость зависит только от величины порога и не зависит от количества логических входов и их весов, в то время как реализуемость схем, использующих другие подходы, зависит от суммы весов входов и порога, за исключением, быть может, neuron-MOSFET подхода. Этот факт в сочетании с относительно низкой сложностью делает нейрон на основе -DTE очень привлекательным для использования в следующем поколении цифроаналоговых нейрочипов. Искусственный нейрон, предназначенный для реализации логических пороговых функций, правильнее называть обучаемым пороговым элементом trainee threshold element TTE. Во время обучения это устройство создает аналоговые веса для двоичных цифровых входных переменных. Очевидно, что искусственный нейрон с аналоговыми входами может быть построен на основе TTE. В дальнейших работах В. И. Варшавского совместно с автором этой статьи 1519 была доказана принципиальная возможность реализации TTE в КМОП-технологии, построенного на основе -DTE и обучаемого произвольным пороговым булевым функциям вплоть до 12 переменных. Был предложен эффективный способ обучения таких элементов, решена проблема поддержания обученного состояния, исследованы предельные функциональные возможности элементов, а также вопросы устойчивости полученных решений относительно изменений внешних факторов. Все эксперименты проводились с использованием SPICE-моделирования для технологии 0,8 мкм при напряжении питания 5 В. Известно, что с уменьшением размеров транзисторов ухудшаются их характеристики и уменьшается напряжение питания, что является немаловажным фактором при разработке аналоговой части устройств. Представляет интерес ответ на вопрос, до каких пределов допускается уменьшение размеров транзисторов при построении цифро-аналоговых устройств Данная статья преследует две цели. С одной стороны, необходимо ответить на вопрос, допустима ли реализация TTE при использовании современных технологических норм В данном случае переход на другую технологию не может быть решен на основе масштабирования ранее разработанных схем и является достаточно сложной проблемой. В статье показано, что использование технологии 0,18 мкм и переход на напряжение питания, равное 3 В, вполне допустимы. По-видимому, для TTE дальнейшее уменьшение размеров транзисторов и напряжения питания является нецелесообразным, так как это ведет к существенному снижению его функциональных возможностей. Вторая цель заключается в том, что указанные выше публикации являются англоязычными, поэтому представляется целесообразным повторить некоторые изложенные в них результаты для русскоязычного читателя. К сожалению, без этого первая цель не может быть достигнута. Математическая модель нейрона, появившаяся в работах МакКаллока и Питтса 20, является пороговой функцией 1 где вес -го входа пороговое значение. Из представления пороговой функции в виде 1 следует, что пороговый элемент традиционно реализуется в виде структуры, показанной на рис. 1. Для построения порогового элемента с регулируемыми входными весами введена 13, 14 так называемая сокращенная форма отношения 2 что приводит к схеме -компаратора, показанной на рис. 2, где . Напряжение на выходе -компаратора определяется отношением крутизны и вольт-амперных характеристик и -цепей. По этой причине пороговый элемент называется -управляемым. Крутизна характеристики -цепи формируется путем параллельного соединения транзисторов соответствующей ширины, определяющей веса входов . Схема, эквивалентная схеме на рис. 2, показана на рис. 2, . Выходное напряжение -компаратора определяется значением следующим образом Если выходное напряжение КМОП-пары см. рис. 2, 2, это означает, что оба транзистора находятся в ненасыщенном режиме, поскольку они оба удовлетворяют условию, . Здесь для простоты принято, что пороговое напряжение для обоих транзисторов одинаковое. Следовательно 3 Из этих уравнений, положив, 3 В, 0,5 В для транзисторов 0,18 мкм, путем несложных преобразований можно получить Легко видеть, что при 1 в точке 2 т. е. предложенная схема компаратора имеет чувствительность, приблизительно равную 1,3 В в этой точке. Следовательно, на уровне порога переключения выходного инвертора 2 реакция -компаратора на минимально возможное изменение единичное суммы весов входов имеет вид 1,3 В, т. е. линейно уменьшается с ростом порога функции. Например, если 100, единичное изменение суммы весов входов приводит к скачку напряжения, равному 13 мВ, в районе 2 1,5 В, что явно недостаточно для надежного срабатывания выходного усилителя инвертора. Анализ 12 устойчивости DTE к изменению параметров показал, что с помощью DTE можно реализовать пороговые функции только с низкими значениями порога три, максимум четыре. Однако искусственный нейрон это обучаемый объект, и вариации нескольких параметров например, технологических могут быть компенсированы во время обучения. Обучаемый TTE, построенный на основе DTE, имеет достаточно простое управление входным весом рис. 3 управляющее напряжение изменяет эквивалентную крутизну -го синапса с входом . Поскольку синапс может быть в одном из двух состояний проводящем или непроводящем, выходное напряжение -компаратора формируется только синапсами, которые проводят ток в данный момент. Очевидно, что после достижения выходным напряжением -компаратора порогового значения 2 добавление новых синапсов не изменяет состояние выхода TTE. Из этого можно заключить, что реализуемость DTE и, следовательно, TTE на его основе зависит только от порогового значения и не зависит от количества входов и суммы их весов 12. Важным аспектом является чувствительность -компаратора к изменениям тока через него в районе пороговой точки. Поскольку диапазон изменения выходного напряжения -компаратора находится в пределах 0, единственным способом увеличения крутизны характеристики -компаратора в пороговой точке является увеличение нелинейности зависимости выходного напряжения -компаратора от отношения . Итак, при больших значениях порога функции помехоустойчивость TTE становится особенно важной. Она определяется наименьшим изменением выходного напряжения min -компаратора при достижении порогового значения. Скачок напряжения на выходе -компаратора, равный min, может возникнуть при подключении к -компаратору, находящемуся в предпороговом состоянии, синапса с минимальным весом входного сигнала, т. е. определяется минимальным током синапса. Помехоустойчивость и, следовательно, реализуемость заданных логических функций TTE зависит не только от величины min, но и от положения порога характеристики -компаратора относительно порога выходного усилителя. Далее будет рассмотрен метод обучения TTE заданной логической функции. Этот метод не только позволяет автоматическое позиционирование порога усилителя относительно середины скачка напряжения min, но также увеличивает min до максимально возможного значения, т. е. maxmin, которое достигается при нахождении минимального порога функции и определяется крутизной характеристики -компаратора. Этот метод использует три выходных усилителя с различными пороговыми значениями, которые обеспечивают необходимую ширину гистерезиса порога. Ширина этого гистерезиса определяет значение maxmin, достижимое при обучении. Для повышения чувствительности -компаратора его транзисторы должны быть в насыщенном режиме, когда выходное напряжение компаратора находится в зоне порога переключения выходного усилителя. Это может быть продемонстрировано на примере эквивалентной схемы компаратора см. рис. 2, . Пусть на затворы обоих транзисторов подается не заземление и источник напряжения, а напряжения между затвором и истоком и такие, что оба транзистора находятся в режиме насыщения, когда 2. Для простоты предположим, что и 0 2 здесь напряжение источника питания, а порог транзистора. Тогда уравнения для тока, протекающего через транзисторы, могут быть представлены в виде 4 где параметры и отражают небольшое увеличение тока транзистора, которое происходит при увеличении напряжения между стоком и истоком . Из этих уравнений находим 5 6 Пусть и значения этих параметров были взяты из существующих моделей транзистора. Для 2 легко вычислить из 5, что 1,15. Параметр 1 при таком значении, так как значения и разные. Когда 3 В и 1,15, Таким образом, чувствительность -компаратора увеличилась в 6 раз. Чем меньше значения и, тем больше чувствительность. В TTE-схеме см. рис. 3 каждый синапс состоит из двух транзисторов. На затвор одного транзистора подается входная переменная, а на затвор другого напряжение, которое управляет переменным весом током в -м синапсе. Рассмотрим сначала нижнюю часть TTE -компаратора, где токи синапсов суммируются, и заместим пары транзисторов, которые образуют синапсы, эквивалентными транзисторами с характеристиками, показанными на рис. 4. Эти характеристики были получены с использованием SPICE-моделирования. Слева от линии переключения режимов транзисторы находятся в ненасыщенном режиме, справа в насыщенном режиме. Из этих характеристик легко увидеть, что когда 1,5 В, эквивалентные транзисторы находятся в насыщенном режиме, если управляющее напряжение 1,5 В, и в ненасыщенном режиме при 1,5 В. Таким образом, условие насыщенного режима ограничивает диапазон изменения напряжения управления 01,5 В. Нарушение этого условия приводит к уменьшению выходного сигнала компаратора, поскольку в этом случае токи через синапсы могут перераспределяться при подключении тока дополнительного синапса. Действительно, пусть наименьший вес соответствует току синапса и добавление этого тока к общему току других синапсов должно вызвать переключение TTE. Однако это переключение может не произойти, так как если синапс с наибольшим током не насыщен, то, несмотря на общее увеличение тока, ток через этот синапс может уменьшиться за счет перераспределения токов в синапсах. Ток других ненасыщенных синапсов также уменьшается. В результате общий ток увеличивается на величину, которая значительно меньше . Это приводит к уменьшению выходного сигнала -компаратора. Диапазон изменения управляющих напряжений синапсов может быть расширен путем включения дополнительного -канального транзистора в схему рис. 5. На затвор этого транзистора подается напряжение такое, что при токе, обеспечивающем 2, транзистор насыщается под действием напряжения . Увеличение общего тока через синапсы путем добавления синапса с наименьшим током ведет к некоторому уменьшению . При этом транзистора увеличивается на ту же величину и дополнительный транзистор приоткрывается, компенсируя изменение . Таким образом, из-за отрицательной обратной связи дополнительный транзистор стабилизирует и, следовательно, стабилизирует токи через синапсы. Транзисторы синапсов имеют минимальную ширину 0,27 мкм, ширина транзистора 6 мкм, транзистора 5,4 мкм, транзистора 6 мкм см. рис. 5. Пусть управляющее напряжение одного из синапсов равно наибольшему возможному значению 3 В, а управляющие напряжения других синапсов равны нулю. Тогда ток будет протекать только через один синапс. Временно отсоединим -канальную часть схемы, соединим сток транзистора с источником напряжения и снимем зависимость тока синапса от напряжения, показанную на рис. 6. Она похожа на характеристику одного транзистора и имеет две зоны линейную и насыщения. Легко видеть, что при 1,5 B синапс находится в режиме насыщения. Уменьшение напряжения ведет к снижению тока синапса и, следовательно, к уменьшению диапазона изменения этого тока в зависимости от значения управляющего напряжения . При увеличении напряжения растет ток синапса и расширяется линейная зона характеристики, что может привести к потере стабилизации тока в рабочей точке -компаратора. Таким образом, существует оптимальное значение напряжения смещения . Во всех экспериментах 2,1 В. Теперь рассмотрим -канальную часть схемы модифицированного -компаратора см. рис. 5. В рабочей точке 2 она должна обеспечить ток, соответствующий наибольшему значению порога реализуемых функций. Для достижения этой цели может быть использован один -канальный транзистор с напряжением смещения на его затворе, которое обеспечивает насыщение транзистора в рабочей точке. Однако в этом случае крутизна характеристики в рабочей точке будет недостаточной для хорошей стабилизации порогового значения тока. По этой причине схема модифицированного -компаратора имеет два последовательно соединенных -канальных транзистора и, на затворы которых подаются опорные напряжения и соответственно прием, используемый в каскодных усилителях 21, с. 287. Эти опорные напряжения выбираются таким образом, что с ростом тока компаратора сначала насыщается транзистор, а затем с большей скоростью насыщается транзистор . В дальнейших экспериментах 2,1 B, 1,5 В. Зависимость напряжения на стоке транзистора от тока показана на рис. 7. При вхождении транзистора в зону насыщения напряжение на затворе транзистора начинает изменяться с большей скоростью, так как . Падение напряжения на транзисторе стремительно возрастает, увеличивая крутизну характеристики кривая на рис. 7. Кривая демонстрирует удовлетворительную стабилизацию падения напряжения на синапсе. Для сравнений на рис. 8 представлены экспериментальные характеристики старого и нового -компаратора, рассчитанного на максимальное значение порога функций, равного 89. При проведении этого эксперимента к -компаратору последовательно подключались синапсы, на управляющие входы которых подавалось напряжение min, соответствующее наименьшему весу входных переменных, а на информационные входы, т. е. синапсы с минимальным током. Как видно из рисунка, для старой схемы -компаратора кривая скачок напряжения почти везде одинаков и в районе порога выходного усилителя равен 15 мВ. Модифицированный -компаратор при добавлении 89-го синапса дает максимальный скачок напряжения max 428 мВ на своем выходе кривая . Естественно выбрать пороговое напряжение выходного усилителя в середине этого скачка на уровне 1,75 В. Легко видеть, что TTE с таким -компаратором и 89 синапсами может реализовать пороговую функцию И на 89 входов. Причина, по которой выбрано это странное число 89, будет ясна из дальнейшего изложения. Схемы, которые используются для создания управляющих напряжений, определяющих веса входных переменных TTE, практически не зависят от способа реализации синапсов. Некоторые из них были опубликованы например, 9, и все они имеют похожую структуру. Основное различие заключается в выборе типа элемента памяти конденсатор или транзистор с плавающим затвором и способа представления значений входных двоичных переменных 0, 1 или 1, 1. На полной схеме TTE, используемой в экспериментах рис. 9, напряжения смещения транзисторов -компаратора 1,5 и 2,1 В формируются с помощью делителей напряжения, выполненных по схеме токового зеркала. Каждый из синапсов TTE содержит пять транзисторов, один диод транзистор в диодном включении и конденсатор. Два из пяти транзисторов образуют одну из параллельных ветвей -компаратора. Входная переменная подается на затвор нижнего транзистора этой пары, а управляющее напряжение, снимаемое с конденсатора, на затвор верхнего транзистора. Такой порядок соединения транзисторов делает зависимость тока синапса от управляющего напряжения более линейной за счет отрицательной обратной связи и сокращает в несколько раз влияние переключения значения входной переменной на управляющее напряжение через паразитную емкость. Все транзисторы синапса имеют минимальную ширину 0,27 мкм. Емкость конденсатора выбрана равной 1 пФ. Транзистор в диодном включении в схеме синапса, в принципе, может быть опущен. Он предназначен для того, чтобы при обучении TTE сигналы могли разрядить конденсатор лишь до величины напряжения, равного напряжению порога диода, которое несколько ниже напряжения, устанавливающего минимальный ток синапса. Такое ограничение существенно уменьшает время обучения. Кроме того, включение диода уменьшает влияние через паразитные емкости изменения значений входной переменной на сохранение заряда конденсатора, когда цепь его разряда не работает. Во время обучения напряжение, управляющее током синапса весом переменной, аккумулируется на конденсаторе. Изменение заряда конденсатора допускается только в случае, когда синапс активен, т. е. когда входная переменная принимает значение лог.1. До тех пор, пока -компаратор TTE не выйдет в рабочую точку, заряд конденсатора может увеличиваться не непрерывно, а дискретно приблизительно равными порциями квантами, определяющими максимальный шаг обучения. При достижении -компаратором рабочей точки конденсатор синапса может как заряжаться, так и разряжаться на шаг обучения, который формируется автоматически от максимально возможного до минимальной величины, обусловленной задержкой срабатывания TTE. Максимальная величина шага обучения выбирается исходя из требуемой точности установки управляющих напряжений синапсов и определяется амплитудой сигналов increment увеличение и decrement уменьшение и их длительностью. При обучении TTE сложным пороговым функциям с большим значением суммы весов входов и порога максимальный шаг обучения должен быть небольшим. Алгоритмы обучения обычно строятся таким образом, что как только выходной сигнал TTE начинает совпадать со значением обучающей функции, обучение прекращается. Изза маленького шага обучения в случае, когда TTE правильно сработает после того, как переменная с наименьшим весом изменит свое значение, скачок напряжения на выходе -компаратора может лишь незначительно превысить минимально допустимую величину, достаточную для срабатывания выходного усилителя. Для того чтобы расширить границы надежного сохранения состояния TTE после обучения, его схема содержит три выходных усилителя с различными порогами срабатывания высоким, средним и низким. В обученном TTE значение пороговой функции снимается с выхода усилителя со средним порогом. Выходные сигналы and усилителей с высоким и низким порогами соответственно используются лишь во время обучения TTE. После обучения такого TTE скачок напряжения на выходе -компаратора, который вызывает переключение выхода среднего усилителя, должен быть не меньше, чем разность пороговых напряжений срабатывания двух других усилителей. Итак, управляющие напряжения синапсов, сформированные в процессе обучения, сохраняются на конденсаторах и, следовательно, могут изменяться благодаря паразитным сопротивлениям утечки. В связи с этим необходимо организовать процедуру обновления емкостной памяти. Три выходных усилителя с различными порогами чувствительности позволяют решить и эту проблему, например, путем организации автокоррекции управляющих напряжений, используя выходной сигнал TTE в качестве обучающей последовательности значений функции. Общая структурная схема, используемая при моделировании процесса обучения TTE заданной пороговой логической функции, показана на рис. 10. Генератор входных сигналов вырабатывает периодически повторяемые последовательности наборов значений входных переменных, и последовательность значений логической функции на этих наборах, а также стробирующие сигналы и однократный сигнал, управляющий переключением режима обучения на режим обновления. Переключатель обучениеобновление направляет на его выход либо сигнал при обучении, либо выходной сигнал ТТЕ при обновлении. Компаратор в обоих режимах вырабатывает сигналы и, максимальная длительность которых определяется длительностью стробирующего сигнала . Логические функции этих сигналов имеют вид и Активными значениями сигналов и являются соответственно лог.0 и лог.1. Физически эти сигналы реализуются с ограниченной амплитудой напряжения такой, чтобы в цепях заряда и разряда конденсаторов синапсов создавался ток, равный 0,2 мкА. Для ограничения амплитуды сигналов используются делители напряжения. При длительности строба, равной 100 нс, и емкости конденсаторов 1 пФ максимальный шаг обучения составляет 20 мВ. Сокращение шага обучения в рабочей точке TTE происходит при совпадении значений сигналов или со значением сигнала . В результате шаг обучения может изменяться от 20 мВ до 0, что дает возможность устанавливать напряжения на конденсаторах синапсов с точностью до 1 мВ. Выбор значения максимального шага обучения зависит от сложности обучаемой функции, вернее, от числа переменных функции, которые одновременно могут принимать значение лог.1 в формируемых наборах. Продолжение статьи, в котором обосновывается выбор обучающих пороговых функций для моделирования процесса обучения ТТЕ, приводятся результаты SPICE моделирования с использованием моделей транзисторов MOSIS 0,18 мкм, определяются ограничения на реализуемость ТТЕ и доказывается возможность его обучения произвольным логическим функциям, зависящим от не более чем 11 переменных, будет представлено в следующем номере журнала. 